<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • ddplot</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ddplot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Start.html">Getting Started</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/feddelegrand7/ddplot/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><link href="Start_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="Start_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="Start_files/r2d3-render-0.1.0/r2d3-render.js"></script><script src="Start_files/webcomponents-2.0.0/webcomponents.js"></script><script src="Start_files/r2d3-binding-0.2.6/r2d3.js"></script><script src="Start_files/d3v6-6.2.0/d3.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/feddelegrand7/ddplot/blob/HEAD/vignettes/Start.Rmd" class="external-link"><code>vignettes/Start.Rmd</code></a></small>
      <div class="hidden name"><code>Start.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/feddelegrand7/ddplot" class="external-link">ddplot</a></span><span class="op">)</span></span></code></pre></div>
<p><code>D3.js</code> is a famous JavaScript library that allows one to
create extremely flexible SVG graphics however <code>D3</code> has (at
least according to me) a pretty steep learning curve. Further, in order
to understand some core concepts, one need to have some basics in
<code>HTML</code>, <code>CSS</code> and <code>JavaScript</code>.
<code>ddplot</code> aims to simply the process using a set of functions
that render several graphics using a simple <code>R</code> API. Finally,
<code>ddplot</code> is built upon the amazing <code>r2d3</code> package
which makes it a breeze to interface <code>D3.js</code> with
<code>R</code>, so a big thanks to the developers.</p>
<div class="section level2">
<h2 id="scatterplot">
<code>scatterPlot()</code><a class="anchor" aria-label="anchor" href="#scatterplot"></a>
</h2>
<p>Let’s work with the <code>mpg</code> data frame from the
<code>ggplot2</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># needed for the mpg data frame</span></span>
<span></span>
<span><span class="fu"><a href="../reference/scatterPlot.html">scatterPlot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mpg</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"hwy"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"cty"</span>,</span>
<span>  xtitle <span class="op">=</span> <span class="st">"hwy variable"</span>,</span>
<span>  ytitle <span class="op">=</span> <span class="st">"cty variable"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"cty and hwy relationship"</span>,</span>
<span>  titleFontSize <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"data":{"manufacturer":["audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","honda","honda","honda","honda","honda","honda","honda","honda","honda","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","jeep","jeep","jeep","jeep","jeep","jeep","jeep","jeep","land rover","land rover","land rover","land rover","lincoln","lincoln","lincoln","mercury","mercury","mercury","mercury","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","pontiac","pontiac","pontiac","pontiac","pontiac","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen"],"model":["a4","a4","a4","a4","a4","a4","a4","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a6 quattro","a6 quattro","a6 quattro","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","corvette","corvette","corvette","corvette","corvette","k1500 tahoe 4wd","k1500 tahoe 4wd","k1500 tahoe 4wd","k1500 tahoe 4wd","malibu","malibu","malibu","malibu","malibu","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","expedition 2wd","expedition 2wd","expedition 2wd","explorer 4wd","explorer 4wd","explorer 4wd","explorer 4wd","explorer 4wd","explorer 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","mustang","mustang","mustang","mustang","mustang","mustang","mustang","mustang","mustang","civic","civic","civic","civic","civic","civic","civic","civic","civic","sonata","sonata","sonata","sonata","sonata","sonata","sonata","tiburon","tiburon","tiburon","tiburon","tiburon","tiburon","tiburon","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","range rover","range rover","range rover","range rover","navigator 2wd","navigator 2wd","navigator 2wd","mountaineer 4wd","mountaineer 4wd","mountaineer 4wd","mountaineer 4wd","altima","altima","altima","altima","altima","altima","maxima","maxima","maxima","pathfinder 4wd","pathfinder 4wd","pathfinder 4wd","pathfinder 4wd","grand prix","grand prix","grand prix","grand prix","grand prix","forester awd","forester awd","forester awd","forester awd","forester awd","forester awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","4runner 4wd","4runner 4wd","4runner 4wd","4runner 4wd","4runner 4wd","4runner 4wd","camry","camry","camry","camry","camry","camry","camry","camry solara","camry solara","camry solara","camry solara","camry solara","camry solara","camry solara","corolla","corolla","corolla","corolla","corolla","land cruiser wagon 4wd","land cruiser wagon 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","gti","gti","gti","gti","gti","jetta","jetta","jetta","jetta","jetta","jetta","jetta","jetta","jetta","new beetle","new beetle","new beetle","new beetle","new beetle","new beetle","passat","passat","passat","passat","passat","passat","passat"],"displ":[1.8,1.8,2,2,2.8,2.8,3.1,1.8,1.8,2,2,2.8,2.8,3.1,3.1,2.8,3.1,4.2,5.3,5.3,5.3,5.7,6,5.7,5.7,6.2,6.2,7,5.3,5.3,5.7,6.5,2.4,2.4,3.1,3.5,3.6,2.4,3,3.3,3.3,3.3,3.3,3.3,3.8,3.8,3.8,4,3.7,3.7,3.9,3.9,4.7,4.7,4.7,5.2,5.2,3.9,4.7,4.7,4.7,5.2,5.7,5.9,4.7,4.7,4.7,4.7,4.7,4.7,5.2,5.2,5.7,5.9,4.6,5.4,5.4,4,4,4,4,4.6,5,4.2,4.2,4.6,4.6,4.6,5.4,5.4,3.8,3.8,4,4,4.6,4.6,4.6,4.6,5.4,1.6,1.6,1.6,1.6,1.6,1.8,1.8,1.8,2,2.4,2.4,2.4,2.4,2.5,2.5,3.3,2,2,2,2,2.7,2.7,2.7,3,3.7,4,4.7,4.7,4.7,5.7,6.1,4,4.2,4.4,4.6,5.4,5.4,5.4,4,4,4.6,5,2.4,2.4,2.5,2.5,3.5,3.5,3,3,3.5,3.3,3.3,4,5.6,3.1,3.8,3.8,3.8,5.3,2.5,2.5,2.5,2.5,2.5,2.5,2.2,2.2,2.5,2.5,2.5,2.5,2.5,2.5,2.7,2.7,3.4,3.4,4,4.7,2.2,2.2,2.4,2.4,3,3,3.5,2.2,2.2,2.4,2.4,3,3,3.3,1.8,1.8,1.8,1.8,1.8,4.7,5.7,2.7,2.7,2.7,3.4,3.4,4,4,2,2,2,2,2.8,1.9,2,2,2,2,2.5,2.5,2.8,2.8,1.9,1.9,2,2,2.5,2.5,1.8,1.8,2,2,2.8,2.8,3.6],"year":[1999,1999,2008,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,2008,2008,1999,2008,2008,2008,2008,2008,1999,2008,1999,1999,2008,2008,2008,2008,2008,1999,1999,1999,2008,1999,2008,2008,1999,1999,1999,1999,2008,2008,2008,1999,1999,2008,2008,2008,2008,1999,1999,2008,2008,2008,1999,1999,1999,2008,2008,2008,1999,2008,1999,2008,2008,2008,2008,2008,2008,1999,1999,2008,1999,1999,1999,2008,1999,1999,1999,2008,2008,1999,1999,1999,1999,1999,2008,1999,2008,1999,1999,2008,2008,1999,1999,2008,2008,2008,1999,1999,1999,1999,1999,2008,2008,2008,2008,1999,1999,2008,2008,1999,1999,2008,1999,1999,2008,2008,2008,2008,2008,2008,2008,1999,1999,2008,2008,2008,2008,1999,2008,2008,1999,1999,1999,2008,1999,2008,2008,1999,1999,1999,2008,2008,2008,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,1999,2008,2008,1999,1999,2008,2008,2008,2008,1999,1999,1999,1999,2008,2008,2008,2008,1999,1999,1999,1999,2008,2008,1999,1999,2008,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,2008,1999,1999,1999,2008,2008,1999,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,2008,2008,1999,1999,1999,1999,2008,2008,2008,2008,1999,1999,1999,1999,1999,1999,2008,2008,1999,1999,2008,2008,1999,1999,2008],"cyl":[4,4,4,4,6,6,6,4,4,4,4,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,4,4,6,6,6,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,8,8,8,8,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,6,6,6,6,8,8,6,6,8,8,8,8,8,6,6,6,6,8,8,8,8,8,4,4,4,4,4,4,4,4,4,4,4,4,4,6,6,6,4,4,4,4,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,6,6,8,8,4,4,4,4,6,6,6,6,6,6,6,6,8,6,6,6,6,8,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,6,6,8,4,4,4,4,6,6,6,4,4,4,4,6,6,6,4,4,4,4,4,8,8,4,4,4,6,6,6,6,4,4,4,4,6,4,4,4,4,4,5,5,6,6,4,4,4,4,5,5,4,4,4,4,6,6,6],"trans":["auto(l5)","manual(m5)","manual(m6)","auto(av)","auto(l5)","manual(m5)","auto(av)","manual(m5)","auto(l5)","manual(m6)","auto(s6)","auto(l5)","manual(m5)","auto(s6)","manual(m6)","auto(l5)","auto(s6)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","manual(m6)","auto(l4)","manual(m6)","auto(s6)","manual(m6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(s6)","auto(l3)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l6)","manual(m6)","auto(l4)","auto(l4)","manual(m5)","auto(l5)","auto(l5)","auto(l5)","manual(m5)","auto(l4)","auto(l4)","auto(l5)","auto(l5)","auto(l5)","auto(l4)","auto(l5)","auto(l4)","manual(m6)","auto(l5)","auto(l5)","auto(l5)","manual(m6)","manual(m6)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l5)","manual(m5)","auto(l5)","auto(l5)","auto(l6)","auto(l4)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","manual(m5)","manual(m5)","auto(l5)","manual(m6)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l5)","manual(m6)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","manual(m6)","manual(m5)","auto(l5)","auto(l5)","auto(l4)","auto(l4)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l4)","auto(s6)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l5)","auto(l5)","auto(l6)","auto(l4)","manual(m5)","auto(l4)","auto(av)","manual(m6)","manual(m6)","auto(av)","auto(l4)","manual(m5)","auto(av)","auto(l4)","manual(m5)","auto(l5)","auto(s5)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(s4)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(s4)","auto(s4)","manual(m5)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","manual(m5)","auto(l5)","auto(l5)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","manual(m5)","auto(s6)","auto(l4)","manual(m5)","manual(m5)","auto(s5)","auto(l4)","manual(m5)","auto(s5)","auto(l3)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(s6)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","manual(m6)","auto(l5)","manual(m5)","auto(l4)","manual(m6)","auto(s6)","manual(m5)","manual(m5)","manual(m5)","auto(l4)","auto(s6)","manual(m6)","auto(s6)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(s6)","manual(m5)","auto(l5)","auto(s6)","manual(m6)","auto(l5)","manual(m5)","auto(s6)"],"drv":["f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","r","r","r","r","r","r","r","r","r","r","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","r","r","r","4","4","4","4","4","4","4","4","4","4","4","4","4","r","r","r","r","r","r","r","r","r","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","r","r","r","4","4","4","4","f","f","f","f","f","f","f","f","f","4","4","4","4","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f"],"cty":[18,21,20,21,16,18,18,18,16,20,19,15,17,17,15,15,17,16,14,11,14,13,12,16,15,16,15,15,14,11,11,14,19,22,18,18,17,18,17,16,16,17,17,11,15,15,16,16,15,14,13,14,14,14,9,11,11,13,13,9,13,11,13,11,12,9,13,13,12,9,11,11,13,11,11,11,12,14,15,14,13,13,13,14,14,13,13,13,11,13,18,18,17,16,15,15,15,15,14,28,24,25,23,24,26,25,24,21,18,18,21,21,18,18,19,19,19,20,20,17,16,17,17,15,15,14,9,14,13,11,11,12,12,11,11,11,12,14,13,13,13,21,19,23,23,19,19,18,19,19,14,15,14,12,18,16,17,18,16,18,18,20,19,20,18,21,19,19,19,20,20,19,20,15,16,15,15,16,14,21,21,21,21,18,18,19,21,21,21,22,18,18,18,24,24,26,28,26,11,13,15,16,17,15,15,15,16,21,19,21,22,17,33,21,19,22,21,21,21,16,17,35,29,21,19,20,20,21,18,19,21,16,18,17],"hwy":[29,29,31,30,26,26,27,26,25,28,27,25,25,25,25,24,25,23,20,15,20,17,17,26,23,26,25,24,19,14,15,17,27,30,26,29,26,24,24,22,22,24,24,17,22,21,23,23,19,18,17,17,19,19,12,17,15,17,17,12,17,16,18,15,16,12,17,17,16,12,15,16,17,15,17,17,18,17,19,17,19,19,17,17,17,16,16,17,15,17,26,25,26,24,21,22,23,22,20,33,32,32,29,32,34,36,36,29,26,27,30,31,26,26,28,26,29,28,27,24,24,24,22,19,20,17,12,19,18,14,15,18,18,15,17,16,18,17,19,19,17,29,27,31,32,27,26,26,25,25,17,17,20,18,26,26,27,28,25,25,24,27,25,26,23,26,26,26,26,25,27,25,27,20,20,19,17,20,17,29,27,31,31,26,26,28,27,29,31,31,26,26,27,30,33,35,37,35,15,18,20,20,22,17,19,18,20,29,26,29,29,24,44,29,26,29,29,29,29,23,24,44,41,29,26,28,29,29,29,28,29,26,26,26],"fl":["p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","r","e","r","r","r","p","p","p","p","p","r","e","r","d","r","r","r","r","r","r","r","r","r","r","r","e","r","r","r","r","r","r","r","r","r","r","e","r","r","r","r","e","r","r","r","r","r","e","r","r","r","e","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","p","r","r","r","p","r","r","r","c","p","r","r","r","r","r","r","r","r","r","r","r","r","r","r","d","r","r","r","e","r","r","p","p","r","r","p","r","p","r","r","r","r","r","r","r","r","r","p","p","r","r","p","r","r","p","p","r","p","r","r","p","r","r","r","p","r","p","r","r","r","r","p","r","p","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","p","p","r","d","r","r","p","p","r","r","r","r","d","d","r","r","r","r","p","p","p","p","p","p","p"],"class":["compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","midsize","midsize","midsize","suv","suv","suv","suv","suv","2seater","2seater","2seater","2seater","2seater","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","suv","suv","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","suv","suv","suv","suv","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","midsize","midsize","midsize","midsize","midsize","midsize","midsize","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","compact","compact","midsize","midsize","midsize","midsize","midsize","midsize","midsize","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","suv","suv","suv","suv","suv","suv","subcompact","subcompact","subcompact","subcompact","compact","compact","compact","compact","suv","suv","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","midsize","midsize","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","midsize","midsize","midsize","midsize","midsize","midsize","midsize"]},"type":"data.frame","container":"svg","options":{"x":"hwy","y":"cty","col":"crimson","size":2,"xticks":null,"yticks":null,"xtitle":"hwy variable","ytitle":"cty variable","title":"cty and hwy relationship","font":"Verdana, Geneva, Tahoma, sans-serif","stroke":null,"strokeWidth":null,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":20,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/scatterplot.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the x variable\nlet xmin = d3.min(data, (d) => d[options.x]);\nlet xmax = d3.max(data, (d) => d[options.x]);\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\nlet x = d3\n  .scaleLinear()\n  .domain(d3.extent(data, d => d[options.x]))\n  .range([margin.left, width - margin.right])\n  .nice();\n\n// Setting the scale of the y variable\nlet y = d3\n  .scaleLinear()\n  .domain(d3.extent(data, d => d[options.y]))\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x)\n       .ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y)\n       .ticks(options.yticks);\n\n\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS)\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS)\n\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style('fill', options.axisCol)\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style('fill', options.axisCol)\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style('fill', options.axisCol)\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol)\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol)\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol)\n\n\n// Rendering the scatter plot\nsvg\n  .style(\"background-color\", options.bgcol)\n  .selectAll(\"circle\")\n  .data(data)\n  .enter()\n  .append(\"circle\")\n  .attr(\"cx\", (d) => x(d[options.x]))\n  .attr(\"cy\", (d) => y(d[options.y]))\n  .attr(\"r\", options.size)\n  .attr(\"fill\", options.col)\n  .attr(\"opacity\", options.opacity)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth);\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>In comparison to <code>ggplot2</code>, graphics’ customization in
<code>ddplot</code> is limited nonetheless you get a fully vectorized
SVG which is cool.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/scatterPlot.html">scatterPlot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mpg</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"displ"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"cty"</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"tomato"</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"pink"</span>,</span>
<span>  size <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  stroke <span class="op">=</span> <span class="st">"royalblue"</span>,</span>
<span>  strokeWidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  xtitle <span class="op">=</span> <span class="st">"displ variable"</span>,</span>
<span>  ytitle <span class="op">=</span> <span class="st">"cty variable"</span>,</span>
<span>  xticks <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  yticks <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"data":{"manufacturer":["audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","audi","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","honda","honda","honda","honda","honda","honda","honda","honda","honda","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","jeep","jeep","jeep","jeep","jeep","jeep","jeep","jeep","land rover","land rover","land rover","land rover","lincoln","lincoln","lincoln","mercury","mercury","mercury","mercury","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","nissan","pontiac","pontiac","pontiac","pontiac","pontiac","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen"],"model":["a4","a4","a4","a4","a4","a4","a4","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a6 quattro","a6 quattro","a6 quattro","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","corvette","corvette","corvette","corvette","corvette","k1500 tahoe 4wd","k1500 tahoe 4wd","k1500 tahoe 4wd","k1500 tahoe 4wd","malibu","malibu","malibu","malibu","malibu","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","expedition 2wd","expedition 2wd","expedition 2wd","explorer 4wd","explorer 4wd","explorer 4wd","explorer 4wd","explorer 4wd","explorer 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","f150 pickup 4wd","mustang","mustang","mustang","mustang","mustang","mustang","mustang","mustang","mustang","civic","civic","civic","civic","civic","civic","civic","civic","civic","sonata","sonata","sonata","sonata","sonata","sonata","sonata","tiburon","tiburon","tiburon","tiburon","tiburon","tiburon","tiburon","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","range rover","range rover","range rover","range rover","navigator 2wd","navigator 2wd","navigator 2wd","mountaineer 4wd","mountaineer 4wd","mountaineer 4wd","mountaineer 4wd","altima","altima","altima","altima","altima","altima","maxima","maxima","maxima","pathfinder 4wd","pathfinder 4wd","pathfinder 4wd","pathfinder 4wd","grand prix","grand prix","grand prix","grand prix","grand prix","forester awd","forester awd","forester awd","forester awd","forester awd","forester awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","impreza awd","4runner 4wd","4runner 4wd","4runner 4wd","4runner 4wd","4runner 4wd","4runner 4wd","camry","camry","camry","camry","camry","camry","camry","camry solara","camry solara","camry solara","camry solara","camry solara","camry solara","camry solara","corolla","corolla","corolla","corolla","corolla","land cruiser wagon 4wd","land cruiser wagon 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","gti","gti","gti","gti","gti","jetta","jetta","jetta","jetta","jetta","jetta","jetta","jetta","jetta","new beetle","new beetle","new beetle","new beetle","new beetle","new beetle","passat","passat","passat","passat","passat","passat","passat"],"displ":[1.8,1.8,2,2,2.8,2.8,3.1,1.8,1.8,2,2,2.8,2.8,3.1,3.1,2.8,3.1,4.2,5.3,5.3,5.3,5.7,6,5.7,5.7,6.2,6.2,7,5.3,5.3,5.7,6.5,2.4,2.4,3.1,3.5,3.6,2.4,3,3.3,3.3,3.3,3.3,3.3,3.8,3.8,3.8,4,3.7,3.7,3.9,3.9,4.7,4.7,4.7,5.2,5.2,3.9,4.7,4.7,4.7,5.2,5.7,5.9,4.7,4.7,4.7,4.7,4.7,4.7,5.2,5.2,5.7,5.9,4.6,5.4,5.4,4,4,4,4,4.6,5,4.2,4.2,4.6,4.6,4.6,5.4,5.4,3.8,3.8,4,4,4.6,4.6,4.6,4.6,5.4,1.6,1.6,1.6,1.6,1.6,1.8,1.8,1.8,2,2.4,2.4,2.4,2.4,2.5,2.5,3.3,2,2,2,2,2.7,2.7,2.7,3,3.7,4,4.7,4.7,4.7,5.7,6.1,4,4.2,4.4,4.6,5.4,5.4,5.4,4,4,4.6,5,2.4,2.4,2.5,2.5,3.5,3.5,3,3,3.5,3.3,3.3,4,5.6,3.1,3.8,3.8,3.8,5.3,2.5,2.5,2.5,2.5,2.5,2.5,2.2,2.2,2.5,2.5,2.5,2.5,2.5,2.5,2.7,2.7,3.4,3.4,4,4.7,2.2,2.2,2.4,2.4,3,3,3.5,2.2,2.2,2.4,2.4,3,3,3.3,1.8,1.8,1.8,1.8,1.8,4.7,5.7,2.7,2.7,2.7,3.4,3.4,4,4,2,2,2,2,2.8,1.9,2,2,2,2,2.5,2.5,2.8,2.8,1.9,1.9,2,2,2.5,2.5,1.8,1.8,2,2,2.8,2.8,3.6],"year":[1999,1999,2008,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,2008,2008,1999,2008,2008,2008,2008,2008,1999,2008,1999,1999,2008,2008,2008,2008,2008,1999,1999,1999,2008,1999,2008,2008,1999,1999,1999,1999,2008,2008,2008,1999,1999,2008,2008,2008,2008,1999,1999,2008,2008,2008,1999,1999,1999,2008,2008,2008,1999,2008,1999,2008,2008,2008,2008,2008,2008,1999,1999,2008,1999,1999,1999,2008,1999,1999,1999,2008,2008,1999,1999,1999,1999,1999,2008,1999,2008,1999,1999,2008,2008,1999,1999,2008,2008,2008,1999,1999,1999,1999,1999,2008,2008,2008,2008,1999,1999,2008,2008,1999,1999,2008,1999,1999,2008,2008,2008,2008,2008,2008,2008,1999,1999,2008,2008,2008,2008,1999,2008,2008,1999,1999,1999,2008,1999,2008,2008,1999,1999,1999,2008,2008,2008,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,1999,2008,2008,1999,1999,2008,2008,2008,2008,1999,1999,1999,1999,2008,2008,2008,2008,1999,1999,1999,1999,2008,2008,1999,1999,2008,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,2008,1999,1999,1999,2008,2008,1999,2008,1999,1999,2008,1999,1999,2008,2008,1999,1999,2008,2008,1999,1999,1999,1999,2008,2008,2008,2008,1999,1999,1999,1999,1999,1999,2008,2008,1999,1999,2008,2008,1999,1999,2008],"cyl":[4,4,4,4,6,6,6,4,4,4,4,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,4,4,6,6,6,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,8,8,8,8,8,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,6,6,6,6,8,8,6,6,8,8,8,8,8,6,6,6,6,8,8,8,8,8,4,4,4,4,4,4,4,4,4,4,4,4,4,6,6,6,4,4,4,4,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,6,6,8,8,4,4,4,4,6,6,6,6,6,6,6,6,8,6,6,6,6,8,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,6,6,6,8,4,4,4,4,6,6,6,4,4,4,4,6,6,6,4,4,4,4,4,8,8,4,4,4,6,6,6,6,4,4,4,4,6,4,4,4,4,4,5,5,6,6,4,4,4,4,5,5,4,4,4,4,6,6,6],"trans":["auto(l5)","manual(m5)","manual(m6)","auto(av)","auto(l5)","manual(m5)","auto(av)","manual(m5)","auto(l5)","manual(m6)","auto(s6)","auto(l5)","manual(m5)","auto(s6)","manual(m6)","auto(l5)","auto(s6)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","manual(m6)","auto(l4)","manual(m6)","auto(s6)","manual(m6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(s6)","auto(l3)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l6)","manual(m6)","auto(l4)","auto(l4)","manual(m5)","auto(l5)","auto(l5)","auto(l5)","manual(m5)","auto(l4)","auto(l4)","auto(l5)","auto(l5)","auto(l5)","auto(l4)","auto(l5)","auto(l4)","manual(m6)","auto(l5)","auto(l5)","auto(l5)","manual(m6)","manual(m6)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l5)","manual(m5)","auto(l5)","auto(l5)","auto(l6)","auto(l4)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","manual(m5)","manual(m5)","auto(l5)","manual(m6)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l5)","manual(m6)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","manual(m6)","manual(m5)","auto(l5)","auto(l5)","auto(l4)","auto(l4)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l4)","auto(s6)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l5)","auto(l5)","auto(l6)","auto(l4)","manual(m5)","auto(l4)","auto(av)","manual(m6)","manual(m6)","auto(av)","auto(l4)","manual(m5)","auto(av)","auto(l4)","manual(m5)","auto(l5)","auto(s5)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(s4)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(s4)","auto(s4)","manual(m5)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","manual(m5)","auto(l5)","auto(l5)","manual(m5)","auto(l4)","manual(m5)","auto(l5)","auto(l4)","manual(m5)","auto(s6)","auto(l4)","manual(m5)","manual(m5)","auto(s5)","auto(l4)","manual(m5)","auto(s5)","auto(l3)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(s6)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","manual(m6)","auto(l5)","manual(m5)","auto(l4)","manual(m6)","auto(s6)","manual(m5)","manual(m5)","manual(m5)","auto(l4)","auto(s6)","manual(m6)","auto(s6)","manual(m5)","auto(l4)","manual(m5)","manual(m5)","auto(l4)","manual(m5)","auto(l4)","manual(m5)","auto(s6)","manual(m5)","auto(l5)","auto(s6)","manual(m6)","auto(l5)","manual(m5)","auto(s6)"],"drv":["f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","r","r","r","r","r","r","r","r","r","r","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","r","r","r","4","4","4","4","4","4","4","4","4","4","4","4","4","r","r","r","r","r","r","r","r","r","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","r","r","r","4","4","4","4","f","f","f","f","f","f","f","f","f","4","4","4","4","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f","f"],"cty":[18,21,20,21,16,18,18,18,16,20,19,15,17,17,15,15,17,16,14,11,14,13,12,16,15,16,15,15,14,11,11,14,19,22,18,18,17,18,17,16,16,17,17,11,15,15,16,16,15,14,13,14,14,14,9,11,11,13,13,9,13,11,13,11,12,9,13,13,12,9,11,11,13,11,11,11,12,14,15,14,13,13,13,14,14,13,13,13,11,13,18,18,17,16,15,15,15,15,14,28,24,25,23,24,26,25,24,21,18,18,21,21,18,18,19,19,19,20,20,17,16,17,17,15,15,14,9,14,13,11,11,12,12,11,11,11,12,14,13,13,13,21,19,23,23,19,19,18,19,19,14,15,14,12,18,16,17,18,16,18,18,20,19,20,18,21,19,19,19,20,20,19,20,15,16,15,15,16,14,21,21,21,21,18,18,19,21,21,21,22,18,18,18,24,24,26,28,26,11,13,15,16,17,15,15,15,16,21,19,21,22,17,33,21,19,22,21,21,21,16,17,35,29,21,19,20,20,21,18,19,21,16,18,17],"hwy":[29,29,31,30,26,26,27,26,25,28,27,25,25,25,25,24,25,23,20,15,20,17,17,26,23,26,25,24,19,14,15,17,27,30,26,29,26,24,24,22,22,24,24,17,22,21,23,23,19,18,17,17,19,19,12,17,15,17,17,12,17,16,18,15,16,12,17,17,16,12,15,16,17,15,17,17,18,17,19,17,19,19,17,17,17,16,16,17,15,17,26,25,26,24,21,22,23,22,20,33,32,32,29,32,34,36,36,29,26,27,30,31,26,26,28,26,29,28,27,24,24,24,22,19,20,17,12,19,18,14,15,18,18,15,17,16,18,17,19,19,17,29,27,31,32,27,26,26,25,25,17,17,20,18,26,26,27,28,25,25,24,27,25,26,23,26,26,26,26,25,27,25,27,20,20,19,17,20,17,29,27,31,31,26,26,28,27,29,31,31,26,26,27,30,33,35,37,35,15,18,20,20,22,17,19,18,20,29,26,29,29,24,44,29,26,29,29,29,29,23,24,44,41,29,26,28,29,29,29,28,29,26,26,26],"fl":["p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","p","r","e","r","r","r","p","p","p","p","p","r","e","r","d","r","r","r","r","r","r","r","r","r","r","r","e","r","r","r","r","r","r","r","r","r","r","e","r","r","r","r","e","r","r","r","r","r","e","r","r","r","e","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","p","r","r","r","p","r","r","r","c","p","r","r","r","r","r","r","r","r","r","r","r","r","r","r","d","r","r","r","e","r","r","p","p","r","r","p","r","p","r","r","r","r","r","r","r","r","r","p","p","r","r","p","r","r","p","p","r","p","r","r","p","r","r","r","p","r","p","r","r","r","r","p","r","p","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","p","p","r","d","r","r","p","p","r","r","r","r","d","d","r","r","r","r","p","p","p","p","p","p","p"],"class":["compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","midsize","midsize","midsize","suv","suv","suv","suv","suv","2seater","2seater","2seater","2seater","2seater","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","minivan","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","suv","suv","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","suv","suv","suv","suv","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","midsize","midsize","midsize","midsize","midsize","midsize","midsize","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","compact","compact","midsize","midsize","midsize","midsize","midsize","midsize","midsize","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","suv","suv","suv","suv","suv","suv","subcompact","subcompact","subcompact","subcompact","compact","compact","compact","compact","suv","suv","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","midsize","midsize","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","compact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","midsize","midsize","midsize","midsize","midsize","midsize","midsize"]},"type":"data.frame","container":"svg","options":{"x":"displ","y":"cty","col":"tomato","size":3,"xticks":3,"yticks":3,"xtitle":"displ variable","ytitle":"cty variable","title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"royalblue","strokeWidth":1,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"pink","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/scatterplot.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the x variable\nlet xmin = d3.min(data, (d) => d[options.x]);\nlet xmax = d3.max(data, (d) => d[options.x]);\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\nlet x = d3\n  .scaleLinear()\n  .domain(d3.extent(data, d => d[options.x]))\n  .range([margin.left, width - margin.right])\n  .nice();\n\n// Setting the scale of the y variable\nlet y = d3\n  .scaleLinear()\n  .domain(d3.extent(data, d => d[options.y]))\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x)\n       .ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y)\n       .ticks(options.yticks);\n\n\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS)\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS)\n\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style('fill', options.axisCol)\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style('fill', options.axisCol)\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style('fill', options.axisCol)\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol)\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol)\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol)\n\n\n// Rendering the scatter plot\nsvg\n  .style(\"background-color\", options.bgcol)\n  .selectAll(\"circle\")\n  .data(data)\n  .enter()\n  .append(\"circle\")\n  .attr(\"cx\", (d) => x(d[options.x]))\n  .attr(\"cy\", (d) => y(d[options.y]))\n  .attr(\"r\", options.size)\n  .attr(\"fill\", options.col)\n  .attr(\"opacity\", options.opacity)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth);\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="histogram">
<code>histogram()</code><a class="anchor" aria-label="anchor" href="#histogram"></a>
</h2>
<p>The <code><a href="../reference/histogram.html">histogram()</a></code> function allows you to visualize the
distribution of a vector of data:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/histogram.html">histogram</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mpg</span><span class="op">$</span><span class="va">hwy</span>,</span>
<span>  bins <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  fill <span class="op">=</span> <span class="st">"crimson"</span>,</span>
<span>  stroke <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  strokeWidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Distribution of the hwy variable"</span>,</span>
<span>  width <span class="op">=</span> <span class="st">"20"</span>,</span>
<span>  height <span class="op">=</span> <span class="st">"10"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"data":["function (..., list = character(), package = NULL, lib.loc = NULL, ","    verbose = getOption(\"verbose\"), envir = .GlobalEnv, overwrite = TRUE) ","{","    fileExt <- function(x) {","        db <- grepl(\"\\\\.[^.]+\\\\.(gz|bz2|xz)$\", x)","        ans <- sub(\".*\\\\.\", \"\", x)","        ans[db] <- sub(\".*\\\\.([^.]+\\\\.)(gz|bz2|xz)$\", \"\\\\1\\\\2\", ","            x[db])","        ans","    }","    my_read_table <- function(...) {","        lcc <- Sys.getlocale(\"LC_COLLATE\")","        on.exit(Sys.setlocale(\"LC_COLLATE\", lcc))","        Sys.setlocale(\"LC_COLLATE\", \"C\")","        read.table(...)","    }","    stopifnot(is.character(list))","    names <- c(as.character(substitute(list(...))[-1L]), list)","    if (!is.null(package)) {","        if (!is.character(package)) ","            stop(\"'package' must be a character vector or NULL\")","    }","    paths <- find.package(package, lib.loc, verbose = verbose)","    if (is.null(lib.loc)) ","        paths <- c(path.package(package, TRUE), if (!length(package)) getwd(), ","            paths)","    paths <- unique(normalizePath(paths[file.exists(paths)]))","    paths <- paths[dir.exists(file.path(paths, \"data\"))]","    dataExts <- tools:::.make_file_exts(\"data\")","    if (length(names) == 0L) {","        db <- matrix(character(), nrow = 0L, ncol = 4L)","        for (path in paths) {","            entries <- NULL","            packageName <- if (file_test(\"-f\", file.path(path, ","                \"DESCRIPTION\"))) ","                basename(path)","            else \".\"","            if (file_test(\"-f\", INDEX <- file.path(path, \"Meta\", ","                \"data.rds\"))) {","                entries <- readRDS(INDEX)","            }","            else {","                dataDir <- file.path(path, \"data\")","                entries <- tools::list_files_with_type(dataDir, ","                  \"data\")","                if (length(entries)) {","                  entries <- unique(tools::file_path_sans_ext(basename(entries)))","                  entries <- cbind(entries, \"\")","                }","            }","            if (NROW(entries)) {","                if (is.matrix(entries) && ncol(entries) == 2L) ","                  db <- rbind(db, cbind(packageName, dirname(path), ","                    entries))","                else warning(gettextf(\"data index for package %s is invalid and will be ignored\", ","                  sQuote(packageName)), domain = NA, call. = FALSE)","            }","        }","        colnames(db) <- c(\"Package\", \"LibPath\", \"Item\", \"Title\")","        footer <- if (missing(package)) ","            paste0(\"Use \", sQuote(paste(\"data(package =\", \".packages(all.available = TRUE))\")), ","                \"\\n\", \"to list the data sets in all *available* packages.\")","        else NULL","        y <- list(title = \"Data sets\", header = NULL, results = db, ","            footer = footer)","        class(y) <- \"packageIQR\"","        return(y)","    }","    paths <- file.path(paths, \"data\")","    for (name in names) {","        found <- FALSE","        for (p in paths) {","            tmp_env <- if (overwrite) ","                envir","            else new.env()","            if (file_test(\"-f\", file.path(p, \"Rdata.rds\"))) {","                rds <- readRDS(file.path(p, \"Rdata.rds\"))","                if (name %in% names(rds)) {","                  found <- TRUE","                  if (verbose) ","                    message(sprintf(\"name=%s:\\t found in Rdata.rds\", ","                      name), domain = NA)","                  thispkg <- sub(\".*/([^/]*)/data$\", \"\\\\1\", p)","                  thispkg <- sub(\"_.*$\", \"\", thispkg)","                  thispkg <- paste0(\"package:\", thispkg)","                  objs <- rds[[name]]","                  lazyLoad(file.path(p, \"Rdata\"), envir = tmp_env, ","                    filter = function(x) x %in% objs)","                  break","                }","                else if (verbose) ","                  message(sprintf(\"name=%s:\\t NOT found in names() of Rdata.rds, i.e.,\\n\\t%s\\n\", ","                    name, paste(names(rds), collapse = \",\")), ","                    domain = NA)","            }","            if (file_test(\"-f\", file.path(p, \"Rdata.zip\"))) {","                warning(\"zipped data found for package \", sQuote(basename(dirname(p))), ","                  \".\\nThat is defunct, so please re-install the package.\", ","                  domain = NA)","                if (file_test(\"-f\", fp <- file.path(p, \"filelist\"))) ","                  files <- file.path(p, scan(fp, what = \"\", quiet = TRUE))","                else {","                  warning(gettextf(\"file 'filelist' is missing for directory %s\", ","                    sQuote(p)), domain = NA)","                  next","                }","            }","            else {","                files <- list.files(p, full.names = TRUE)","            }","            files <- files[grep(name, files, fixed = TRUE)]","            if (length(files) > 1L) {","                o <- match(fileExt(files), dataExts, nomatch = 100L)","                paths0 <- dirname(files)","                paths0 <- factor(paths0, levels = unique(paths0))","                files <- files[order(paths0, o)]","            }","            if (length(files)) {","                for (file in files) {","                  if (verbose) ","                    message(\"name=\", name, \":\\t file= ...\", .Platform$file.sep, ","                      basename(file), \"::\\t\", appendLF = FALSE, ","                      domain = NA)","                  ext <- fileExt(file)","                  if (basename(file) != paste0(name, \".\", ext)) ","                    found <- FALSE","                  else {","                    found <- TRUE","                    zfile <- file","                    zipname <- file.path(dirname(file), \"Rdata.zip\")","                    if (file.exists(zipname)) {","                      Rdatadir <- tempfile(\"Rdata\")","                      dir.create(Rdatadir, showWarnings = FALSE)","                      topic <- basename(file)","                      rc <- .External(C_unzip, zipname, topic, ","                        Rdatadir, FALSE, TRUE, FALSE, FALSE)","                      if (rc == 0L) ","                        zfile <- file.path(Rdatadir, topic)","                    }","                    if (zfile != file) ","                      on.exit(unlink(zfile))","                    switch(ext, R = , r = {","                      library(\"utils\")","                      sys.source(zfile, chdir = TRUE, envir = tmp_env)","                    }, RData = , rdata = , rda = load(zfile, ","                      envir = tmp_env), TXT = , txt = , tab = , ","                      tab.gz = , tab.bz2 = , tab.xz = , txt.gz = , ","                      txt.bz2 = , txt.xz = assign(name, my_read_table(zfile, ","                        header = TRUE, as.is = FALSE), envir = tmp_env), ","                      CSV = , csv = , csv.gz = , csv.bz2 = , ","                      csv.xz = assign(name, my_read_table(zfile, ","                        header = TRUE, sep = \";\", as.is = FALSE), ","                        envir = tmp_env), found <- FALSE)","                  }","                  if (found) ","                    break","                }","                if (verbose) ","                  message(if (!found) ","                    \"*NOT* \", \"found\", domain = NA)","            }","            if (found) ","                break","        }","        if (!found) {","            warning(gettextf(\"data set %s not found\", sQuote(name)), ","                domain = NA)","        }","        else if (!overwrite) {","            for (o in ls(envir = tmp_env, all.names = TRUE)) {","                if (exists(o, envir = envir, inherits = FALSE)) ","                  warning(gettextf(\"an object named %s already exists and will not be overwritten\", ","                    sQuote(o)))","                else assign(o, get(o, envir = tmp_env, inherits = FALSE), ","                  envir = envir)","            }","            rm(tmp_env)","        }","    }","    invisible(names)","}"],"type":"function","container":"svg","options":{"x":[29,29,31,30,26,26,27,26,25,28,27,25,25,25,25,24,25,23,20,15,20,17,17,26,23,26,25,24,19,14,15,17,27,30,26,29,26,24,24,22,22,24,24,17,22,21,23,23,19,18,17,17,19,19,12,17,15,17,17,12,17,16,18,15,16,12,17,17,16,12,15,16,17,15,17,17,18,17,19,17,19,19,17,17,17,16,16,17,15,17,26,25,26,24,21,22,23,22,20,33,32,32,29,32,34,36,36,29,26,27,30,31,26,26,28,26,29,28,27,24,24,24,22,19,20,17,12,19,18,14,15,18,18,15,17,16,18,17,19,19,17,29,27,31,32,27,26,26,25,25,17,17,20,18,26,26,27,28,25,25,24,27,25,26,23,26,26,26,26,25,27,25,27,20,20,19,17,20,17,29,27,31,31,26,26,28,27,29,31,31,26,26,27,30,33,35,37,35,15,18,20,20,22,17,19,18,20,29,26,29,29,24,44,29,26,29,29,29,29,23,24,44,41,29,26,28,29,29,29,28,29,26,26,26],"bins":20,"fill":"crimson","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":"Distribution of the hwy variable","font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"white","strokeWidth":1,"width":"20","height":"10","xFontSize":10,"yFontSize":10,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/histogram.js */\n// Setting the margin object\nlet margin = { top: 50, right: 50, bottom: 50, left: 50 };\n\nlet bins = d3.histogram().thresholds(options.bins)(options.x);\n\n// Setting the scaling of the x variable\nlet xScale = d3\n  .scaleLinear()\n  .domain([bins[0].x0, bins[bins.length - 1].x1])\n  .range([margin.left, width - margin.right]);\n\n// Setting the scaling of the y variable\nlet yScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(bins, (d) => d.length)])\n  .nice()\n  .range([height - margin.bottom, margin.top]);\n\n// Setting the x-axis\nxAx = d3.axisBottom(xScale).ticks(options.xticks);\n\n// Setting the y-axis\nyAx = d3.axisLeft(yScale).ticks(options.yticks);\n\n// Rendering the x-axis\ngx = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.xFontSize);\n\n// Rendering the y-axis\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.yFontSize);\n\n// Removing the y axis line\ngx.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol);\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n \n\nsvg\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"g\")\n  .attr(\"fill\", options.fill)\n  .selectAll(\"rect\")\n  .data(bins)\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", (d) => xScale(d.x0) + 1)\n  .attr(\"width\", (d) => Math.max(0, xScale(d.x1) - xScale(d.x0) - 1))\n  .attr(\"y\", (d) => yScale(d.length))\n  .attr(\"height\", (d) => yScale(0) - yScale(d.length))\n  .attr(\"opacity\", options.opacity)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="animatedhistogram">
<code>animatedHistogram()</code><a class="anchor" aria-label="anchor" href="#animatedhistogram"></a>
</h2>
<p>This function allows you to create a one-click histogram animation.
Useful for presentation purposes. Click on the following empty plot and
see what happens:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/animatedHistogram.html">animatedHistogram</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">mpg</span><span class="op">$</span><span class="va">hwy</span>,</span>
<span>  duration <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  delay <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  fill <span class="op">=</span> <span class="st">"lime"</span>,</span>
<span>  stroke <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"white"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"data":["function (..., list = character(), package = NULL, lib.loc = NULL, ","    verbose = getOption(\"verbose\"), envir = .GlobalEnv, overwrite = TRUE) ","{","    fileExt <- function(x) {","        db <- grepl(\"\\\\.[^.]+\\\\.(gz|bz2|xz)$\", x)","        ans <- sub(\".*\\\\.\", \"\", x)","        ans[db] <- sub(\".*\\\\.([^.]+\\\\.)(gz|bz2|xz)$\", \"\\\\1\\\\2\", ","            x[db])","        ans","    }","    my_read_table <- function(...) {","        lcc <- Sys.getlocale(\"LC_COLLATE\")","        on.exit(Sys.setlocale(\"LC_COLLATE\", lcc))","        Sys.setlocale(\"LC_COLLATE\", \"C\")","        read.table(...)","    }","    stopifnot(is.character(list))","    names <- c(as.character(substitute(list(...))[-1L]), list)","    if (!is.null(package)) {","        if (!is.character(package)) ","            stop(\"'package' must be a character vector or NULL\")","    }","    paths <- find.package(package, lib.loc, verbose = verbose)","    if (is.null(lib.loc)) ","        paths <- c(path.package(package, TRUE), if (!length(package)) getwd(), ","            paths)","    paths <- unique(normalizePath(paths[file.exists(paths)]))","    paths <- paths[dir.exists(file.path(paths, \"data\"))]","    dataExts <- tools:::.make_file_exts(\"data\")","    if (length(names) == 0L) {","        db <- matrix(character(), nrow = 0L, ncol = 4L)","        for (path in paths) {","            entries <- NULL","            packageName <- if (file_test(\"-f\", file.path(path, ","                \"DESCRIPTION\"))) ","                basename(path)","            else \".\"","            if (file_test(\"-f\", INDEX <- file.path(path, \"Meta\", ","                \"data.rds\"))) {","                entries <- readRDS(INDEX)","            }","            else {","                dataDir <- file.path(path, \"data\")","                entries <- tools::list_files_with_type(dataDir, ","                  \"data\")","                if (length(entries)) {","                  entries <- unique(tools::file_path_sans_ext(basename(entries)))","                  entries <- cbind(entries, \"\")","                }","            }","            if (NROW(entries)) {","                if (is.matrix(entries) && ncol(entries) == 2L) ","                  db <- rbind(db, cbind(packageName, dirname(path), ","                    entries))","                else warning(gettextf(\"data index for package %s is invalid and will be ignored\", ","                  sQuote(packageName)), domain = NA, call. = FALSE)","            }","        }","        colnames(db) <- c(\"Package\", \"LibPath\", \"Item\", \"Title\")","        footer <- if (missing(package)) ","            paste0(\"Use \", sQuote(paste(\"data(package =\", \".packages(all.available = TRUE))\")), ","                \"\\n\", \"to list the data sets in all *available* packages.\")","        else NULL","        y <- list(title = \"Data sets\", header = NULL, results = db, ","            footer = footer)","        class(y) <- \"packageIQR\"","        return(y)","    }","    paths <- file.path(paths, \"data\")","    for (name in names) {","        found <- FALSE","        for (p in paths) {","            tmp_env <- if (overwrite) ","                envir","            else new.env()","            if (file_test(\"-f\", file.path(p, \"Rdata.rds\"))) {","                rds <- readRDS(file.path(p, \"Rdata.rds\"))","                if (name %in% names(rds)) {","                  found <- TRUE","                  if (verbose) ","                    message(sprintf(\"name=%s:\\t found in Rdata.rds\", ","                      name), domain = NA)","                  thispkg <- sub(\".*/([^/]*)/data$\", \"\\\\1\", p)","                  thispkg <- sub(\"_.*$\", \"\", thispkg)","                  thispkg <- paste0(\"package:\", thispkg)","                  objs <- rds[[name]]","                  lazyLoad(file.path(p, \"Rdata\"), envir = tmp_env, ","                    filter = function(x) x %in% objs)","                  break","                }","                else if (verbose) ","                  message(sprintf(\"name=%s:\\t NOT found in names() of Rdata.rds, i.e.,\\n\\t%s\\n\", ","                    name, paste(names(rds), collapse = \",\")), ","                    domain = NA)","            }","            if (file_test(\"-f\", file.path(p, \"Rdata.zip\"))) {","                warning(\"zipped data found for package \", sQuote(basename(dirname(p))), ","                  \".\\nThat is defunct, so please re-install the package.\", ","                  domain = NA)","                if (file_test(\"-f\", fp <- file.path(p, \"filelist\"))) ","                  files <- file.path(p, scan(fp, what = \"\", quiet = TRUE))","                else {","                  warning(gettextf(\"file 'filelist' is missing for directory %s\", ","                    sQuote(p)), domain = NA)","                  next","                }","            }","            else {","                files <- list.files(p, full.names = TRUE)","            }","            files <- files[grep(name, files, fixed = TRUE)]","            if (length(files) > 1L) {","                o <- match(fileExt(files), dataExts, nomatch = 100L)","                paths0 <- dirname(files)","                paths0 <- factor(paths0, levels = unique(paths0))","                files <- files[order(paths0, o)]","            }","            if (length(files)) {","                for (file in files) {","                  if (verbose) ","                    message(\"name=\", name, \":\\t file= ...\", .Platform$file.sep, ","                      basename(file), \"::\\t\", appendLF = FALSE, ","                      domain = NA)","                  ext <- fileExt(file)","                  if (basename(file) != paste0(name, \".\", ext)) ","                    found <- FALSE","                  else {","                    found <- TRUE","                    zfile <- file","                    zipname <- file.path(dirname(file), \"Rdata.zip\")","                    if (file.exists(zipname)) {","                      Rdatadir <- tempfile(\"Rdata\")","                      dir.create(Rdatadir, showWarnings = FALSE)","                      topic <- basename(file)","                      rc <- .External(C_unzip, zipname, topic, ","                        Rdatadir, FALSE, TRUE, FALSE, FALSE)","                      if (rc == 0L) ","                        zfile <- file.path(Rdatadir, topic)","                    }","                    if (zfile != file) ","                      on.exit(unlink(zfile))","                    switch(ext, R = , r = {","                      library(\"utils\")","                      sys.source(zfile, chdir = TRUE, envir = tmp_env)","                    }, RData = , rdata = , rda = load(zfile, ","                      envir = tmp_env), TXT = , txt = , tab = , ","                      tab.gz = , tab.bz2 = , tab.xz = , txt.gz = , ","                      txt.bz2 = , txt.xz = assign(name, my_read_table(zfile, ","                        header = TRUE, as.is = FALSE), envir = tmp_env), ","                      CSV = , csv = , csv.gz = , csv.bz2 = , ","                      csv.xz = assign(name, my_read_table(zfile, ","                        header = TRUE, sep = \";\", as.is = FALSE), ","                        envir = tmp_env), found <- FALSE)","                  }","                  if (found) ","                    break","                }","                if (verbose) ","                  message(if (!found) ","                    \"*NOT* \", \"found\", domain = NA)","            }","            if (found) ","                break","        }","        if (!found) {","            warning(gettextf(\"data set %s not found\", sQuote(name)), ","                domain = NA)","        }","        else if (!overwrite) {","            for (o in ls(envir = tmp_env, all.names = TRUE)) {","                if (exists(o, envir = envir, inherits = FALSE)) ","                  warning(gettextf(\"an object named %s already exists and will not be overwritten\", ","                    sQuote(o)))","                else assign(o, get(o, envir = tmp_env, inherits = FALSE), ","                  envir = envir)","            }","            rm(tmp_env)","        }","    }","    invisible(names)","}"],"type":"function","container":"svg","options":{"x":[29,29,31,30,26,26,27,26,25,28,27,25,25,25,25,24,25,23,20,15,20,17,17,26,23,26,25,24,19,14,15,17,27,30,26,29,26,24,24,22,22,24,24,17,22,21,23,23,19,18,17,17,19,19,12,17,15,17,17,12,17,16,18,15,16,12,17,17,16,12,15,16,17,15,17,17,18,17,19,17,19,19,17,17,17,16,16,17,15,17,26,25,26,24,21,22,23,22,20,33,32,32,29,32,34,36,36,29,26,27,30,31,26,26,28,26,29,28,27,24,24,24,22,19,20,17,12,19,18,14,15,18,18,15,17,16,18,17,19,19,17,29,27,31,32,27,26,26,25,25,17,17,20,18,26,26,27,28,25,25,24,27,25,26,23,26,26,26,26,25,27,25,27,20,20,19,17,20,17,29,27,31,31,26,26,28,27,29,31,31,26,26,27,30,33,35,37,35,15,18,20,20,22,17,19,18,20,29,26,29,29,24,44,29,26,29,29,29,29,23,24,44,41,29,26,28,29,29,29,28,29,26,26,26],"bins":30,"fill":"lime","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"white","strokeWidth":null,"width":null,"height":null,"xFontSize":10,"yFontSize":10,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"white","opacity":1,"axisCol":"black","duration":2000,"delay":100},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/animatedhistogram.js */\n// Setting the margin object\nlet margin = { top: 50, right: 50, bottom: 50, left: 50 };\n\nlet bins = d3.histogram().thresholds(options.bins)(options.x);\n\n// Setting the scaling of the x variable\nlet xScale = d3\n  .scaleLinear()\n  .domain([bins[0].x0, bins[bins.length - 1].x1])\n  .range([margin.left, width - margin.right]);\n\n// Setting the scaling of the y variable\nlet yScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(bins, (d) => d.length)])\n  .nice()\n  .range([height - margin.bottom, margin.top]);\n\n// Setting the x-axis\nxAx = d3.axisBottom(xScale).ticks(options.xticks);\n\n// Setting the y-axis\nyAx = d3.axisLeft(yScale).ticks(options.yticks);\n\n// Rendering the x-axis\ngx = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.xFontSize);\n\n// Rendering the y-axis\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.yFontSize);\n\n// Removing the y axis line\ngx.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol);\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n \n\nsvg\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"g\")\n  \n  \nsvg.on('click', function(){\n     d3.select(this)\n       .selectAll(\"rect\")\n       .data(bins)\n       .enter()\n       .append(\"rect\")\n       .attr(\"x\", (d) => xScale(d.x0) + 1)\n       .attr(\"width\", (d) => Math.max(0, xScale(d.x1) - xScale(d.x0) - 1))\n       .transition()\n       .duration(options.duration)\n       .delay((d, i) => i * options.delay)\n       .attr(\"y\", (d) => yScale(d.length))\n       .attr(\"height\", (d) => yScale(0) - yScale(d.length))\n       .attr(\"stroke\", options.stroke)\n       .attr(\"stroke-width\", options.strokeWidth)\n       .attr(\"fill\", options.fill)\n       .attr(\"opacity\", options.opacity)\n  })\n\n\n  \n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>Note that you can customize the animation using the two parameters
<code>duration</code> and <code>delay</code>.</p>
</div>
<div class="section level2">
<h2 id="flower">
<code>flower()</code><a class="anchor" aria-label="anchor" href="#flower"></a>
</h2>
<p>The <code><a href="../reference/flower.html">flower()</a></code> function allows you to plot a simple
flowers with a defined number of petals. You can also define the
width/length of the petals and rotate them if needed:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/flower.html">flower</a></span><span class="op">(</span></span>
<span>  petalCount <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  petalColor <span class="op">=</span> <span class="st">"plum"</span>,</span>
<span>  centerText <span class="op">=</span> <span class="st">"🌼"</span>,</span>
<span>  rotationSpeed <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"data":null,"type":"NULL","container":"svg","options":{"petalCount":7,"petalLength":100,"petalWidth":60,"petalColor":"plum","petalStroke":"deeppink","centerRadius":20,"centerColor":"gold","centerStroke":"darkorange","centerText":"🌼","centerTextSize":16,"centerTextColor":"black","font":"Verdana, Geneva, Tahoma, sans-serif","bgcol":"white","rotationSpeed":0,"width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/flower.js */\n// Center coordinates (no re-declaration of width/height)\nconst centerX = width / 2;\nconst centerY = height / 2;\n\n// Flower configuration from options\nconst petalCount = options.petalCount || 5;\nconst petalLength = options.petalLength || 100;\nconst petalWidth = options.petalWidth || 50;\nconst petalColor = options.petalColor || \"pink\";\nconst petalStroke = options.petalStroke || \"red\";\nconst centerColor = options.centerColor || \"yellow\";\nconst centerStroke = options.centerStroke || \"orange\";\nconst centerRadius = options.centerRadius || 20;\nconst bgcol = options.bgcol || \"white\";\nconst centerText = options.centerText || \"\";\n\n// Set background color\nsvg.style(\"background-color\", bgcol);\n\n// Petal group centered in the middle of the canvas\nconst petalGroup = svg.append(\"g\")\n  .attr(\"transform\", `translate(${centerX}, ${centerY})`);\n\n// Draw petals\nfor (let i = 0; i < petalCount; i++) {\n  const angle = (360 / petalCount) * i;\n\n  petalGroup.append(\"ellipse\")\n    .attr(\"cx\", 0)\n    .attr(\"cy\", -petalLength / 2)\n    .attr(\"rx\", petalWidth / 2)\n    .attr(\"ry\", petalLength / 2)\n    .attr(\"fill\", petalColor)\n    .attr(\"stroke\", petalStroke)\n    .attr(\"stroke-width\", 2)\n    .attr(\"transform\", `rotate(${angle})`);\n}\n\n// Draw flower center\nsvg.append(\"circle\")\n  .attr(\"cx\", centerX)\n  .attr(\"cy\", centerY)\n  .attr(\"r\", centerRadius)\n  .attr(\"fill\", centerColor)\n  .attr(\"stroke\", centerStroke)\n  .attr(\"stroke-width\", 2);\n\n\n\n// Add the text in the center\nsvg.append(\"text\")\n  .attr(\"x\", centerX)\n  .attr(\"y\", centerY)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dominant-baseline\", \"middle\")\n  .style(\"font-size\", options.centerTextSize || \"16px\")\n  .style(\"fill\", options.centerTextColor || \"black\")\n  .style(\"font-family\", options.font || \"sans-serif\")\n  .text(centerText);\n\nconst rotationSpeed = options.rotationSpeed || 0\n// Function to continuously rotate the petals around the center\nfunction rotatePetals(angle = 0) {\n  petalGroup\n    .attr(\"transform\", `translate(${centerX}, ${centerY}) rotate(${angle})`);\n\n  d3.timeout(() => {\n    rotatePetals((angle + rotationSpeed) % 360); // Adjust speed here\n  }, 20); // 50 frames per second\n}\n\n// Start rotating\nrotatePetals();\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/flower.html">flower</a></span><span class="op">(</span></span>
<span>  petalCount <span class="op">=</span> <span class="fl">15</span>,</span>
<span>  petalWidth <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  petalColor <span class="op">=</span> <span class="st">"plum"</span>,</span>
<span>  rotationSpeed <span class="op">=</span> <span class="fl">1.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-10b3b7155e8045a1b2ad" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"data":null,"type":"NULL","container":"svg","options":{"petalCount":15,"petalLength":100,"petalWidth":20,"petalColor":"plum","petalStroke":"deeppink","centerRadius":20,"centerColor":"gold","centerStroke":"darkorange","centerText":null,"centerTextSize":16,"centerTextColor":"black","font":"Verdana, Geneva, Tahoma, sans-serif","bgcol":"white","rotationSpeed":1.5,"width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/flower.js */\n// Center coordinates (no re-declaration of width/height)\nconst centerX = width / 2;\nconst centerY = height / 2;\n\n// Flower configuration from options\nconst petalCount = options.petalCount || 5;\nconst petalLength = options.petalLength || 100;\nconst petalWidth = options.petalWidth || 50;\nconst petalColor = options.petalColor || \"pink\";\nconst petalStroke = options.petalStroke || \"red\";\nconst centerColor = options.centerColor || \"yellow\";\nconst centerStroke = options.centerStroke || \"orange\";\nconst centerRadius = options.centerRadius || 20;\nconst bgcol = options.bgcol || \"white\";\nconst centerText = options.centerText || \"\";\n\n// Set background color\nsvg.style(\"background-color\", bgcol);\n\n// Petal group centered in the middle of the canvas\nconst petalGroup = svg.append(\"g\")\n  .attr(\"transform\", `translate(${centerX}, ${centerY})`);\n\n// Draw petals\nfor (let i = 0; i < petalCount; i++) {\n  const angle = (360 / petalCount) * i;\n\n  petalGroup.append(\"ellipse\")\n    .attr(\"cx\", 0)\n    .attr(\"cy\", -petalLength / 2)\n    .attr(\"rx\", petalWidth / 2)\n    .attr(\"ry\", petalLength / 2)\n    .attr(\"fill\", petalColor)\n    .attr(\"stroke\", petalStroke)\n    .attr(\"stroke-width\", 2)\n    .attr(\"transform\", `rotate(${angle})`);\n}\n\n// Draw flower center\nsvg.append(\"circle\")\n  .attr(\"cx\", centerX)\n  .attr(\"cy\", centerY)\n  .attr(\"r\", centerRadius)\n  .attr(\"fill\", centerColor)\n  .attr(\"stroke\", centerStroke)\n  .attr(\"stroke-width\", 2);\n\n\n\n// Add the text in the center\nsvg.append(\"text\")\n  .attr(\"x\", centerX)\n  .attr(\"y\", centerY)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dominant-baseline\", \"middle\")\n  .style(\"font-size\", options.centerTextSize || \"16px\")\n  .style(\"fill\", options.centerTextColor || \"black\")\n  .style(\"font-family\", options.font || \"sans-serif\")\n  .text(centerText);\n\nconst rotationSpeed = options.rotationSpeed || 0\n// Function to continuously rotate the petals around the center\nfunction rotatePetals(angle = 0) {\n  petalGroup\n    .attr(\"transform\", `translate(${centerX}, ${centerY}) rotate(${angle})`);\n\n  d3.timeout(() => {\n    rotatePetals((angle + rotationSpeed) % 360); // Adjust speed here\n  }, 20); // 50 frames per second\n}\n\n// Start rotating\nrotatePetals();\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="heart_fill">
<code>heart_fill</code><a class="anchor" aria-label="anchor" href="#heart_fill"></a>
</h2>
<p>The <code>heart_fill</code> function allows you to display a heart
indicator which will be filled according to a numerical value from 0 to
1:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/heart_fill.html">heart_fill</a></span><span class="op">(</span>fill_level <span class="op">=</span> <span class="fl">0.8</span>, titleText <span class="op">=</span> <span class="cn">NULL</span>, renderFillLabel <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-4018eef1a407a0df6b52" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-4018eef1a407a0df6b52">{"x":{"data":0.8,"type":"numeric","container":"svg","options":{"heartSize":150,"strokeColor":"#C00","strokeWidth":4,"fillColor":"red","renderFillLabel":false,"labelColor":"#333","labelFontSize":"16px","titleText":null,"titleColor":"#333","titleFontSize":"14px","font":"Verdana, Geneva, Tahoma, sans-serif"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/heart_fill.js */\nconst size = options.heartSize || 150;\nconst centerX = width / 2;\nconst centerY = height / 2;\n\n// Heart shape path\nconst heartPath = d3.path();\nheartPath.moveTo(centerX, centerY + size * 0.3);\nheartPath.bezierCurveTo(centerX + size / 2, centerY - size / 3,\n                        centerX + size, centerY + size / 2,\n                        centerX, centerY + size);\nheartPath.bezierCurveTo(centerX - size, centerY + size / 2,\n                        centerX - size / 2, centerY - size / 3,\n                        centerX, centerY + size * 0.3);\n\n// Define clip path\nsvg.append(\"defs\").append(\"clipPath\")\n  .attr(\"id\", \"heart-clip\")\n  .append(\"path\")\n  .attr(\"d\", heartPath.toString());\n\n// Group to apply transform for animation\nconst heartGroup = svg.append(\"g\")\n  .attr(\"transform\", `translate(0, 0)`);\n\n// Draw heart outline\nheartGroup.append(\"path\")\n  .attr(\"d\", heartPath.toString())\n  .attr(\"fill\", \"none\")\n  .attr(\"stroke\", options.strokeColor || \"#C00\")\n  .attr(\"stroke-width\", options.strokeWidth || 4);\n\n// Calculate fill\nconst fillHeight = size * data;\nconst fillY = centerY + size - fillHeight;\n\n// Draw filled area inside clip\nheartGroup.append(\"rect\")\n  .attr(\"x\", centerX - size)\n  .attr(\"y\", fillY)\n  .attr(\"width\", size * 2)\n  .attr(\"height\", fillHeight)\n  .attr(\"fill\", options.fillColor || \"red\")\n  .attr(\"clip-path\", \"url(#heart-clip)\");\n\n// Add label if enabled\nif (options.renderFillLabel) {\n  svg.append(\"text\")\n    .attr(\"x\", centerX)\n    .attr(\"y\", centerY - size * 0.01)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"fill\", options.labelColor || \"#333\")\n    .attr(\"font-size\", options.labelFontSize || \"16px\")\n    .attr(\"font-family\", options.font || \"sans-serif\")\n    .text(Math.round(data * 100) + \"% full\");\n}\n\n// Add hover wiggle animation\nheartGroup\n  .style(\"cursor\", \"pointer\")\n  .on(\"mouseover\", function () {\n    d3.select(this)\n      .transition()\n      .duration(100)\n      .attr(\"transform\", \"rotate(-3,\" + centerX + \",\" + centerY + \")\")\n      .transition()\n      .duration(100)\n      .attr(\"transform\", \"rotate(3,\" + centerX + \",\" + centerY + \")\")\n      .transition()\n      .duration(100)\n      .attr(\"transform\", \"rotate(-2,\" + centerX + \",\" + centerY + \")\")\n      .transition()\n      .duration(100)\n      .attr(\"transform\", \"rotate(2,\" + centerX + \",\" + centerY + \")\")\n      .transition()\n      .duration(100)\n      .attr(\"transform\", \"rotate(0,\" + centerX + \",\" + centerY + \")\");\n  });\n\nsvg.append(\"text\")\n  .attr(\"x\", centerX)\n  .attr(\"y\", centerY + size + 40)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"fill\", options.titleColor || \"#333\")\n  .attr(\"font-size\", options.titleFontSize || \"14px\")\n  .attr(\"font-family\", options.font)\n  .text(options.titleText);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="glass_fill">
<code>glass_fill</code><a class="anchor" aria-label="anchor" href="#glass_fill"></a>
</h2>
<p>The <code>glass_fill</code> function works the same way as the
<code>heart_fill</code> above:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/glass_fill.html">glass_fill</a></span><span class="op">(</span>fill_level <span class="op">=</span> <span class="fl">0.8</span>, titleText <span class="op">=</span> <span class="st">"Glass of water"</span>, renderFillLabel <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-5b1b2f4ad92281566982" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-5b1b2f4ad92281566982">{"x":{"data":0.8,"type":"numeric","container":"svg","options":{"glassWidth":80,"glassHeight":200,"strokeColor":"#555","strokeWidth":3,"fillColor":"skyblue","renderFillLabel":true,"labelColor":"#333","titleColor":"#333","titleFontSize":"14px","labelFontSize":"16px","titleText":"Glass of water","font":"Verdana, Geneva, Tahoma, sans-serif"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/glass_fill.js */\n// Glass dimensions\nconst glassWidth = options.glassWidth || 80;\nconst glassHeight = options.glassHeight || 200;\nconst glassX = (width - glassWidth) / 2;\nconst glassY = (height - glassHeight) / 2;\nconst strokeColor = options.strokeColor || \"#555\";\nconst strokeWidth = options.strokeWidth || 3;\nconst fillColor = options.fillColor || \"skyblue\";\nconst fontFamily = options.font || \"Verdana, Geneva, Tahoma, sans-serif\";\n\n// Group for animation\nconst glassGroup = svg.append(\"g\");\n\n// Draw left side of the glass\nglassGroup.append(\"line\")\n  .attr(\"x1\", glassX)\n  .attr(\"y1\", glassY)\n  .attr(\"x2\", glassX)\n  .attr(\"y2\", glassY + glassHeight)\n  .attr(\"stroke\", strokeColor)\n  .attr(\"stroke-width\", strokeWidth);\n\n// Draw right side of the glass\nglassGroup.append(\"line\")\n  .attr(\"x1\", glassX + glassWidth)\n  .attr(\"y1\", glassY)\n  .attr(\"x2\", glassX + glassWidth)\n  .attr(\"y2\", glassY + glassHeight)\n  .attr(\"stroke\", strokeColor)\n  .attr(\"stroke-width\", strokeWidth);\n\n// Draw bottom of the glass\nglassGroup.append(\"line\")\n  .attr(\"x1\", glassX)\n  .attr(\"y1\", glassY + glassHeight)\n  .attr(\"x2\", glassX + glassWidth)\n  .attr(\"y2\", glassY + glassHeight)\n  .attr(\"stroke\", strokeColor)\n  .attr(\"stroke-width\", strokeWidth);\n\n// Calculate water height and position\nconst waterHeight = glassHeight * data;\nconst waterY = glassY + glassHeight - waterHeight;\n\n// Draw water\nglassGroup.append(\"rect\")\n  .attr(\"x\", glassX)\n  .attr(\"y\", waterY)\n  .attr(\"width\", glassWidth)\n  .attr(\"height\", waterHeight)\n  .attr(\"fill\", fillColor)\n  .attr(\"rx\", 5);\n\n// Hover wiggle animation\nglassGroup\n  .style(\"cursor\", \"pointer\")\n  .on(\"mouseover\", function () {\n    d3.select(this)\n      .transition()\n      .duration(100)\n      .attr(\"transform\", `rotate(-2,${width / 2},${height / 2})`)\n      .transition()\n      .duration(100)\n      .attr(\"transform\", `rotate(2,${width / 2},${height / 2})`)\n      .transition()\n      .duration(100)\n      .attr(\"transform\", `rotate(-1,${width / 2},${height / 2})`)\n      .transition()\n      .duration(100)\n      .attr(\"transform\", `rotate(1,${width / 2},${height / 2})`)\n      .transition()\n      .duration(100)\n      .attr(\"transform\", `rotate(0,${width / 2},${height / 2})`);\n  });\n\n// Percentage label\nif (options.renderFillLabel) {\n  svg.append(\"text\")\n    .attr(\"x\", width / 2)\n    .attr(\"y\", glassY - 10)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"fill\", options.labelColor)\n    .attr(\"font-size\", options.labelFontSize)\n    .text(Math.round(data * 100) + \"% full\")\n    .style(\"font-family\", fontFamily);\n}\n\n// Title label\nsvg.append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", glassY + glassHeight + 50)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"fill\", options.titleColor)\n  .attr(\"font-size\", options.titleFontSize)\n  .text(options.titleText)\n  .style(\"font-family\", fontFamily);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="plant_growth">
<code>plant_growth</code><a class="anchor" aria-label="anchor" href="#plant_growth"></a>
</h2>
<p>The <code>plant_growth</code> function can also be used as a visual
clue:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plant_growth.html">plant_growth</a></span><span class="op">(</span><span class="fl">0.4</span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-25c3e940e6859592f801" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-25c3e940e6859592f801">{"x":{"data":0.4,"type":"numeric","container":"svg","options":{"potWidth":100,"potHeight":40,"plantMaxHeight":150,"stemColor":"#228B22","potColor":"#8B4513","strokeColor":"#333","strokeWidth":2,"renderFillLabel":true,"titleText":"Plant Growth","titleColor":"#333","titleFontSize":"14px","font":"sans-serif"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/plant_growth.js */\n\nconst potWidth = options.potWidth || 100;\nconst potHeight = options.potHeight || 40;\nconst plantMaxHeight = options.plantMaxHeight || 150;\nconst stemColor = options.stemColor || \"#228B22\";\nconst potColor = options.potColor || \"#8B4513\";\nconst flowerColor = options.flowerColor || \"#FF69B4\";\nconst strokeColor = options.strokeColor || \"#333\";\nconst strokeWidth = options.strokeWidth || 2;\nconst fontFamily = options.font || \"sans-serif\";\n\nconst centerX = width / 2;\nconst groundY = height / 2 + 50;\n\nconst plantGroup = svg.append(\"g\");\n\n// Draw pot\nplantGroup.append(\"rect\")\n  .attr(\"x\", centerX - potWidth / 2)\n  .attr(\"y\", groundY)\n  .attr(\"width\", potWidth)\n  .attr(\"height\", potHeight)\n  .attr(\"fill\", potColor)\n  .attr(\"stroke\", strokeColor)\n  .attr(\"stroke-width\", strokeWidth)\n  .attr(\"rx\", 10);\n\n// Draw stem\nconst stemHeight = plantMaxHeight * data;\nconst stemY = groundY - stemHeight;\n\nplantGroup.append(\"line\")\n  .attr(\"x1\", centerX)\n  .attr(\"y1\", groundY)\n  .attr(\"x2\", centerX)\n  .attr(\"y2\", stemY)\n  .attr(\"stroke\", stemColor)\n  .attr(\"stroke-width\", 6)\n  .attr(\"stroke-linecap\", \"round\");\n\n// Add leaves\nplantGroup.append(\"ellipse\")\n  .attr(\"cx\", centerX - 10)\n  .attr(\"cy\", stemY + 10)\n  .attr(\"rx\", 8)\n  .attr(\"ry\", 4)\n  .attr(\"fill\", stemColor)\n  .attr(\"transform\", `rotate(-25,${centerX - 10},${stemY + 10})`);\n\nplantGroup.append(\"ellipse\")\n  .attr(\"cx\", centerX + 10)\n  .attr(\"cy\", stemY + 15)\n  .attr(\"rx\", 8)\n  .attr(\"ry\", 4)\n  .attr(\"fill\", stemColor)\n  .attr(\"transform\", `rotate(25,${centerX + 10},${stemY + 15})`);\n\n// Add flowers based on growth level\nif (data > 0.5) {\n  const flowerSize = Math.max(0, 6 + 6 * (data - 0.8) * 5); // bloom size increases with growth\n\n  // Top flower\n  plantGroup.append(\"circle\")\n    .attr(\"cx\", centerX)\n    .attr(\"cy\", stemY - 8)\n    .attr(\"r\", flowerSize)\n    .attr(\"fill\", flowerColor);\n\n  // Leaf flowers\n  plantGroup.append(\"circle\")\n    .attr(\"cx\", centerX - 15)\n    .attr(\"cy\", stemY + 8)\n    .attr(\"r\", flowerSize * 0.6)\n    .attr(\"fill\", flowerColor);\n\n  plantGroup.append(\"circle\")\n    .attr(\"cx\", centerX + 15)\n    .attr(\"cy\", stemY + 12)\n    .attr(\"r\", flowerSize * 0.6)\n    .attr(\"fill\", flowerColor);\n}\n\n// Growth label\nif (options.renderFillLabel) {\n  svg.append(\"text\")\n    .attr(\"x\", centerX)\n    .attr(\"y\", stemY - 50)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"fill\", options.labelColor || \"#333\")\n    .attr(\"font-size\", options.labelFontSize || \"16px\")\n    .attr(\"font-family\", fontFamily)\n    .text(Math.round(data * 100) + \"% grown\");\n}\n\n// Title below pot\nsvg.append(\"text\")\n  .attr(\"x\", centerX)\n  .attr(\"y\", groundY + potHeight + 40)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"fill\", options.titleColor || \"#333\")\n  .attr(\"font-size\", options.titleFontSize || \"14px\")\n  .attr(\"font-family\", fontFamily)\n  .text(options.titleText || \"Plant Growth\");\n\n\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plant_growth.html">plant_growth</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-3f27c09be0c60bb52829" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-3f27c09be0c60bb52829">{"x":{"data":1,"type":"numeric","container":"svg","options":{"potWidth":100,"potHeight":40,"plantMaxHeight":150,"stemColor":"#228B22","potColor":"#8B4513","strokeColor":"#333","strokeWidth":2,"renderFillLabel":true,"titleText":"Plant Growth","titleColor":"#333","titleFontSize":"14px","font":"sans-serif"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/plant_growth.js */\n\nconst potWidth = options.potWidth || 100;\nconst potHeight = options.potHeight || 40;\nconst plantMaxHeight = options.plantMaxHeight || 150;\nconst stemColor = options.stemColor || \"#228B22\";\nconst potColor = options.potColor || \"#8B4513\";\nconst flowerColor = options.flowerColor || \"#FF69B4\";\nconst strokeColor = options.strokeColor || \"#333\";\nconst strokeWidth = options.strokeWidth || 2;\nconst fontFamily = options.font || \"sans-serif\";\n\nconst centerX = width / 2;\nconst groundY = height / 2 + 50;\n\nconst plantGroup = svg.append(\"g\");\n\n// Draw pot\nplantGroup.append(\"rect\")\n  .attr(\"x\", centerX - potWidth / 2)\n  .attr(\"y\", groundY)\n  .attr(\"width\", potWidth)\n  .attr(\"height\", potHeight)\n  .attr(\"fill\", potColor)\n  .attr(\"stroke\", strokeColor)\n  .attr(\"stroke-width\", strokeWidth)\n  .attr(\"rx\", 10);\n\n// Draw stem\nconst stemHeight = plantMaxHeight * data;\nconst stemY = groundY - stemHeight;\n\nplantGroup.append(\"line\")\n  .attr(\"x1\", centerX)\n  .attr(\"y1\", groundY)\n  .attr(\"x2\", centerX)\n  .attr(\"y2\", stemY)\n  .attr(\"stroke\", stemColor)\n  .attr(\"stroke-width\", 6)\n  .attr(\"stroke-linecap\", \"round\");\n\n// Add leaves\nplantGroup.append(\"ellipse\")\n  .attr(\"cx\", centerX - 10)\n  .attr(\"cy\", stemY + 10)\n  .attr(\"rx\", 8)\n  .attr(\"ry\", 4)\n  .attr(\"fill\", stemColor)\n  .attr(\"transform\", `rotate(-25,${centerX - 10},${stemY + 10})`);\n\nplantGroup.append(\"ellipse\")\n  .attr(\"cx\", centerX + 10)\n  .attr(\"cy\", stemY + 15)\n  .attr(\"rx\", 8)\n  .attr(\"ry\", 4)\n  .attr(\"fill\", stemColor)\n  .attr(\"transform\", `rotate(25,${centerX + 10},${stemY + 15})`);\n\n// Add flowers based on growth level\nif (data > 0.5) {\n  const flowerSize = Math.max(0, 6 + 6 * (data - 0.8) * 5); // bloom size increases with growth\n\n  // Top flower\n  plantGroup.append(\"circle\")\n    .attr(\"cx\", centerX)\n    .attr(\"cy\", stemY - 8)\n    .attr(\"r\", flowerSize)\n    .attr(\"fill\", flowerColor);\n\n  // Leaf flowers\n  plantGroup.append(\"circle\")\n    .attr(\"cx\", centerX - 15)\n    .attr(\"cy\", stemY + 8)\n    .attr(\"r\", flowerSize * 0.6)\n    .attr(\"fill\", flowerColor);\n\n  plantGroup.append(\"circle\")\n    .attr(\"cx\", centerX + 15)\n    .attr(\"cy\", stemY + 12)\n    .attr(\"r\", flowerSize * 0.6)\n    .attr(\"fill\", flowerColor);\n}\n\n// Growth label\nif (options.renderFillLabel) {\n  svg.append(\"text\")\n    .attr(\"x\", centerX)\n    .attr(\"y\", stemY - 50)\n    .attr(\"text-anchor\", \"middle\")\n    .attr(\"fill\", options.labelColor || \"#333\")\n    .attr(\"font-size\", options.labelFontSize || \"16px\")\n    .attr(\"font-family\", fontFamily)\n    .text(Math.round(data * 100) + \"% grown\");\n}\n\n// Title below pot\nsvg.append(\"text\")\n  .attr(\"x\", centerX)\n  .attr(\"y\", groundY + potHeight + 40)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"fill\", options.titleColor || \"#333\")\n  .attr(\"font-size\", options.titleFontSize || \"14px\")\n  .attr(\"font-family\", fontFamily)\n  .text(options.titleText || \"Plant Growth\");\n\n\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="flame">
<code>flame</code><a class="anchor" aria-label="anchor" href="#flame"></a>
</h2>
<p>You can create cool <code>flames</code> using the <code>flame</code>
function, useful if you want to display the state of a critical
information that yields a numerical values (for example, the number of
errors encountered in a specific process):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/flame.html">flame</a></span><span class="op">(</span></span>
<span>  intensity <span class="op">=</span> <span class="fl">20</span>, </span>
<span>  flameGradientColors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"yellow"</span>, <span class="st">"orange"</span>, <span class="st">"darkred"</span><span class="op">)</span>,</span>
<span>  flameOutline <span class="op">=</span> <span class="st">"darkred"</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"#fefefe"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-416566eb193bf50d04e6" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-416566eb193bf50d04e6">{"x":{"data":{"intensity":20},"type":"list","container":"svg","options":{"flameColor0":"yellow","flameColor1":"orange","flameColor2":"darkred","flameOutline":"darkred","bgcol":"#fefefe","width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/flame.js */\nconst centerX = width / 2;\nconst centerY = height * 0.95;\n\nconst flameColor0 = options.flameColor0 || \"white\";\nconst flameColor1 = options.flameColor1 || \"orange\";\nconst flameColor2 = options.flameColor2 || \"red\";\n\nconst flameOutline = options.flameOutline || \"darkred\";\nconst bgcol = options.bgcol || \"black\";\n\nconst rawIntensity = data.intensity || 1;\nconst minInput = 0.1, maxInput = 100;\nconst minScale = 0.2, maxScale = 2.5;\n\n// Map intensity to scale, no upper clamp; linear up to 100, then scale grows linearly beyond\nfunction mapIntensityToScale(intensity) {\n  if (intensity <= maxInput) {\n    return minScale + (intensity - minInput) * (maxScale - minScale) / (maxInput - minInput);\n  } else {\n    const extraScalePerUnit = 0.02;\n    return maxScale + (intensity - maxInput) * extraScalePerUnit;\n  }\n}\n\nconst baseScale = mapIntensityToScale(rawIntensity);\n\nsvg.style(\"background-color\", bgcol);\n\n// Define a radial gradient for the flame\nconst defs = svg.append(\"defs\");\n\nconst gradient = defs.append(\"radialGradient\")\n  .attr(\"id\", \"flameGradient\")\n  .attr(\"cx\", \"50%\")\n  .attr(\"cy\", \"50%\")\n  .attr(\"r\", \"50%\");\n\ngradient.append(\"stop\")\n  .attr(\"offset\", \"0%\")\n  .attr(\"stop-color\", flameColor0);\n\ngradient.append(\"stop\")\n  .attr(\"offset\", \"50%\")\n  .attr(\"stop-color\", flameColor1);\n\ngradient.append(\"stop\")\n  .attr(\"offset\", \"100%\")\n  .attr(\"stop-color\", flameColor2);\n\n// Generate a teardrop flame-like path string\nfunction flamePath(scale = 1, wobble = 0) {\n  const x = 30 * scale + wobble;\n  const y = 80 * scale;\n  const h = 150 * scale;\n  return `\n    M 0 0\n    Q ${x} ${-y}, 0 ${-h}\n    Q ${-x} ${-y}, 0 0\n    Z\n  `;\n}\n\n// Flame group\nconst flameGroup = svg.append(\"g\")\n  .attr(\"transform\", `translate(${centerX}, ${centerY})`);\n\n// Append flame path\nconst flame = flameGroup.append(\"path\")\n  .attr(\"d\", flamePath(baseScale))\n  .attr(\"fill\", \"url(#flameGradient)\")\n  .attr(\"stroke\", flameOutline)\n  .attr(\"stroke-width\", 2)\n  .attr(\"opacity\", 0.9);\n\nfunction randomizeColor(color) {\n  const c = d3.color(color);\n  if (!c) return color;\n  const factor = 0.85 + 0.3 * Math.random();\n  c.r = Math.min(255, c.r * factor);\n  c.g = Math.min(255, c.g * factor);\n  c.b = Math.min(255, c.b * factor);\n  return c.formatRgb();\n}\n\nfunction animateFlame() {\n  const scale = baseScale * (0.9 + 0.15 * Math.random());\n  const wobble = (Math.random() - 0.5) * 20;\n\n  gradient.select(\"stop[offset='0%']\")\n    .attr(\"stop-color\", randomizeColor(flameColor0));\n\n  gradient.select(\"stop[offset='50%']\")\n    .attr(\"stop-color\", randomizeColor(flameColor1));\n\n  gradient.select(\"stop[offset='100%']\")\n    .attr(\"stop-color\", randomizeColor(flameColor2));\n\n  flame\n    .transition()\n    .duration(100)\n    .attr(\"d\", flamePath(scale, wobble))\n    .on(\"end\", animateFlame);\n}\n\nanimateFlame();\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/flame.html">flame</a></span><span class="op">(</span></span>
<span>  intensity <span class="op">=</span> <span class="fl">80</span>, </span>
<span>  flameGradientColors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"green"</span>, <span class="st">"darkgreen"</span>, <span class="st">"darkblue"</span><span class="op">)</span>,</span>
<span>  flameOutline <span class="op">=</span> <span class="st">"#fefefe"</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"black"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-72cbf064100ce560a04c" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-72cbf064100ce560a04c">{"x":{"data":{"intensity":80},"type":"list","container":"svg","options":{"flameColor0":"green","flameColor1":"darkgreen","flameColor2":"darkblue","flameOutline":"#fefefe","bgcol":"black","width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/flame.js */\nconst centerX = width / 2;\nconst centerY = height * 0.95;\n\nconst flameColor0 = options.flameColor0 || \"white\";\nconst flameColor1 = options.flameColor1 || \"orange\";\nconst flameColor2 = options.flameColor2 || \"red\";\n\nconst flameOutline = options.flameOutline || \"darkred\";\nconst bgcol = options.bgcol || \"black\";\n\nconst rawIntensity = data.intensity || 1;\nconst minInput = 0.1, maxInput = 100;\nconst minScale = 0.2, maxScale = 2.5;\n\n// Map intensity to scale, no upper clamp; linear up to 100, then scale grows linearly beyond\nfunction mapIntensityToScale(intensity) {\n  if (intensity <= maxInput) {\n    return minScale + (intensity - minInput) * (maxScale - minScale) / (maxInput - minInput);\n  } else {\n    const extraScalePerUnit = 0.02;\n    return maxScale + (intensity - maxInput) * extraScalePerUnit;\n  }\n}\n\nconst baseScale = mapIntensityToScale(rawIntensity);\n\nsvg.style(\"background-color\", bgcol);\n\n// Define a radial gradient for the flame\nconst defs = svg.append(\"defs\");\n\nconst gradient = defs.append(\"radialGradient\")\n  .attr(\"id\", \"flameGradient\")\n  .attr(\"cx\", \"50%\")\n  .attr(\"cy\", \"50%\")\n  .attr(\"r\", \"50%\");\n\ngradient.append(\"stop\")\n  .attr(\"offset\", \"0%\")\n  .attr(\"stop-color\", flameColor0);\n\ngradient.append(\"stop\")\n  .attr(\"offset\", \"50%\")\n  .attr(\"stop-color\", flameColor1);\n\ngradient.append(\"stop\")\n  .attr(\"offset\", \"100%\")\n  .attr(\"stop-color\", flameColor2);\n\n// Generate a teardrop flame-like path string\nfunction flamePath(scale = 1, wobble = 0) {\n  const x = 30 * scale + wobble;\n  const y = 80 * scale;\n  const h = 150 * scale;\n  return `\n    M 0 0\n    Q ${x} ${-y}, 0 ${-h}\n    Q ${-x} ${-y}, 0 0\n    Z\n  `;\n}\n\n// Flame group\nconst flameGroup = svg.append(\"g\")\n  .attr(\"transform\", `translate(${centerX}, ${centerY})`);\n\n// Append flame path\nconst flame = flameGroup.append(\"path\")\n  .attr(\"d\", flamePath(baseScale))\n  .attr(\"fill\", \"url(#flameGradient)\")\n  .attr(\"stroke\", flameOutline)\n  .attr(\"stroke-width\", 2)\n  .attr(\"opacity\", 0.9);\n\nfunction randomizeColor(color) {\n  const c = d3.color(color);\n  if (!c) return color;\n  const factor = 0.85 + 0.3 * Math.random();\n  c.r = Math.min(255, c.r * factor);\n  c.g = Math.min(255, c.g * factor);\n  c.b = Math.min(255, c.b * factor);\n  return c.formatRgb();\n}\n\nfunction animateFlame() {\n  const scale = baseScale * (0.9 + 0.15 * Math.random());\n  const wobble = (Math.random() - 0.5) * 20;\n\n  gradient.select(\"stop[offset='0%']\")\n    .attr(\"stop-color\", randomizeColor(flameColor0));\n\n  gradient.select(\"stop[offset='50%']\")\n    .attr(\"stop-color\", randomizeColor(flameColor1));\n\n  gradient.select(\"stop[offset='100%']\")\n    .attr(\"stop-color\", randomizeColor(flameColor2));\n\n  flame\n    .transition()\n    .duration(100)\n    .attr(\"d\", flamePath(scale, wobble))\n    .on(\"end\", animateFlame);\n}\n\nanimateFlame();\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="parliament_chart">
<code>parliament_chart()</code><a class="anchor" aria-label="anchor" href="#parliament_chart"></a>
</h2>
<p>You can easily create a <code>Parliamant chart</code> using the
<code>parliamant_chart()</code> function, consider the following
example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># The data is a toy example and does not reflect the reality</span></span>
<span><span class="va">vote_results_germany</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    political_party <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SDP"</span>, <span class="st">"CDU"</span>, <span class="st">"Linke"</span>, <span class="st">"Grüne"</span><span class="op">)</span>,</span>
<span>    number_of_seats <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">40</span>, <span class="fl">30</span>, <span class="fl">20</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/parliament_chart.html">parliament_chart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">vote_results_germany</span>,</span>
<span>  categorical_column <span class="op">=</span> <span class="st">"political_party"</span>,</span>
<span>  numerical_column <span class="op">=</span> <span class="st">"number_of_seats"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"German Bundestag"</span>,</span>
<span>  seatSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"#fefefe"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-d11fc4360aa0230696d7" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-d11fc4360aa0230696d7">{"x":{"data":{"political_party":["SDP","CDU","Linke","Grüne"],"number_of_seats":[200,40,30,20]},"type":"data.frame","container":"svg","options":{"seatSize":10,"padding":2,"maxRows":null,"title":"German Bundestag","titleFontSize":22,"font":"Verdana, Geneva, Tahoma, sans-serif","bgcol":"#fefefe","width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/parliamant_chart.js */\nconst centerX = width / 2;\nconst centerY = height / 2;\n\nconst seatSize = options.seatSize || 6;\nconst padding = options.padding || 2;\nconst fontFamily = options.font || \"Verdana, Geneva, Tahoma, sans-serif\";\nconst innerRadiusRatio = 0.3;\nconst bgColor = options.bgcol || \"#CAD0D3\";\nconst title = options.title || \"\";\nconst titleFontSize = options.titleFontSize || 22;\nconst legendX = options.legendX || (width - 150);\nconst legendY = options.legendY || 20;\n\nsvg.style(\"background-color\", bgColor);\n\nconst seats = [];\ndata.forEach(d => {\n  for (let i = 0; i < d.number_of_seats; i++) {\n    seats.push({ political_party: d.political_party });\n  }\n});\n\nconst color = d3.scaleOrdinal()\n  .domain(data.map(d => d.political_party))\n  .range(d3.schemeCategory10);\n\nfunction estimateOptimalRows(seats, width, height) {\n  const outerR = Math.min(width, height) / 2 - 40;\n  for (let rows = 4; rows <= 30; rows++) {\n    const layout = computeLayout(seats, rows, outerR, innerRadiusRatio);\n    if (layout.length >= seats.length) return rows;\n  }\n  return 30;\n}\n\nfunction computeLayout(seats, rows, outerR, innerRatio) {\n  const innerR = outerR * innerRatio;\n  let layout = [];\n  let index = 0;\n\n  for (let row = 0; row < rows; row++) {\n    const r = outerR - ((outerR - innerR) / (rows - 1)) * row;\n    const seatsInRow = Math.floor(Math.PI * r / (seatSize + padding));\n    for (let i = 0; i < seatsInRow && index < seats.length; i++) {\n      const angle = Math.PI * (i / (seatsInRow - 1));\n      layout.push({\n        x: centerX - r * Math.cos(angle),\n        y: centerY - r * Math.sin(angle),\n        political_party: seats[index].political_party\n      });\n      index++;\n    }\n  }\n  return layout;\n}\n\nconst maxR = Math.min(width, height) / 2 - 40;\nconst rows = options.maxRows || estimateOptimalRows(seats, width, height);\nconst seatPositions = computeLayout(seats, rows, maxR, innerRadiusRatio);\n\nconst tooltip = d3.select(\"body\")\n  .append(\"div\")\n  .attr(\"class\", \"parliament-tooltip\")\n  .style(\"position\", \"absolute\")\n  .style(\"padding\", \"6px 10px\")\n  .style(\"background\", \"white\")\n  .style(\"border\", \"1px solid #ccc\")\n  .style(\"border-radius\", \"4px\")\n  .style(\"font-family\", fontFamily)\n  .style(\"font-size\", \"12px\")\n  .style(\"pointer-events\", \"none\")\n  .style(\"opacity\", 0);\n\nsvg.selectAll(\"circle\")\n  .data(seatPositions)\n  .enter()\n  .append(\"circle\")\n  .attr(\"cx\", d => d.x)\n  .attr(\"cy\", d => d.y)\n  .attr(\"r\", seatSize / 2)\n  .attr(\"fill\", d => color(d.political_party))\n  .attr(\"stroke\", \"#444\")\n  .attr(\"stroke-width\", 0.4)\n  .on(\"mouseover\", function (event, d) {\n    tooltip.transition().duration(200).style(\"opacity\", 1);\n    tooltip.html(`${d.political_party}`);\n  })\n  .on(\"mousemove\", function (event) {\n    tooltip\n      .style(\"left\", (event.pageX + 10) + \"px\")\n      .style(\"top\", (event.pageY - 28) + \"px\");\n  })\n  .on(\"mouseout\", function () {\n    tooltip.transition().duration(200).style(\"opacity\", 0);\n  });\n\nconst legend = svg.append(\"g\")\n  .attr(\"transform\", `translate(${legendX}, ${legendY})`);\n\ndata.forEach((d, i) => {\n  const g = legend.append(\"g\").attr(\"transform\", `translate(0, ${i * 20})`);\n  g.append(\"rect\")\n    .attr(\"width\", 12)\n    .attr(\"height\", 12)\n    .attr(\"fill\", color(d.political_party));\n  g.append(\"text\")\n    .attr(\"x\", 16)\n    .attr(\"y\", 10)\n    .attr(\"fill\", \"#333\")\n    .style(\"font-family\", fontFamily)\n    .style(\"font-size\", \"12px\")\n    .text(d.political_party);\n});\n\nif (title) {\n  svg.append(\"text\")\n    .attr(\"x\", centerX)\n    .attr(\"y\", height - 100)\n    .attr(\"text-anchor\", \"middle\")\n    .style(\"font-family\", fontFamily)\n    .style(\"font-size\", `${titleFontSize}px`)\n    .style(\"fill\", \"#111\")\n    .text(title);\n}\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="barchart">
<code>barChart()</code><a class="anchor" aria-label="anchor" href="#barchart"></a>
</h2>
<p>The <code>barChat()</code> function allows you to create bar charts
however you need to make the aggregation beforehand. In the following
example, we will plot the average <code>cty</code> for each
<code>manufacturer</code> using the <code>dplyr</code> package.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">manufacturer</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_cty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/barChart.html">barChart</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"manufacturer"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"mean_cty"</span>,</span>
<span>    xFontSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    yFontSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    strokeWidth <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    ytitle <span class="op">=</span> <span class="st">"average cty value"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Average City Miles per Gallon by manufacturer"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-21c7483268bafca56cec" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-21c7483268bafca56cec">{"x":{"data":{"manufacturer":["audi","chevrolet","dodge","ford","honda","hyundai","jeep","land rover","lincoln","mercury","nissan","pontiac","subaru","toyota","volkswagen"],"mean_cty":[17.61111111111111,15,13.13513513513514,14,24.44444444444444,18.64285714285714,13.5,11.5,11.33333333333333,13.25,18.07692307692308,17,19.28571428571428,18.52941176470588,20.92592592592593]},"type":"data.frame","container":"svg","options":{"x":"manufacturer","y":"mean_cty","fill":"orange","sort":"none","paddingWidth":0.1,"xticks":null,"yticks":null,"xtitle":null,"ytitle":"average cty value","title":"Average City Miles per Gallon by manufacturer","font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"crimson","strokeWidth":2,"width":null,"height":null,"xFontSize":10,"yFontSize":10,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/barchart.js */\n// Setting the margin object\nlet margin = { top: 50, right: 50, bottom: 50, left: 50 };\n\n// Sorting the data\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.y], b[options.y]);\n  } else {\n    return d3.descending(a[options.y], b[options.y]);\n  }\n});\n\n// Setting the scaling of the x variable\nlet xScale = d3\n  .scaleBand()\n  .domain(d3.range(data.length))\n  .range([margin.left, width - margin.right])\n  .padding(options.paddingWidth);\n\n// Setting the scaling of the y variable\nlet yScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.y])])\n  .range([height - margin.bottom, margin.top]);\n\n// Setting the x-axis\nxAx = d3\n  .axisBottom(xScale)\n  .ticks(options.xticks)\n  .tickFormat((i) => data[i][options.x]);\n\n// Setting the y-axis\nyAx = d3.axisLeft(yScale).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.xFontSize);\n\n// Rendering the y-axis\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.yFontSize);\n\n// Removing the y axis line\ngy.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the bar chart\nsvg\n  .style(\"background-color\", options.bgcol)\n  .attr(\"viewBox\", [0, 0, width, height])\n  .selectAll(\"rect\")\n  .data(data)\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", (d, i) => xScale(i))\n  .attr(\"y\", (d) => yScale(d[options.y]))\n  .attr(\"width\", xScale.bandwidth())\n  .attr(\"height\", (d) => yScale(0) - yScale(d[options.y]))\n  .attr(\"fill\", options.fill)\n  .attr(\"opacity\", options.opacity)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>The bars can be easily sorted in <code>ascending</code> or
<code>descending</code> order using the <code>sort</code> parameter:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">manufacturer</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_cty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/barChart.html">barChart</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"manufacturer"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"mean_cty"</span>,</span>
<span>    sort <span class="op">=</span> <span class="st">"ascending"</span>,</span>
<span>    xFontSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    yFontSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    strokeWidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    ytitle <span class="op">=</span> <span class="st">"average cty value"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Average City Miles per Gallon by manufacturer"</span>,</span>
<span>    titleFontSize <span class="op">=</span> <span class="fl">16</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-1834a22cd196f3aa03a1" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-1834a22cd196f3aa03a1">{"x":{"data":{"manufacturer":["audi","chevrolet","dodge","ford","honda","hyundai","jeep","land rover","lincoln","mercury","nissan","pontiac","subaru","toyota","volkswagen"],"mean_cty":[17.61111111111111,15,13.13513513513514,14,24.44444444444444,18.64285714285714,13.5,11.5,11.33333333333333,13.25,18.07692307692308,17,19.28571428571428,18.52941176470588,20.92592592592593]},"type":"data.frame","container":"svg","options":{"x":"manufacturer","y":"mean_cty","fill":"orange","sort":"ascending","paddingWidth":0.1,"xticks":null,"yticks":null,"xtitle":null,"ytitle":"average cty value","title":"Average City Miles per Gallon by manufacturer","font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"crimson","strokeWidth":1,"width":null,"height":null,"xFontSize":10,"yFontSize":10,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":16,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/barchart.js */\n// Setting the margin object\nlet margin = { top: 50, right: 50, bottom: 50, left: 50 };\n\n// Sorting the data\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.y], b[options.y]);\n  } else {\n    return d3.descending(a[options.y], b[options.y]);\n  }\n});\n\n// Setting the scaling of the x variable\nlet xScale = d3\n  .scaleBand()\n  .domain(d3.range(data.length))\n  .range([margin.left, width - margin.right])\n  .padding(options.paddingWidth);\n\n// Setting the scaling of the y variable\nlet yScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.y])])\n  .range([height - margin.bottom, margin.top]);\n\n// Setting the x-axis\nxAx = d3\n  .axisBottom(xScale)\n  .ticks(options.xticks)\n  .tickFormat((i) => data[i][options.x]);\n\n// Setting the y-axis\nyAx = d3.axisLeft(yScale).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.xFontSize);\n\n// Rendering the y-axis\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.yFontSize);\n\n// Removing the y axis line\ngy.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the bar chart\nsvg\n  .style(\"background-color\", options.bgcol)\n  .attr(\"viewBox\", [0, 0, width, height])\n  .selectAll(\"rect\")\n  .data(data)\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", (d, i) => xScale(i))\n  .attr(\"y\", (d) => yScale(d[options.y]))\n  .attr(\"width\", xScale.bandwidth())\n  .attr(\"height\", (d) => yScale(0) - yScale(d[options.y]))\n  .attr(\"fill\", options.fill)\n  .attr(\"opacity\", options.opacity)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="horzbarchart">
<code>horzBarChart()</code><a class="anchor" aria-label="anchor" href="#horzbarchart"></a>
</h2>
<p>If you’ve many categories, it might be a good idea to go for a
horizontal bar chart. It has the same parameters as the
<code><a href="../reference/barChart.html">barChart()</a></code> function except that the x-axis parameter is
named <code>value</code> and the y-axis parameter named
<code>label</code>, this naming convention aims to mitigate some
confusion that can arise.</p>
<p>If we want to replicate the above graphic in a horizontal way, we can
do:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">manufacturer</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_cty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/horzBarChart.html">horzBarChart</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"manufacturer"</span>,</span>
<span>    value <span class="op">=</span> <span class="st">"mean_cty"</span>,</span>
<span>    sort <span class="op">=</span> <span class="st">"ascending"</span>,</span>
<span>    labelFontSize  <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    valueFontSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    stroke <span class="op">=</span> <span class="st">"crimson"</span>,</span>
<span>    strokeWidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    valueTitle  <span class="op">=</span> <span class="st">"average cty value"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Average City Miles per Gallon by manufacturer"</span>,</span>
<span>    titleFontSize <span class="op">=</span> <span class="fl">16</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-28515d92cb327f90c9eb" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-28515d92cb327f90c9eb">{"x":{"data":{"manufacturer":["audi","chevrolet","dodge","ford","honda","hyundai","jeep","land rover","lincoln","mercury","nissan","pontiac","subaru","toyota","volkswagen"],"mean_cty":[17.61111111111111,15,13.13513513513514,14,24.44444444444444,18.64285714285714,13.5,11.5,11.33333333333333,13.25,18.07692307692308,17,19.28571428571428,18.52941176470588,20.92592592592593]},"type":"data.frame","container":"svg","options":{"value":"mean_cty","label":"manufacturer","fill":"orange","paddingWidth":0.1,"valueTicks":null,"valueFontSize":10,"labelFontSize":10,"valueTitle":"average cty value","valueTitleFontSize":14,"labelTitle":null,"labelTitleFontSize":14,"font":"Verdana, Geneva, Tahoma, sans-serif","title":"Average City Miles per Gallon by manufacturer","titleFontSize":16,"stroke":"crimson","strokeWidth":1,"opacity":1,"width":null,"height":null,"sort":"ascending","bgcol":"#CAD0D3","axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/horzbarchart.js */\nlet margin = {\n  top: 50,\n  right: 10,\n  bottom: 50,\n  left: 100,\n};\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.value], b[options.value]);\n  } else {\n    return d3.descending(a[options.value], b[options.value]);\n  }\n});\n\nlet x = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.value])])\n  .range([margin.left, width - margin.right]);\n\nlet y = d3\n  .scaleBand()\n  .domain(d3.range(data.length))\n  .rangeRound([margin.top, height - margin.bottom])\n  .padding(options.paddingWidth);\n\nlet xAxis = (g) =>\n  g\n    .attr(\"transform\", `translate(0, ${height - margin.bottom})`)\n    .call(d3.axisBottom(x).ticks(options.valueTicks))\n    .call((g) => g.select(\".domain\").remove());\n\nlet yAxis = (g) =>\n  g\n    .attr(\"transform\", `translate(${margin.left}, 0)`)\n    .call(d3.axisLeft(y).tickFormat((i) => data[i][options.label]));\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol);\n\n\nsvg\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"g\")\n  .attr(\"fill\", options.fill)\n  .selectAll(\"rect\")\n  .data(data)\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", x(0))\n  .attr(\"y\", (d, i) => y(i))\n  .attr(\"width\", (d) => x(d[options.value]) - x(0))\n  .attr(\"height\", y.bandwidth())\n  .attr(\"opacity\", options.opacity)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth);\n\nsvg.append(\"g\").call(xAxis).attr(\"font-size\", options.valueFontSize);\n\nsvg\n  .append(\"g\")\n  .call(yAxis)\n  .attr(\"font-size\", options.labelFontSize)\n  .style(\"font-family\", options.font);\n\n// rendering the x-axis title\n\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 3) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.valueTitleFontSize)\n  .text(options.valueTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.labelTitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.labelTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>As in <code><a href="../reference/barChart.html">barChart()</a></code>, we can aslo sort in descending
order:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">manufacturer</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>mean_cty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/horzBarChart.html">horzBarChart</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"manufacturer"</span>,</span>
<span>    value <span class="op">=</span> <span class="st">"mean_cty"</span>,</span>
<span>    sort <span class="op">=</span> <span class="st">"descending"</span>,</span>
<span>    labelFontSize  <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    valueFontSize <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    bgcol <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>    axisCol <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    stroke <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>    strokeWidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    valueTitle  <span class="op">=</span> <span class="st">"average cty value"</span>,</span>
<span>    labelTitle <span class="op">=</span> <span class="st">"Manufacturers"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Average City Miles per Gallon by manufacturer"</span>,</span>
<span>    titleFontSize <span class="op">=</span> <span class="fl">16</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-0caf26d4e3c00206b0c5" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-0caf26d4e3c00206b0c5">{"x":{"data":{"manufacturer":["audi","chevrolet","dodge","ford","honda","hyundai","jeep","land rover","lincoln","mercury","nissan","pontiac","subaru","toyota","volkswagen"],"mean_cty":[17.61111111111111,15,13.13513513513514,14,24.44444444444444,18.64285714285714,13.5,11.5,11.33333333333333,13.25,18.07692307692308,17,19.28571428571428,18.52941176470588,20.92592592592593]},"type":"data.frame","container":"svg","options":{"value":"mean_cty","label":"manufacturer","fill":"white","paddingWidth":0.1,"valueTicks":null,"valueFontSize":10,"labelFontSize":10,"valueTitle":"average cty value","valueTitleFontSize":14,"labelTitle":"Manufacturers","labelTitleFontSize":14,"font":"Verdana, Geneva, Tahoma, sans-serif","title":"Average City Miles per Gallon by manufacturer","titleFontSize":16,"stroke":"white","strokeWidth":1,"opacity":1,"width":null,"height":null,"sort":"descending","bgcol":"black","axisCol":"white"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/horzbarchart.js */\nlet margin = {\n  top: 50,\n  right: 10,\n  bottom: 50,\n  left: 100,\n};\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.value], b[options.value]);\n  } else {\n    return d3.descending(a[options.value], b[options.value]);\n  }\n});\n\nlet x = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.value])])\n  .range([margin.left, width - margin.right]);\n\nlet y = d3\n  .scaleBand()\n  .domain(d3.range(data.length))\n  .rangeRound([margin.top, height - margin.bottom])\n  .padding(options.paddingWidth);\n\nlet xAxis = (g) =>\n  g\n    .attr(\"transform\", `translate(0, ${height - margin.bottom})`)\n    .call(d3.axisBottom(x).ticks(options.valueTicks))\n    .call((g) => g.select(\".domain\").remove());\n\nlet yAxis = (g) =>\n  g\n    .attr(\"transform\", `translate(${margin.left}, 0)`)\n    .call(d3.axisLeft(y).tickFormat((i) => data[i][options.label]));\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol);\n\n\nsvg\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"g\")\n  .attr(\"fill\", options.fill)\n  .selectAll(\"rect\")\n  .data(data)\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", x(0))\n  .attr(\"y\", (d, i) => y(i))\n  .attr(\"width\", (d) => x(d[options.value]) - x(0))\n  .attr(\"height\", y.bandwidth())\n  .attr(\"opacity\", options.opacity)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth);\n\nsvg.append(\"g\").call(xAxis).attr(\"font-size\", options.valueFontSize);\n\nsvg\n  .append(\"g\")\n  .call(yAxis)\n  .attr(\"font-size\", options.labelFontSize)\n  .style(\"font-family\", options.font);\n\n// rendering the x-axis title\n\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 3) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.valueTitleFontSize)\n  .text(options.valueTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.labelTitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.labelTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="lollipopchart">
<code>lollipopChart()</code><a class="anchor" aria-label="anchor" href="#lollipopchart"></a>
</h2>
<p>lollipop chart follows the same behavior as bar charts but instead of
bars you get lollipops, hence the name. Below an example of a lollipop
chart with <code>ddplot</code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">drv</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>median_cty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/lollipopChart.html">lollipopChart</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"drv"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"median_cty"</span>,</span>
<span>    sort <span class="op">=</span> <span class="st">"ascending"</span>,</span>
<span>    xtitle <span class="op">=</span> <span class="st">"drv variable"</span>,</span>
<span>    ytitle <span class="op">=</span> <span class="st">"median cty"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Median cty per drv"</span>,</span>
<span>    xFontSize <span class="op">=</span> <span class="fl">20</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-da0b268a2927f570ebf3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-da0b268a2927f570ebf3">{"x":{"data":{"drv":["4","f","r"],"median_cty":[14,19,15]},"type":"data.frame","container":"svg","options":{"x":"drv","y":"median_cty","sort":"ascending","bgcol":"white","xticks":null,"yticks":null,"xFontSize":20,"yFontSize":12,"font":"Verdana, Geneva, Tahoma, sans-serif","xtitle":"drv variable","xtitleFontSize":14,"ytitle":"median cty","ytitleFontSize":14,"title":"Median cty per drv","titleFontSize":20,"lineStroke":"maroon","lineStrokeWidth":4,"circleStroke":"lime","circleStrokeWidth":1,"circleFill":"lime","circleRadius":10,"axisCol":"black","width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/lollipopchart.js */\n// Setting the margin object\nlet margin = { top: 50, right: 50, bottom: 50, left: 50 };\n\n// Sorting the data\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.y], b[options.y]);\n  } else {\n    return d3.descending(a[options.y], b[options.y]);\n  }\n});\n\n// Setting the scaling of the x variable\nlet xScale = d3\n  .scaleBand()\n  .domain(\n    data.map(function (d) {\n      return d[options.x];\n    })\n  )\n  .range([margin.left, width - margin.right])\n  .padding(1);\n\n// Setting the scaling of the y variable\nlet yScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.y])])\n  .range([height - margin.bottom, margin.top]);\n\n// Setting the x-axis\nxAx = d3.axisBottom(xScale).ticks(options.xticks);\n\n// Setting the y-axis\nyAx = d3.axisLeft(yScale).ticks(options.yticks);\n\n// Rendering the x-axis\ngx = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.xFontSize);\n\n// Rendering the y-axis\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.yFontSize);\n\n// Removing the y and x axis line\ngx.call((g) => g.selectAll(\"line\").remove());\ngy.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 1) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the lines\n\nsvg.style(\"background-color\", options.bgcol);\n\nsvg\n  .selectAll(\"myline\")\n  .data(data)\n  .enter()\n  .append(\"line\")\n  .attr(\"x1\", (d) => xScale(d[options.x]))\n  .attr(\"y1\", (d) => yScale(d[options.y]))\n  .attr(\"x2\", (d) => xScale(d[options.x]))\n  .attr(\"y2\", yScale(0))\n  .attr(\"stroke\", options.lineStroke)\n  .attr(\"stroke-width\", options.lineStrokeWidth);\n\n// Rendering the circles\nsvg\n  .selectAll(\"mycircle\")\n  .data(data)\n  .enter()\n  .append(\"circle\")\n  .attr(\"cx\", (d) => xScale(d[options.x]))\n  .attr(\"cy\", (d) => yScale(d[options.y]))\n  .attr(\"r\", options.circleRadius)\n  .style(\"fill\", options.circleFill)\n  .attr(\"stroke\", options.circleStroke)\n  .attr(\"stroke-width\", options.circleStrokeWidth);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>It’s possible to grasp the distribution of some variable according to
a specific categorical variable using the same function:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2008</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/lollipopChart.html">lollipopChart</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"manufacturer"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"hwy"</span>,</span>
<span>    circleFill <span class="op">=</span> <span class="st">'red'</span>,</span>
<span>    circleStroke <span class="op">=</span> <span class="st">'orange'</span>,</span>
<span>    circleRadius <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    sort <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    xFontSize <span class="op">=</span> <span class="fl">10</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-0ed12bb554391c49c2e3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-0ed12bb554391c49c2e3">{"x":{"data":{"manufacturer":["audi","audi","audi","audi","audi","audi","audi","audi","audi","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","honda","honda","honda","honda","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","jeep","jeep","jeep","jeep","jeep","jeep","land rover","land rover","lincoln","mercury","mercury","nissan","nissan","nissan","nissan","nissan","nissan","nissan","pontiac","pontiac","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen"],"model":["a4","a4","a4","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a6 quattro","a6 quattro","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","corvette","corvette","corvette","k1500 tahoe 4wd","k1500 tahoe 4wd","malibu","malibu","malibu","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","expedition 2wd","explorer 4wd","explorer 4wd","f150 pickup 4wd","f150 pickup 4wd","mustang","mustang","mustang","mustang","mustang","civic","civic","civic","civic","sonata","sonata","sonata","tiburon","tiburon","tiburon","tiburon","tiburon","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","range rover","range rover","navigator 2wd","mountaineer 4wd","mountaineer 4wd","altima","altima","altima","altima","maxima","pathfinder 4wd","pathfinder 4wd","grand prix","grand prix","forester awd","forester awd","forester awd","forester awd","impreza awd","impreza awd","impreza awd","impreza awd","4runner 4wd","4runner 4wd","camry","camry","camry","camry solara","camry solara","camry solara","corolla","corolla","land cruiser wagon 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","gti","gti","jetta","jetta","jetta","jetta","new beetle","new beetle","passat","passat","passat"],"displ":[2,2,3.1,2,2,3.1,3.1,3.1,4.2,5.3,5.3,5.3,6,6.2,6.2,7,5.3,5.3,2.4,3.5,3.6,3.3,3.3,3.3,3.8,4,3.7,3.7,4.7,4.7,4.7,4.7,4.7,4.7,5.7,4.7,4.7,4.7,4.7,4.7,4.7,5.7,5.4,4,4.6,4.6,5.4,4,4,4.6,4.6,5.4,1.8,1.8,1.8,2,2.4,2.4,3.3,2,2,2.7,2.7,2.7,3,3.7,4.7,4.7,5.7,6.1,4.2,4.4,5.4,4,4.6,2.5,2.5,3.5,3.5,3.5,4,5.6,3.8,5.3,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,4,4.7,2.4,2.4,3.5,2.4,2.4,3.3,1.8,1.8,5.7,2.7,4,4,2,2,2,2,2.5,2.5,2.5,2.5,2,2,3.6],"year":[2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008],"cyl":[4,4,6,4,4,6,6,6,8,8,8,8,8,8,8,8,8,8,4,6,6,6,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,6,8,8,8,6,6,8,8,8,4,4,4,4,4,4,6,4,4,6,6,6,6,6,8,8,8,8,8,8,8,6,8,4,4,6,6,6,6,8,6,8,4,4,4,4,4,4,4,4,6,8,4,4,6,4,4,6,4,4,8,4,6,6,4,4,4,4,5,5,5,5,4,4,6],"trans":["manual(m6)","auto(av)","auto(av)","manual(m6)","auto(s6)","auto(s6)","manual(m6)","auto(s6)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","manual(m6)","auto(s6)","manual(m6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l6)","manual(m6)","auto(l4)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","manual(m6)","auto(l5)","auto(l5)","auto(l5)","manual(m6)","manual(m6)","auto(l5)","auto(l6)","auto(l5)","auto(l6)","auto(l4)","auto(l4)","manual(m5)","auto(l5)","manual(m5)","auto(l5)","manual(m6)","manual(m5)","auto(l5)","auto(l5)","manual(m6)","auto(l4)","manual(m5)","auto(l5)","manual(m5)","auto(l4)","auto(l4)","manual(m6)","manual(m5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(s6)","auto(s6)","auto(l6)","auto(l5)","auto(l6)","auto(av)","manual(m6)","manual(m6)","auto(av)","auto(av)","auto(l5)","auto(s5)","auto(l4)","auto(s4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(s4)","auto(s4)","manual(m5)","manual(m5)","auto(l5)","auto(l5)","manual(m5)","auto(l5)","auto(s6)","manual(m5)","auto(s5)","auto(s5)","manual(m5)","auto(l4)","auto(s6)","manual(m5)","manual(m6)","auto(l5)","manual(m6)","auto(s6)","auto(s6)","manual(m6)","auto(s6)","manual(m5)","manual(m5)","auto(s6)","auto(s6)","manual(m6)","auto(s6)"],"drv":["f","f","f","4","4","4","4","4","4","r","r","r","r","r","r","r","4","4","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","r","4","4","4","4","r","r","r","r","r","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","r","4","4","f","f","f","f","f","4","4","f","f","4","4","4","4","4","4","4","4","4","4","f","f","f","f","f","f","f","f","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f"],"cty":[20,21,18,20,19,17,15,17,16,14,11,14,12,16,15,15,14,11,22,18,17,17,17,11,16,16,15,14,14,14,9,13,9,13,13,12,9,13,13,12,9,13,12,13,13,13,13,17,16,15,15,14,26,25,24,21,21,21,19,20,20,17,16,17,17,15,9,14,13,11,12,12,12,13,13,23,23,19,19,19,14,12,18,16,20,19,20,18,20,20,19,20,16,14,21,21,19,21,22,18,28,26,13,17,15,16,21,22,22,21,21,21,20,20,19,21,17],"hwy":[31,30,27,28,27,25,25,25,23,20,15,20,17,26,25,24,19,14,30,29,26,24,24,17,23,23,19,18,19,19,12,17,12,17,18,16,12,17,17,16,12,17,18,19,19,17,17,26,24,23,22,20,34,36,36,29,30,31,28,28,27,24,24,24,22,19,12,19,18,14,18,18,18,19,19,31,32,27,26,25,20,18,28,25,27,25,26,23,25,27,25,27,20,17,31,31,28,31,31,27,37,35,18,22,18,20,29,29,29,29,29,29,28,29,28,29,26],"fl":["p","p","p","p","p","p","p","p","p","r","e","r","r","p","p","p","r","e","r","r","r","r","r","e","r","r","r","r","r","r","e","r","e","r","r","r","e","r","r","r","e","r","r","r","r","r","r","r","r","r","r","p","r","r","c","p","r","r","r","r","r","r","r","r","d","r","e","r","r","p","r","r","r","r","r","r","r","p","p","p","p","p","r","p","r","p","r","p","p","r","p","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","p","p","p","p","r","r","r","r","p","p","p"],"class":["compact","compact","compact","compact","compact","compact","compact","midsize","midsize","suv","suv","suv","suv","2seater","2seater","2seater","suv","suv","midsize","midsize","midsize","minivan","minivan","minivan","minivan","minivan","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","pickup","pickup","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","midsize","midsize","midsize","subcompact","subcompact","subcompact","subcompact","subcompact","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","suv","suv","midsize","midsize","suv","suv","suv","suv","compact","compact","compact","compact","suv","suv","midsize","midsize","midsize","compact","compact","compact","compact","compact","suv","pickup","pickup","pickup","compact","compact","compact","compact","compact","compact","subcompact","subcompact","midsize","midsize","midsize"]},"type":"data.frame","container":"svg","options":{"x":"manufacturer","y":"hwy","sort":"none","bgcol":"white","xticks":null,"yticks":null,"xFontSize":10,"yFontSize":12,"font":"Verdana, Geneva, Tahoma, sans-serif","xtitle":null,"xtitleFontSize":14,"ytitle":null,"ytitleFontSize":14,"title":null,"titleFontSize":20,"lineStroke":"maroon","lineStrokeWidth":4,"circleStroke":"orange","circleStrokeWidth":1,"circleFill":"red","circleRadius":5,"axisCol":"black","width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/lollipopchart.js */\n// Setting the margin object\nlet margin = { top: 50, right: 50, bottom: 50, left: 50 };\n\n// Sorting the data\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.y], b[options.y]);\n  } else {\n    return d3.descending(a[options.y], b[options.y]);\n  }\n});\n\n// Setting the scaling of the x variable\nlet xScale = d3\n  .scaleBand()\n  .domain(\n    data.map(function (d) {\n      return d[options.x];\n    })\n  )\n  .range([margin.left, width - margin.right])\n  .padding(1);\n\n// Setting the scaling of the y variable\nlet yScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.y])])\n  .range([height - margin.bottom, margin.top]);\n\n// Setting the x-axis\nxAx = d3.axisBottom(xScale).ticks(options.xticks);\n\n// Setting the y-axis\nyAx = d3.axisLeft(yScale).ticks(options.yticks);\n\n// Rendering the x-axis\ngx = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.xFontSize);\n\n// Rendering the y-axis\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.yFontSize);\n\n// Removing the y and x axis line\ngx.call((g) => g.selectAll(\"line\").remove());\ngy.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 1) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the lines\n\nsvg.style(\"background-color\", options.bgcol);\n\nsvg\n  .selectAll(\"myline\")\n  .data(data)\n  .enter()\n  .append(\"line\")\n  .attr(\"x1\", (d) => xScale(d[options.x]))\n  .attr(\"y1\", (d) => yScale(d[options.y]))\n  .attr(\"x2\", (d) => xScale(d[options.x]))\n  .attr(\"y2\", yScale(0))\n  .attr(\"stroke\", options.lineStroke)\n  .attr(\"stroke-width\", options.lineStrokeWidth);\n\n// Rendering the circles\nsvg\n  .selectAll(\"mycircle\")\n  .data(data)\n  .enter()\n  .append(\"circle\")\n  .attr(\"cx\", (d) => xScale(d[options.x]))\n  .attr(\"cy\", (d) => yScale(d[options.y]))\n  .attr(\"r\", options.circleRadius)\n  .style(\"fill\", options.circleFill)\n  .attr(\"stroke\", options.circleStroke)\n  .attr(\"stroke-width\", options.circleStrokeWidth);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>From above, it’s quite easy to notice that although Toyota has two
cars with high highway miles per galon (hwy), it also produces many
other vehicles with poor hwy.</p>
</div>
<div class="section level2">
<h2 id="horzlollipop">
<code>horzLollipop()</code><a class="anchor" aria-label="anchor" href="#horzlollipop"></a>
</h2>
<p>Same with bar charts, if you have a variable that has many
categorical values, you can work with the reversed version of
<code><a href="../reference/lollipopChart.html">lollipopChart()</a></code> which is <code><a href="../reference/horzLollipop.html">horzLollipop()</a></code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">manufacturer</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>median_cty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/horzLollipop.html">horzLollipop</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"manufacturer"</span>,</span>
<span>    value <span class="op">=</span> <span class="st">"median_cty"</span>,</span>
<span>    sort <span class="op">=</span> <span class="st">"descending"</span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-ec658d41f8c4f2d124e9" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ec658d41f8c4f2d124e9">{"x":{"data":{"manufacturer":["audi","chevrolet","dodge","ford","honda","hyundai","jeep","land rover","lincoln","mercury","nissan","pontiac","subaru","toyota","volkswagen"],"median_cty":[17.5,15,13,14,24,18.5,14,11.5,11,13,19,17,19,18,21]},"type":"data.frame","container":"svg","options":{"label":"manufacturer","value":"median_cty","sort":"descending","bgcol":"white","valueTicks":null,"labelTicks":null,"valueFontSize":12,"labelFontSize":12,"font":"Verdana, Geneva, Tahoma, sans-serif","valueTitle":null,"valueTitleFontSize":14,"labelTitle":null,"labelTitleFontSize":14,"title":null,"titleFontSize":20,"lineStroke":"maroon","lineStrokeWidth":4,"circleStroke":"lime","circleStrokeWidth":1,"circleFill":"lime","circleRadius":5,"axisCol":"black","width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/horzlollipop.js */\n// Setting the margin object\nlet margin = {\n  top: 50,\n  right: 20,\n  bottom: 50,\n  left: 100,\n};\n\n// Sorting the data\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.value], b[options.value]);\n  } else {\n    return d3.descending(a[options.value], b[options.value]);\n  }\n});\n\nlet yScale = d3\n  .scaleBand()\n  .domain(\n    data.map(function (d) {\n      return d[options.label];\n    })\n  )\n  .range([margin.bottom, height - margin.top])\n  .padding(1);\n\nlet xScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.value])])\n  .range([margin.left, width - margin.right]);\n\nxAx = d3.axisBottom(xScale).ticks(options.valueTicks);\nyAx = d3.axisLeft(yScale).ticks(options.labelTicks);\n\ngx = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.valueFontSize);\n\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.labelFontSize);\n\n// Removing the y and x axis line\ngy.call((g) => g.selectAll(\"line\").remove());\ngx.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 1) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.valueTitleFontSize)\n  .text(options.valueTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.labelTitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.labelTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the lines\n\nsvg.style(\"background-color\", options.bgcol);\n\nsvg\n  .selectAll(\"myline\")\n  .data(data)\n  .enter()\n  .append(\"line\")\n  .attr(\"x1\", (d) => xScale(d[options.value]))\n  .attr(\"y1\", (d) => yScale(d[options.label]))\n  .attr(\"x2\", xScale(0))\n  .attr(\"y2\", (d) => yScale(d[options.label]))\n  .attr(\"stroke\", options.lineStroke)\n  .attr(\"stroke-width\", options.lineStrokeWidth);\n\n// Rendering the circles\nsvg\n  .selectAll(\"mycircle\")\n  .data(data)\n  .enter()\n  .append(\"circle\")\n  .attr(\"cx\", (d) => xScale(d[options.value]))\n  .attr(\"cy\", (d) => yScale(d[options.label]))\n  .attr(\"r\", options.circleRadius)\n  .style(\"fill\", options.circleFill)\n  .attr(\"stroke\", options.circleStroke)\n  .attr(\"stroke-width\", options.circleStrokeWidth);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>You can also do:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mpg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="fl">2008</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span><span class="fu"><a href="../reference/horzLollipop.html">horzLollipop</a></span><span class="op">(</span></span>
<span>    label <span class="op">=</span> <span class="st">"manufacturer"</span>,</span>
<span>    value <span class="op">=</span> <span class="st">"hwy"</span>,</span>
<span>    circleFill <span class="op">=</span> <span class="st">'red'</span>,</span>
<span>    circleStroke <span class="op">=</span> <span class="st">'orange'</span>,</span>
<span>    circleRadius <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    sort <span class="op">=</span> <span class="st">"none"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-6b83523733b890d61edc" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-6b83523733b890d61edc">{"x":{"data":{"manufacturer":["audi","audi","audi","audi","audi","audi","audi","audi","audi","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","chevrolet","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","dodge","ford","ford","ford","ford","ford","ford","ford","ford","ford","ford","honda","honda","honda","honda","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","hyundai","jeep","jeep","jeep","jeep","jeep","jeep","land rover","land rover","lincoln","mercury","mercury","nissan","nissan","nissan","nissan","nissan","nissan","nissan","pontiac","pontiac","subaru","subaru","subaru","subaru","subaru","subaru","subaru","subaru","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","toyota","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen","volkswagen"],"model":["a4","a4","a4","a4 quattro","a4 quattro","a4 quattro","a4 quattro","a6 quattro","a6 quattro","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","c1500 suburban 2wd","corvette","corvette","corvette","k1500 tahoe 4wd","k1500 tahoe 4wd","malibu","malibu","malibu","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","caravan 2wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","dakota pickup 4wd","durango 4wd","durango 4wd","durango 4wd","durango 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","ram 1500 pickup 4wd","expedition 2wd","explorer 4wd","explorer 4wd","f150 pickup 4wd","f150 pickup 4wd","mustang","mustang","mustang","mustang","mustang","civic","civic","civic","civic","sonata","sonata","sonata","tiburon","tiburon","tiburon","tiburon","tiburon","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","grand cherokee 4wd","range rover","range rover","navigator 2wd","mountaineer 4wd","mountaineer 4wd","altima","altima","altima","altima","maxima","pathfinder 4wd","pathfinder 4wd","grand prix","grand prix","forester awd","forester awd","forester awd","forester awd","impreza awd","impreza awd","impreza awd","impreza awd","4runner 4wd","4runner 4wd","camry","camry","camry","camry solara","camry solara","camry solara","corolla","corolla","land cruiser wagon 4wd","toyota tacoma 4wd","toyota tacoma 4wd","toyota tacoma 4wd","gti","gti","jetta","jetta","jetta","jetta","new beetle","new beetle","passat","passat","passat"],"displ":[2,2,3.1,2,2,3.1,3.1,3.1,4.2,5.3,5.3,5.3,6,6.2,6.2,7,5.3,5.3,2.4,3.5,3.6,3.3,3.3,3.3,3.8,4,3.7,3.7,4.7,4.7,4.7,4.7,4.7,4.7,5.7,4.7,4.7,4.7,4.7,4.7,4.7,5.7,5.4,4,4.6,4.6,5.4,4,4,4.6,4.6,5.4,1.8,1.8,1.8,2,2.4,2.4,3.3,2,2,2.7,2.7,2.7,3,3.7,4.7,4.7,5.7,6.1,4.2,4.4,5.4,4,4.6,2.5,2.5,3.5,3.5,3.5,4,5.6,3.8,5.3,2.5,2.5,2.5,2.5,2.5,2.5,2.5,2.5,4,4.7,2.4,2.4,3.5,2.4,2.4,3.3,1.8,1.8,5.7,2.7,4,4,2,2,2,2,2.5,2.5,2.5,2.5,2,2,3.6],"year":[2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008],"cyl":[4,4,6,4,4,6,6,6,8,8,8,8,8,8,8,8,8,8,4,6,6,6,6,6,6,6,6,6,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,6,8,8,8,6,6,8,8,8,4,4,4,4,4,4,6,4,4,6,6,6,6,6,8,8,8,8,8,8,8,6,8,4,4,6,6,6,6,8,6,8,4,4,4,4,4,4,4,4,6,8,4,4,6,4,4,6,4,4,8,4,6,6,4,4,4,4,5,5,5,5,4,4,6],"trans":["manual(m6)","auto(av)","auto(av)","manual(m6)","auto(s6)","auto(s6)","manual(m6)","auto(s6)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","manual(m6)","auto(s6)","manual(m6)","auto(l4)","auto(l4)","auto(l4)","auto(l4)","auto(s6)","auto(l4)","auto(l4)","auto(l4)","auto(l6)","auto(l6)","manual(m6)","auto(l4)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","manual(m6)","auto(l5)","auto(l5)","auto(l5)","manual(m6)","manual(m6)","auto(l5)","auto(l6)","auto(l5)","auto(l6)","auto(l4)","auto(l4)","manual(m5)","auto(l5)","manual(m5)","auto(l5)","manual(m6)","manual(m5)","auto(l5)","auto(l5)","manual(m6)","auto(l4)","manual(m5)","auto(l5)","manual(m5)","auto(l4)","auto(l4)","manual(m6)","manual(m5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(l5)","auto(s6)","auto(s6)","auto(l6)","auto(l5)","auto(l6)","auto(av)","manual(m6)","manual(m6)","auto(av)","auto(av)","auto(l5)","auto(s5)","auto(l4)","auto(s4)","manual(m5)","manual(m5)","auto(l4)","auto(l4)","auto(s4)","auto(s4)","manual(m5)","manual(m5)","auto(l5)","auto(l5)","manual(m5)","auto(l5)","auto(s6)","manual(m5)","auto(s5)","auto(s5)","manual(m5)","auto(l4)","auto(s6)","manual(m5)","manual(m6)","auto(l5)","manual(m6)","auto(s6)","auto(s6)","manual(m6)","auto(s6)","manual(m5)","manual(m5)","auto(s6)","auto(s6)","manual(m6)","auto(s6)"],"drv":["f","f","f","4","4","4","4","4","4","r","r","r","r","r","r","r","4","4","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","r","4","4","4","4","r","r","r","r","r","f","f","f","f","f","f","f","f","f","f","f","f","4","4","4","4","4","4","4","4","r","4","4","f","f","f","f","f","4","4","f","f","4","4","4","4","4","4","4","4","4","4","f","f","f","f","f","f","f","f","4","4","4","4","f","f","f","f","f","f","f","f","f","f","f"],"cty":[20,21,18,20,19,17,15,17,16,14,11,14,12,16,15,15,14,11,22,18,17,17,17,11,16,16,15,14,14,14,9,13,9,13,13,12,9,13,13,12,9,13,12,13,13,13,13,17,16,15,15,14,26,25,24,21,21,21,19,20,20,17,16,17,17,15,9,14,13,11,12,12,12,13,13,23,23,19,19,19,14,12,18,16,20,19,20,18,20,20,19,20,16,14,21,21,19,21,22,18,28,26,13,17,15,16,21,22,22,21,21,21,20,20,19,21,17],"hwy":[31,30,27,28,27,25,25,25,23,20,15,20,17,26,25,24,19,14,30,29,26,24,24,17,23,23,19,18,19,19,12,17,12,17,18,16,12,17,17,16,12,17,18,19,19,17,17,26,24,23,22,20,34,36,36,29,30,31,28,28,27,24,24,24,22,19,12,19,18,14,18,18,18,19,19,31,32,27,26,25,20,18,28,25,27,25,26,23,25,27,25,27,20,17,31,31,28,31,31,27,37,35,18,22,18,20,29,29,29,29,29,29,28,29,28,29,26],"fl":["p","p","p","p","p","p","p","p","p","r","e","r","r","p","p","p","r","e","r","r","r","r","r","e","r","r","r","r","r","r","e","r","e","r","r","r","e","r","r","r","e","r","r","r","r","r","r","r","r","r","r","p","r","r","c","p","r","r","r","r","r","r","r","r","d","r","e","r","r","p","r","r","r","r","r","r","r","p","p","p","p","p","r","p","r","p","r","p","p","r","p","r","r","r","r","r","r","r","r","r","r","r","r","r","r","r","p","p","p","p","r","r","r","r","p","p","p"],"class":["compact","compact","compact","compact","compact","compact","compact","midsize","midsize","suv","suv","suv","suv","2seater","2seater","2seater","suv","suv","midsize","midsize","midsize","minivan","minivan","minivan","minivan","minivan","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","suv","pickup","pickup","pickup","pickup","pickup","pickup","pickup","suv","suv","suv","pickup","pickup","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","subcompact","midsize","midsize","midsize","subcompact","subcompact","subcompact","subcompact","subcompact","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","suv","midsize","midsize","midsize","midsize","midsize","suv","suv","midsize","midsize","suv","suv","suv","suv","compact","compact","compact","compact","suv","suv","midsize","midsize","midsize","compact","compact","compact","compact","compact","suv","pickup","pickup","pickup","compact","compact","compact","compact","compact","compact","subcompact","subcompact","midsize","midsize","midsize"]},"type":"data.frame","container":"svg","options":{"label":"manufacturer","value":"hwy","sort":"none","bgcol":"white","valueTicks":null,"labelTicks":null,"valueFontSize":12,"labelFontSize":12,"font":"Verdana, Geneva, Tahoma, sans-serif","valueTitle":null,"valueTitleFontSize":14,"labelTitle":null,"labelTitleFontSize":14,"title":null,"titleFontSize":20,"lineStroke":"maroon","lineStrokeWidth":4,"circleStroke":"orange","circleStrokeWidth":1,"circleFill":"red","circleRadius":5,"axisCol":"black","width":null,"height":null},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/horzlollipop.js */\n// Setting the margin object\nlet margin = {\n  top: 50,\n  right: 20,\n  bottom: 50,\n  left: 100,\n};\n\n// Sorting the data\n\ndata.sort(function (a, b) {\n  if (options.sort === \"none\") {\n    return null;\n  } else if (options.sort === \"ascending\") {\n    return d3.ascending(a[options.value], b[options.value]);\n  } else {\n    return d3.descending(a[options.value], b[options.value]);\n  }\n});\n\nlet yScale = d3\n  .scaleBand()\n  .domain(\n    data.map(function (d) {\n      return d[options.label];\n    })\n  )\n  .range([margin.bottom, height - margin.top])\n  .padding(1);\n\nlet xScale = d3\n  .scaleLinear()\n  .domain([0, d3.max(data, (d) => d[options.value])])\n  .range([margin.left, width - margin.right]);\n\nxAx = d3.axisBottom(xScale).ticks(options.valueTicks);\nyAx = d3.axisLeft(yScale).ticks(options.labelTicks);\n\ngx = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xAx)\n  .attr(\"font-size\", options.valueFontSize);\n\ngy = svg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yAx)\n  .attr(\"font-size\", options.labelFontSize);\n\n// Removing the y and x axis line\ngy.call((g) => g.selectAll(\"line\").remove());\ngx.call((g) => g.select(\".domain\").remove());\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 1) + \")\")\n  .attr(\"dx\", \"0em\")\n  .attr(\"dy\", \"-0.4em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.valueTitleFontSize)\n  .text(options.valueTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"1em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.labelTitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.labelTitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the lines\n\nsvg.style(\"background-color\", options.bgcol);\n\nsvg\n  .selectAll(\"myline\")\n  .data(data)\n  .enter()\n  .append(\"line\")\n  .attr(\"x1\", (d) => xScale(d[options.value]))\n  .attr(\"y1\", (d) => yScale(d[options.label]))\n  .attr(\"x2\", xScale(0))\n  .attr(\"y2\", (d) => yScale(d[options.label]))\n  .attr(\"stroke\", options.lineStroke)\n  .attr(\"stroke-width\", options.lineStrokeWidth);\n\n// Rendering the circles\nsvg\n  .selectAll(\"mycircle\")\n  .data(data)\n  .enter()\n  .append(\"circle\")\n  .attr(\"cx\", (d) => xScale(d[options.value]))\n  .attr(\"cy\", (d) => yScale(d[options.label]))\n  .attr(\"r\", options.circleRadius)\n  .style(\"fill\", options.circleFill)\n  .attr(\"stroke\", options.circleStroke)\n  .attr(\"stroke-width\", options.circleStrokeWidth);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="piechart">
<code>pieChart()</code><a class="anchor" aria-label="anchor" href="#piechart"></a>
</h2>
<p>Pie charts and donut charts are pretty straightforward to set up.
We’ll use a sample from the <code>starwars</code> data frame to plot a
simple pie chart.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># starwars is part of the dplyr data frame</span></span>
<span><span class="va">mini_starwars</span> <span class="op">&lt;-</span> <span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">mass</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_n</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># getting 5 random values</span></span>
<span></span>
<span><span class="fu"><a href="../reference/pieChart.html">pieChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mini_starwars</span>,</span>
<span>  value <span class="op">=</span> <span class="st">"mass"</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"name"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-b3f7c917b6c8ff580948" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-b3f7c917b6c8ff580948">{"x":{"data":{"name":["Poggle the Lesser","Lando Calrissian","Chewbacca","Dud Bolt","Ben Quadinaros"],"height":[183,177,228,94,163],"mass":[80,79,112,45,65],"hair_color":["none","black","brown","none","none"],"skin_color":["green","dark","unknown","blue, grey","grey, green, yellow"],"eye_color":["yellow","brown","blue","yellow","orange"],"birth_year":[null,31,200,null,null],"sex":["male","male","male","male","male"],"gender":["masculine","masculine","masculine","masculine","masculine"],"homeworld":["Geonosis","Socorro","Kashyyyk","Vulpter","Tund"],"species":["Geonosian","Human","Wookiee","Vulptereen","Toong"],"films":[["Attack of the Clones","Revenge of the Sith"],["The Empire Strikes Back","Return of the Jedi"],["A New Hope","The Empire Strikes Back","Return of the Jedi","Revenge of the Sith","The Force Awakens"],"The Phantom Menace","The Phantom Menace"],"vehicles":[[],[],"AT-ST",[],[]],"starships":[[],"Millennium Falcon",["Millennium Falcon","Imperial shuttle"],[],[]]},"type":"data.frame","container":"svg","options":{"value":"mass","label":"name","title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","width":null,"height":null,"titleFontSize":22,"bgcol":"white","opacity":1,"colorCategory":"Paired","innerRadius":0,"outerRadius":"auto","labelHeight":18,"padRadius":0,"padAngle":null,"cornerRadius":0,"labelFont":"sans-serif"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/piechart.js */\nlet margin = 20;\n\nlet pie = d3.pie().value((d) => d[options.value]);\n\nlet radius = Math.min(width, height) / 2 - margin;\n\nif (options.outerRadius != \"auto\") {\n  radius = options.outerRadius;\n}\n\nlet pieData = pie(data);\n\nlet colorCategory = \"scheme\" + options.colorCategory;\n\nlet colorSeq = d3.scaleOrdinal(d3[colorCategory]);\n\nlet arc = d3\n  .arc()\n  .innerRadius(options.innerRadius)\n  .outerRadius(radius)\n  .padRadius(options.padRadius)\n  .padAngle(options.padAngle)\n  .cornerRadius(options.cornerRadius);\n\nlet labelHeight = options.labelHeight;\n\nsvg\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"transform\", `translate(${radius},${radius})`)\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"path\")\n  .attr(\"d\", arc)\n  .attr(\"fill\", (d) => colorSeq(d.data[options.label]))\n  .attr(\"opacity\", options.opacity)\n  .append('title')\n  .text(d => d.data[options.value])\n\nconst legend = svg\n  .append(\"g\")\n  .attr(\"transform\", `translate(${radius * 2 + 20},0)`);\n\nlegend\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"rect\")\n  .attr(\"y\", (d) => 5 + labelHeight * d.index * 1.8)\n  .attr(\"width\", labelHeight)\n  .attr(\"height\", labelHeight)\n  .attr(\"fill\", (d) => colorSeq(d.data[options.label]));\n\nlegend\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"text\")\n  .text((d) => d.data[options.label])\n  .attr(\"x\", labelHeight * 1.2)\n  .attr(\"y\", (d) => labelHeight * d.index * 1.8 + labelHeight)\n  .style(\"font-family\", options.labelFont)\n  .style(\"font-size\", `${labelHeight}px`);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", radius)\n  .attr(\"y\", radius * 2 + 30)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>Using the <code>padRadius</code>, <code>padAngle</code> and
<code>cornerRadius</code> parameters, one can get fanciers pie
charts:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pieChart.html">pieChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mini_starwars</span>,</span>
<span>  value <span class="op">=</span> <span class="st">"mass"</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"name"</span>,</span>
<span>  padRadius <span class="op">=</span> <span class="fl">200</span>,</span>
<span>  padAngle <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  cornerRadius <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  innerRadius <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-d258b2ee1c304ebe1664" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-d258b2ee1c304ebe1664">{"x":{"data":{"name":["Poggle the Lesser","Lando Calrissian","Chewbacca","Dud Bolt","Ben Quadinaros"],"height":[183,177,228,94,163],"mass":[80,79,112,45,65],"hair_color":["none","black","brown","none","none"],"skin_color":["green","dark","unknown","blue, grey","grey, green, yellow"],"eye_color":["yellow","brown","blue","yellow","orange"],"birth_year":[null,31,200,null,null],"sex":["male","male","male","male","male"],"gender":["masculine","masculine","masculine","masculine","masculine"],"homeworld":["Geonosis","Socorro","Kashyyyk","Vulpter","Tund"],"species":["Geonosian","Human","Wookiee","Vulptereen","Toong"],"films":[["Attack of the Clones","Revenge of the Sith"],["The Empire Strikes Back","Return of the Jedi"],["A New Hope","The Empire Strikes Back","Return of the Jedi","Revenge of the Sith","The Force Awakens"],"The Phantom Menace","The Phantom Menace"],"vehicles":[[],[],"AT-ST",[],[]],"starships":[[],"Millennium Falcon",["Millennium Falcon","Imperial shuttle"],[],[]]},"type":"data.frame","container":"svg","options":{"value":"mass","label":"name","title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","width":null,"height":null,"titleFontSize":22,"bgcol":"white","opacity":1,"colorCategory":"Paired","innerRadius":10,"outerRadius":"auto","labelHeight":18,"padRadius":200,"padAngle":0.1,"cornerRadius":50,"labelFont":"sans-serif"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/piechart.js */\nlet margin = 20;\n\nlet pie = d3.pie().value((d) => d[options.value]);\n\nlet radius = Math.min(width, height) / 2 - margin;\n\nif (options.outerRadius != \"auto\") {\n  radius = options.outerRadius;\n}\n\nlet pieData = pie(data);\n\nlet colorCategory = \"scheme\" + options.colorCategory;\n\nlet colorSeq = d3.scaleOrdinal(d3[colorCategory]);\n\nlet arc = d3\n  .arc()\n  .innerRadius(options.innerRadius)\n  .outerRadius(radius)\n  .padRadius(options.padRadius)\n  .padAngle(options.padAngle)\n  .cornerRadius(options.cornerRadius);\n\nlet labelHeight = options.labelHeight;\n\nsvg\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"transform\", `translate(${radius},${radius})`)\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"path\")\n  .attr(\"d\", arc)\n  .attr(\"fill\", (d) => colorSeq(d.data[options.label]))\n  .attr(\"opacity\", options.opacity)\n  .append('title')\n  .text(d => d.data[options.value])\n\nconst legend = svg\n  .append(\"g\")\n  .attr(\"transform\", `translate(${radius * 2 + 20},0)`);\n\nlegend\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"rect\")\n  .attr(\"y\", (d) => 5 + labelHeight * d.index * 1.8)\n  .attr(\"width\", labelHeight)\n  .attr(\"height\", labelHeight)\n  .attr(\"fill\", (d) => colorSeq(d.data[options.label]));\n\nlegend\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"text\")\n  .text((d) => d.data[options.label])\n  .attr(\"x\", labelHeight * 1.2)\n  .attr(\"y\", (d) => labelHeight * d.index * 1.8 + labelHeight)\n  .style(\"font-family\", options.labelFont)\n  .style(\"font-size\", `${labelHeight}px`);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", radius)\n  .attr(\"y\", radius * 2 + 30)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>If you need a donut chart, you just need to play with the
<code>innerRadius</code> parameter:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/pieChart.html">pieChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">mini_starwars</span>,</span>
<span>  value <span class="op">=</span> <span class="st">"mass"</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"name"</span>,</span>
<span>  innerRadius <span class="op">=</span> <span class="fl">120</span>,</span>
<span>  cornerRadius <span class="op">=</span> <span class="fl">20</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"5 Starwars characters ranked by their mass"</span>,</span>
<span>  titleFontSize <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"yellow"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-b8f31ebacaee3527bb86" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-b8f31ebacaee3527bb86">{"x":{"data":{"name":["Poggle the Lesser","Lando Calrissian","Chewbacca","Dud Bolt","Ben Quadinaros"],"height":[183,177,228,94,163],"mass":[80,79,112,45,65],"hair_color":["none","black","brown","none","none"],"skin_color":["green","dark","unknown","blue, grey","grey, green, yellow"],"eye_color":["yellow","brown","blue","yellow","orange"],"birth_year":[null,31,200,null,null],"sex":["male","male","male","male","male"],"gender":["masculine","masculine","masculine","masculine","masculine"],"homeworld":["Geonosis","Socorro","Kashyyyk","Vulpter","Tund"],"species":["Geonosian","Human","Wookiee","Vulptereen","Toong"],"films":[["Attack of the Clones","Revenge of the Sith"],["The Empire Strikes Back","Return of the Jedi"],["A New Hope","The Empire Strikes Back","Return of the Jedi","Revenge of the Sith","The Force Awakens"],"The Phantom Menace","The Phantom Menace"],"vehicles":[[],[],"AT-ST",[],[]],"starships":[[],"Millennium Falcon",["Millennium Falcon","Imperial shuttle"],[],[]]},"type":"data.frame","container":"svg","options":{"value":"mass","label":"name","title":"5 Starwars characters ranked by their mass","font":"Verdana, Geneva, Tahoma, sans-serif","width":null,"height":null,"titleFontSize":16,"bgcol":"yellow","opacity":1,"colorCategory":"Paired","innerRadius":120,"outerRadius":"auto","labelHeight":18,"padRadius":0,"padAngle":null,"cornerRadius":20,"labelFont":"sans-serif"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/piechart.js */\nlet margin = 20;\n\nlet pie = d3.pie().value((d) => d[options.value]);\n\nlet radius = Math.min(width, height) / 2 - margin;\n\nif (options.outerRadius != \"auto\") {\n  radius = options.outerRadius;\n}\n\nlet pieData = pie(data);\n\nlet colorCategory = \"scheme\" + options.colorCategory;\n\nlet colorSeq = d3.scaleOrdinal(d3[colorCategory]);\n\nlet arc = d3\n  .arc()\n  .innerRadius(options.innerRadius)\n  .outerRadius(radius)\n  .padRadius(options.padRadius)\n  .padAngle(options.padAngle)\n  .cornerRadius(options.cornerRadius);\n\nlet labelHeight = options.labelHeight;\n\nsvg\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"transform\", `translate(${radius},${radius})`)\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"path\")\n  .attr(\"d\", arc)\n  .attr(\"fill\", (d) => colorSeq(d.data[options.label]))\n  .attr(\"opacity\", options.opacity)\n  .append('title')\n  .text(d => d.data[options.value])\n\nconst legend = svg\n  .append(\"g\")\n  .attr(\"transform\", `translate(${radius * 2 + 20},0)`);\n\nlegend\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"rect\")\n  .attr(\"y\", (d) => 5 + labelHeight * d.index * 1.8)\n  .attr(\"width\", labelHeight)\n  .attr(\"height\", labelHeight)\n  .attr(\"fill\", (d) => colorSeq(d.data[options.label]));\n\nlegend\n  .selectAll(null)\n  .data(pieData)\n  .enter()\n  .append(\"text\")\n  .text((d) => d.data[options.label])\n  .attr(\"x\", labelHeight * 1.2)\n  .attr(\"y\", (d) => labelHeight * d.index * 1.8 + labelHeight)\n  .style(\"font-family\", options.labelFont)\n  .style(\"font-size\", `${labelHeight}px`);\n\n// Rendering the chart title\nsvg\n  .append(\"text\")\n  .attr(\"x\", radius)\n  .attr(\"y\", radius * 2 + 30)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="linechart">
<code>lineChart()</code><a class="anchor" aria-label="anchor" href="#linechart"></a>
</h2>
<p>The <code><a href="../reference/lineChart.html">lineChart()</a></code> function is used to plot time series
data. The use must provide a <code>date</code> variable that has the
<code>yyyy-mm-dd</code> format. In the following example, we’ll use the
<code>Air Passenger</code> built-in <code>ts</code> data and convert it
to a classical data frame:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. converting AirPassengers to a tidy data frame</span></span>
<span><span class="va">airpassengers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  passengers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span>,</span>
<span>  date<span class="op">=</span> <span class="fu">zoo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/zoo/man/yearmon.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/time.html" class="external-link">time</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. plotting the line chart</span></span>
<span><span class="fu"><a href="../reference/lineChart.html">lineChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">airpassengers</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"passengers"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-b25b670b028f478bf741" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-b25b670b028f478bf741">{"x":{"data":{"passengers":[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],"date":["1949-01-01","1949-02-01","1949-03-01","1949-04-01","1949-05-01","1949-06-01","1949-07-01","1949-08-01","1949-09-01","1949-10-01","1949-11-01","1949-12-01","1950-01-01","1950-02-01","1950-03-01","1950-04-01","1950-05-01","1950-06-01","1950-07-01","1950-08-01","1950-09-01","1950-10-01","1950-11-01","1950-12-01","1951-01-01","1951-02-01","1951-03-01","1951-04-01","1951-05-01","1951-06-01","1951-07-01","1951-08-01","1951-09-01","1951-10-01","1951-11-01","1951-12-01","1952-01-01","1952-02-01","1952-03-01","1952-04-01","1952-05-01","1952-06-01","1952-07-01","1952-08-01","1952-09-01","1952-10-01","1952-11-01","1952-12-01","1953-01-01","1953-02-01","1953-03-01","1953-04-01","1953-05-01","1953-06-01","1953-07-01","1953-08-01","1953-09-01","1953-10-01","1953-11-01","1953-12-01","1954-01-01","1954-02-01","1954-03-01","1954-04-01","1954-05-01","1954-06-01","1954-07-01","1954-08-01","1954-09-01","1954-10-01","1954-11-01","1954-12-01","1955-01-01","1955-02-01","1955-03-01","1955-04-01","1955-05-01","1955-06-01","1955-07-01","1955-08-01","1955-09-01","1955-10-01","1955-11-01","1955-12-01","1956-01-01","1956-02-01","1956-03-01","1956-04-01","1956-05-01","1956-06-01","1956-07-01","1956-08-01","1956-09-01","1956-10-01","1956-11-01","1956-12-01","1957-01-01","1957-02-01","1957-03-01","1957-04-01","1957-05-01","1957-06-01","1957-07-01","1957-08-01","1957-09-01","1957-10-01","1957-11-01","1957-12-01","1958-01-01","1958-02-01","1958-03-01","1958-04-01","1958-05-01","1958-06-01","1958-07-01","1958-08-01","1958-09-01","1958-10-01","1958-11-01","1958-12-01","1959-01-01","1959-02-01","1959-03-01","1959-04-01","1959-05-01","1959-06-01","1959-07-01","1959-08-01","1959-09-01","1959-10-01","1959-11-01","1959-12-01","1960-01-01","1960-02-01","1960-03-01","1960-04-01","1960-05-01","1960-06-01","1960-07-01","1960-08-01","1960-09-01","1960-10-01","1960-11-01","1960-12-01"]},"type":"data.frame","container":"svg","options":{"x":"date","y":"passengers","curve":"curveLinear","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"crimson","strokeWidth":1.5,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/linechart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nfunction isItNegative() {\n  if(ymin < 0) {\n    return ymin - (ymin * 10/100)\n  } else {\n    return 0\n  }\n}\n\nlet y = d3\n  .scaleLinear()\n  .domain([isItNegative(), ymax])\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the scatter plot\n\nlet line = d3\n  .line()\n  .x((d) => x(new Date(d[options.x])))\n  .y((d) => y(d[options.y]))\n  .curve(d3[options.curve])\n\n  let clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\n  svg\n    .append(\"clipPath\")\n    .attr(\"id\", clipPathId)\n    .append(\"rect\")\n    .attr(\"x\", margin.left + 1)\n    .attr(\"y\", margin.top)\n    .attr(\"width\", width - margin.left)\n    .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"path\")\n  .datum(data)\n  .attr(\"fill\", \"none\")\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth)\n  .attr(\"stroke-linejoin\", \"round\")\n  .attr(\"stroke-linecap\", \"round\")\n  .attr(\"d\", line);\n\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>You can modify the line interpolation using the <code>curve</code>
parameter:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lineChart.html">lineChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">airpassengers</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"passengers"</span>,</span>
<span>  curve <span class="op">=</span> <span class="st">"curveStep"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-46d1193f7ba074d981c8" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-46d1193f7ba074d981c8">{"x":{"data":{"passengers":[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],"date":["1949-01-01","1949-02-01","1949-03-01","1949-04-01","1949-05-01","1949-06-01","1949-07-01","1949-08-01","1949-09-01","1949-10-01","1949-11-01","1949-12-01","1950-01-01","1950-02-01","1950-03-01","1950-04-01","1950-05-01","1950-06-01","1950-07-01","1950-08-01","1950-09-01","1950-10-01","1950-11-01","1950-12-01","1951-01-01","1951-02-01","1951-03-01","1951-04-01","1951-05-01","1951-06-01","1951-07-01","1951-08-01","1951-09-01","1951-10-01","1951-11-01","1951-12-01","1952-01-01","1952-02-01","1952-03-01","1952-04-01","1952-05-01","1952-06-01","1952-07-01","1952-08-01","1952-09-01","1952-10-01","1952-11-01","1952-12-01","1953-01-01","1953-02-01","1953-03-01","1953-04-01","1953-05-01","1953-06-01","1953-07-01","1953-08-01","1953-09-01","1953-10-01","1953-11-01","1953-12-01","1954-01-01","1954-02-01","1954-03-01","1954-04-01","1954-05-01","1954-06-01","1954-07-01","1954-08-01","1954-09-01","1954-10-01","1954-11-01","1954-12-01","1955-01-01","1955-02-01","1955-03-01","1955-04-01","1955-05-01","1955-06-01","1955-07-01","1955-08-01","1955-09-01","1955-10-01","1955-11-01","1955-12-01","1956-01-01","1956-02-01","1956-03-01","1956-04-01","1956-05-01","1956-06-01","1956-07-01","1956-08-01","1956-09-01","1956-10-01","1956-11-01","1956-12-01","1957-01-01","1957-02-01","1957-03-01","1957-04-01","1957-05-01","1957-06-01","1957-07-01","1957-08-01","1957-09-01","1957-10-01","1957-11-01","1957-12-01","1958-01-01","1958-02-01","1958-03-01","1958-04-01","1958-05-01","1958-06-01","1958-07-01","1958-08-01","1958-09-01","1958-10-01","1958-11-01","1958-12-01","1959-01-01","1959-02-01","1959-03-01","1959-04-01","1959-05-01","1959-06-01","1959-07-01","1959-08-01","1959-09-01","1959-10-01","1959-11-01","1959-12-01","1960-01-01","1960-02-01","1960-03-01","1960-04-01","1960-05-01","1960-06-01","1960-07-01","1960-08-01","1960-09-01","1960-10-01","1960-11-01","1960-12-01"]},"type":"data.frame","container":"svg","options":{"x":"date","y":"passengers","curve":"curveStep","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"crimson","strokeWidth":1.5,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/linechart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nfunction isItNegative() {\n  if(ymin < 0) {\n    return ymin - (ymin * 10/100)\n  } else {\n    return 0\n  }\n}\n\nlet y = d3\n  .scaleLinear()\n  .domain([isItNegative(), ymax])\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the scatter plot\n\nlet line = d3\n  .line()\n  .x((d) => x(new Date(d[options.x])))\n  .y((d) => y(d[options.y]))\n  .curve(d3[options.curve])\n\n  let clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\n  svg\n    .append(\"clipPath\")\n    .attr(\"id\", clipPathId)\n    .append(\"rect\")\n    .attr(\"x\", margin.left + 1)\n    .attr(\"y\", margin.top)\n    .attr(\"width\", width - margin.left)\n    .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"path\")\n  .datum(data)\n  .attr(\"fill\", \"none\")\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth)\n  .attr(\"stroke-linejoin\", \"round\")\n  .attr(\"stroke-linecap\", \"round\")\n  .attr(\"d\", line);\n\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lineChart.html">lineChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">airpassengers</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"passengers"</span>,</span>
<span>  curve <span class="op">=</span> <span class="st">"curveCardinal"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-382a200f56fb8e6a1fd3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-382a200f56fb8e6a1fd3">{"x":{"data":{"passengers":[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],"date":["1949-01-01","1949-02-01","1949-03-01","1949-04-01","1949-05-01","1949-06-01","1949-07-01","1949-08-01","1949-09-01","1949-10-01","1949-11-01","1949-12-01","1950-01-01","1950-02-01","1950-03-01","1950-04-01","1950-05-01","1950-06-01","1950-07-01","1950-08-01","1950-09-01","1950-10-01","1950-11-01","1950-12-01","1951-01-01","1951-02-01","1951-03-01","1951-04-01","1951-05-01","1951-06-01","1951-07-01","1951-08-01","1951-09-01","1951-10-01","1951-11-01","1951-12-01","1952-01-01","1952-02-01","1952-03-01","1952-04-01","1952-05-01","1952-06-01","1952-07-01","1952-08-01","1952-09-01","1952-10-01","1952-11-01","1952-12-01","1953-01-01","1953-02-01","1953-03-01","1953-04-01","1953-05-01","1953-06-01","1953-07-01","1953-08-01","1953-09-01","1953-10-01","1953-11-01","1953-12-01","1954-01-01","1954-02-01","1954-03-01","1954-04-01","1954-05-01","1954-06-01","1954-07-01","1954-08-01","1954-09-01","1954-10-01","1954-11-01","1954-12-01","1955-01-01","1955-02-01","1955-03-01","1955-04-01","1955-05-01","1955-06-01","1955-07-01","1955-08-01","1955-09-01","1955-10-01","1955-11-01","1955-12-01","1956-01-01","1956-02-01","1956-03-01","1956-04-01","1956-05-01","1956-06-01","1956-07-01","1956-08-01","1956-09-01","1956-10-01","1956-11-01","1956-12-01","1957-01-01","1957-02-01","1957-03-01","1957-04-01","1957-05-01","1957-06-01","1957-07-01","1957-08-01","1957-09-01","1957-10-01","1957-11-01","1957-12-01","1958-01-01","1958-02-01","1958-03-01","1958-04-01","1958-05-01","1958-06-01","1958-07-01","1958-08-01","1958-09-01","1958-10-01","1958-11-01","1958-12-01","1959-01-01","1959-02-01","1959-03-01","1959-04-01","1959-05-01","1959-06-01","1959-07-01","1959-08-01","1959-09-01","1959-10-01","1959-11-01","1959-12-01","1960-01-01","1960-02-01","1960-03-01","1960-04-01","1960-05-01","1960-06-01","1960-07-01","1960-08-01","1960-09-01","1960-10-01","1960-11-01","1960-12-01"]},"type":"data.frame","container":"svg","options":{"x":"date","y":"passengers","curve":"curveCardinal","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"crimson","strokeWidth":1.5,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/linechart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nfunction isItNegative() {\n  if(ymin < 0) {\n    return ymin - (ymin * 10/100)\n  } else {\n    return 0\n  }\n}\n\nlet y = d3\n  .scaleLinear()\n  .domain([isItNegative(), ymax])\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the scatter plot\n\nlet line = d3\n  .line()\n  .x((d) => x(new Date(d[options.x])))\n  .y((d) => y(d[options.y]))\n  .curve(d3[options.curve])\n\n  let clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\n  svg\n    .append(\"clipPath\")\n    .attr(\"id\", clipPathId)\n    .append(\"rect\")\n    .attr(\"x\", margin.left + 1)\n    .attr(\"y\", margin.top)\n    .attr(\"width\", width - margin.left)\n    .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"path\")\n  .datum(data)\n  .attr(\"fill\", \"none\")\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth)\n  .attr(\"stroke-linejoin\", \"round\")\n  .attr(\"stroke-linecap\", \"round\")\n  .attr(\"d\", line);\n\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lineChart.html">lineChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">airpassengers</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"passengers"</span>,</span>
<span>  curve <span class="op">=</span> <span class="st">"curveBasis"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-da403bf8187c892ade73" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-da403bf8187c892ade73">{"x":{"data":{"passengers":[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],"date":["1949-01-01","1949-02-01","1949-03-01","1949-04-01","1949-05-01","1949-06-01","1949-07-01","1949-08-01","1949-09-01","1949-10-01","1949-11-01","1949-12-01","1950-01-01","1950-02-01","1950-03-01","1950-04-01","1950-05-01","1950-06-01","1950-07-01","1950-08-01","1950-09-01","1950-10-01","1950-11-01","1950-12-01","1951-01-01","1951-02-01","1951-03-01","1951-04-01","1951-05-01","1951-06-01","1951-07-01","1951-08-01","1951-09-01","1951-10-01","1951-11-01","1951-12-01","1952-01-01","1952-02-01","1952-03-01","1952-04-01","1952-05-01","1952-06-01","1952-07-01","1952-08-01","1952-09-01","1952-10-01","1952-11-01","1952-12-01","1953-01-01","1953-02-01","1953-03-01","1953-04-01","1953-05-01","1953-06-01","1953-07-01","1953-08-01","1953-09-01","1953-10-01","1953-11-01","1953-12-01","1954-01-01","1954-02-01","1954-03-01","1954-04-01","1954-05-01","1954-06-01","1954-07-01","1954-08-01","1954-09-01","1954-10-01","1954-11-01","1954-12-01","1955-01-01","1955-02-01","1955-03-01","1955-04-01","1955-05-01","1955-06-01","1955-07-01","1955-08-01","1955-09-01","1955-10-01","1955-11-01","1955-12-01","1956-01-01","1956-02-01","1956-03-01","1956-04-01","1956-05-01","1956-06-01","1956-07-01","1956-08-01","1956-09-01","1956-10-01","1956-11-01","1956-12-01","1957-01-01","1957-02-01","1957-03-01","1957-04-01","1957-05-01","1957-06-01","1957-07-01","1957-08-01","1957-09-01","1957-10-01","1957-11-01","1957-12-01","1958-01-01","1958-02-01","1958-03-01","1958-04-01","1958-05-01","1958-06-01","1958-07-01","1958-08-01","1958-09-01","1958-10-01","1958-11-01","1958-12-01","1959-01-01","1959-02-01","1959-03-01","1959-04-01","1959-05-01","1959-06-01","1959-07-01","1959-08-01","1959-09-01","1959-10-01","1959-11-01","1959-12-01","1960-01-01","1960-02-01","1960-03-01","1960-04-01","1960-05-01","1960-06-01","1960-07-01","1960-08-01","1960-09-01","1960-10-01","1960-11-01","1960-12-01"]},"type":"data.frame","container":"svg","options":{"x":"date","y":"passengers","curve":"curveBasis","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"crimson","strokeWidth":1.5,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/linechart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nfunction isItNegative() {\n  if(ymin < 0) {\n    return ymin - (ymin * 10/100)\n  } else {\n    return 0\n  }\n}\n\nlet y = d3\n  .scaleLinear()\n  .domain([isItNegative(), ymax])\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the scatter plot\n\nlet line = d3\n  .line()\n  .x((d) => x(new Date(d[options.x])))\n  .y((d) => y(d[options.y]))\n  .curve(d3[options.curve])\n\n  let clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\n  svg\n    .append(\"clipPath\")\n    .attr(\"id\", clipPathId)\n    .append(\"rect\")\n    .attr(\"x\", margin.left + 1)\n    .attr(\"y\", margin.top)\n    .attr(\"width\", width - margin.left)\n    .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"path\")\n  .datum(data)\n  .attr(\"fill\", \"none\")\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth)\n  .attr(\"stroke-linejoin\", \"round\")\n  .attr(\"stroke-linecap\", \"round\")\n  .attr(\"d\", line);\n\n\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="animlinechart">
<code>animLineChart()</code><a class="anchor" aria-label="anchor" href="#animlinechart"></a>
</h2>
<p>Heavily inspired from <a href="https://observablehq.com/@jurestabuc/animated-line-chart" class="external-link">Jure
Stabuc’s example</a>, the <code><a href="../reference/animLineChart.html">animLineChart()</a></code> function create
an empty SVG but when each time you click on it a line chart animation
starts. Note that the line lasts after the end of the animation. Go
ahead, click on the empty graphic below:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/animLineChart.html">animLineChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">airpassengers</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"passengers"</span>,</span>
<span>  duration <span class="op">=</span> <span class="fl">10000</span>, <span class="co"># in milliseconds (10 seconds)</span></span>
<span>  curve <span class="op">=</span> <span class="st">"curveCardinal"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-756e3bf13eb93ebd21f9" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-756e3bf13eb93ebd21f9">{"x":{"data":{"passengers":[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],"date":["1949-01-01","1949-02-01","1949-03-01","1949-04-01","1949-05-01","1949-06-01","1949-07-01","1949-08-01","1949-09-01","1949-10-01","1949-11-01","1949-12-01","1950-01-01","1950-02-01","1950-03-01","1950-04-01","1950-05-01","1950-06-01","1950-07-01","1950-08-01","1950-09-01","1950-10-01","1950-11-01","1950-12-01","1951-01-01","1951-02-01","1951-03-01","1951-04-01","1951-05-01","1951-06-01","1951-07-01","1951-08-01","1951-09-01","1951-10-01","1951-11-01","1951-12-01","1952-01-01","1952-02-01","1952-03-01","1952-04-01","1952-05-01","1952-06-01","1952-07-01","1952-08-01","1952-09-01","1952-10-01","1952-11-01","1952-12-01","1953-01-01","1953-02-01","1953-03-01","1953-04-01","1953-05-01","1953-06-01","1953-07-01","1953-08-01","1953-09-01","1953-10-01","1953-11-01","1953-12-01","1954-01-01","1954-02-01","1954-03-01","1954-04-01","1954-05-01","1954-06-01","1954-07-01","1954-08-01","1954-09-01","1954-10-01","1954-11-01","1954-12-01","1955-01-01","1955-02-01","1955-03-01","1955-04-01","1955-05-01","1955-06-01","1955-07-01","1955-08-01","1955-09-01","1955-10-01","1955-11-01","1955-12-01","1956-01-01","1956-02-01","1956-03-01","1956-04-01","1956-05-01","1956-06-01","1956-07-01","1956-08-01","1956-09-01","1956-10-01","1956-11-01","1956-12-01","1957-01-01","1957-02-01","1957-03-01","1957-04-01","1957-05-01","1957-06-01","1957-07-01","1957-08-01","1957-09-01","1957-10-01","1957-11-01","1957-12-01","1958-01-01","1958-02-01","1958-03-01","1958-04-01","1958-05-01","1958-06-01","1958-07-01","1958-08-01","1958-09-01","1958-10-01","1958-11-01","1958-12-01","1959-01-01","1959-02-01","1959-03-01","1959-04-01","1959-05-01","1959-06-01","1959-07-01","1959-08-01","1959-09-01","1959-10-01","1959-11-01","1959-12-01","1960-01-01","1960-02-01","1960-03-01","1960-04-01","1960-05-01","1960-06-01","1960-07-01","1960-08-01","1960-09-01","1960-10-01","1960-11-01","1960-12-01"]},"type":"data.frame","container":"svg","options":{"x":"date","y":"passengers","curve":"curveCardinal","duration":10000,"xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"crimson","strokeWidth":1.5,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/animatedlinechart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\nfunction tweenDash() {\n  const l = this.getTotalLength(),\n    i = d3.interpolateString(\"0,\" + l, l + \",\" + l);\n  return function (t) {\n    return i(t);\n  };\n}\n\nfunction transition(path) {\n  path\n    .transition()\n    .duration(options.duration)\n    .ease(d3.easeLinear)\n    .attrTween(\"stroke-dasharray\", tweenDash)\n    .on(\"end\", () => {\n      d3.select(this).call(transition);\n    });\n}\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nfunction isItNegative() {\n  if (ymin < 0) {\n    return ymin - (ymin * 10) / 100;\n  } else {\n    return 0;\n  }\n}\n\nlet y = d3\n  .scaleLinear()\n  .domain([isItNegative(), ymax])\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the scatter plot\n\nlet line = d3\n  .line()\n  .x((d) => x(new Date(d[options.x])))\n  .y((d) => y(d[options.y]))\n  .curve(d3[options.curve]);\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"path\")\n  .attr(\"class\", \"line-chart\")\n  .datum(data)\n  .attr(\"fill\", \"none\")\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth)\n  .attr(\"stroke-linejoin\", \"round\")\n  .attr(\"stroke-linecap\", \"round\");\n\nsvg.on(\"click\", function () {\n  d3.select(this).select(\"path.line-chart\").attr(\"d\", line).call(transition);\n});\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="areachart">
<code>areaChart()</code><a class="anchor" aria-label="anchor" href="#areachart"></a>
</h2>
<p><code><a href="../reference/areaChart.html">areaChart()</a></code> works similarly except that instead of a
line you get an area.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. converting AirPassengers to a tidy data frame</span></span>
<span><span class="va">airpassengers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  passengers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span>,</span>
<span>  date<span class="op">=</span> <span class="fu">zoo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/zoo/man/yearmon.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/time.html" class="external-link">time</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 2. plotting the area chart</span></span>
<span><span class="fu"><a href="../reference/areaChart.html">areaChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">airpassengers</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"passengers"</span>,</span>
<span>  fill <span class="op">=</span> <span class="st">"purple"</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"white"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-2931a41253ddcd61f464" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-2931a41253ddcd61f464">{"x":{"data":{"passengers":[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],"date":["1949-01-01","1949-02-01","1949-03-01","1949-04-01","1949-05-01","1949-06-01","1949-07-01","1949-08-01","1949-09-01","1949-10-01","1949-11-01","1949-12-01","1950-01-01","1950-02-01","1950-03-01","1950-04-01","1950-05-01","1950-06-01","1950-07-01","1950-08-01","1950-09-01","1950-10-01","1950-11-01","1950-12-01","1951-01-01","1951-02-01","1951-03-01","1951-04-01","1951-05-01","1951-06-01","1951-07-01","1951-08-01","1951-09-01","1951-10-01","1951-11-01","1951-12-01","1952-01-01","1952-02-01","1952-03-01","1952-04-01","1952-05-01","1952-06-01","1952-07-01","1952-08-01","1952-09-01","1952-10-01","1952-11-01","1952-12-01","1953-01-01","1953-02-01","1953-03-01","1953-04-01","1953-05-01","1953-06-01","1953-07-01","1953-08-01","1953-09-01","1953-10-01","1953-11-01","1953-12-01","1954-01-01","1954-02-01","1954-03-01","1954-04-01","1954-05-01","1954-06-01","1954-07-01","1954-08-01","1954-09-01","1954-10-01","1954-11-01","1954-12-01","1955-01-01","1955-02-01","1955-03-01","1955-04-01","1955-05-01","1955-06-01","1955-07-01","1955-08-01","1955-09-01","1955-10-01","1955-11-01","1955-12-01","1956-01-01","1956-02-01","1956-03-01","1956-04-01","1956-05-01","1956-06-01","1956-07-01","1956-08-01","1956-09-01","1956-10-01","1956-11-01","1956-12-01","1957-01-01","1957-02-01","1957-03-01","1957-04-01","1957-05-01","1957-06-01","1957-07-01","1957-08-01","1957-09-01","1957-10-01","1957-11-01","1957-12-01","1958-01-01","1958-02-01","1958-03-01","1958-04-01","1958-05-01","1958-06-01","1958-07-01","1958-08-01","1958-09-01","1958-10-01","1958-11-01","1958-12-01","1959-01-01","1959-02-01","1959-03-01","1959-04-01","1959-05-01","1959-06-01","1959-07-01","1959-08-01","1959-09-01","1959-10-01","1959-11-01","1959-12-01","1960-01-01","1960-02-01","1960-03-01","1960-04-01","1960-05-01","1960-06-01","1960-07-01","1960-08-01","1960-09-01","1960-10-01","1960-11-01","1960-12-01"]},"type":"data.frame","container":"svg","options":{"x":"date","y":"passengers","fill":"purple","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":null,"strokeWidth":null,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"white","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/areachart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the y variable\nlet ymin = d3.min(data, (d) => d[options.y]);\nlet ymax = d3.max(data, (d) => d[options.y]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\nlet y = d3\n  .scaleLinear()\n  .domain([0, ymax])\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the area chart\n\nlet area = d3\n  .area()\n  .x((d) => x(new Date(d[options.x])))\n  .y0(function () {\n    return y.range()[0];\n  })\n  .y1((d) => y(d[options.y]));\n\n  let clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\n  svg\n    .append(\"clipPath\")\n    .attr(\"id\", clipPathId)\n    .append(\"rect\")\n    .attr(\"x\", margin.left + 1)\n    .attr(\"y\", margin.top)\n    .attr(\"width\", width - margin.left)\n    .attr(\"height\", height - margin.bottom);\n  \nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"path\")\n  .datum(data)\n  .attr(\"fill\", options.fill)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth)\n  .attr(\"stroke-linejoin\", \"round\")\n  .attr(\"stroke-linecap\", \"round\")\n  .attr(\"d\", area);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="areaband">
<code>areaBand()</code><a class="anchor" aria-label="anchor" href="#areaband"></a>
</h2>
<p><code><a href="../reference/areaBand.html">areaBand()</a></code> lets you plot a filled area between two
y-values. For the sake of the example, let’s create an additional column
<code>passengers_upper</code> that has an additional 40 passengers for
each observation:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">airpassengers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  passengers_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span>,</span>
<span>  passengers_upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span> <span class="op">+</span> <span class="fl">40</span>,</span>
<span>  date<span class="op">=</span> <span class="fu">zoo</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/zoo/man/yearmon.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/time.html" class="external-link">time</a></span><span class="op">(</span><span class="va">AirPassengers</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/areaBand.html">areaBand</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">airpassengers</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  yLower <span class="op">=</span> <span class="st">"passengers_lower"</span>,</span>
<span>  yUpper <span class="op">=</span> <span class="st">"passengers_upper"</span>,</span>
<span>  fill <span class="op">=</span> <span class="st">"yellow"</span>,</span>
<span>  stroke <span class="op">=</span> <span class="st">"black"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-853270d7a7ddd5c78dff" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-853270d7a7ddd5c78dff">{"x":{"data":{"passengers_lower":[112,118,132,129,121,135,148,148,136,119,104,118,115,126,141,135,125,149,170,170,158,133,114,140,145,150,178,163,172,178,199,199,184,162,146,166,171,180,193,181,183,218,230,242,209,191,172,194,196,196,236,235,229,243,264,272,237,211,180,201,204,188,235,227,234,264,302,293,259,229,203,229,242,233,267,269,270,315,364,347,312,274,237,278,284,277,317,313,318,374,413,405,355,306,271,306,315,301,356,348,355,422,465,467,404,347,305,336,340,318,362,348,363,435,491,505,404,359,310,337,360,342,406,396,420,472,548,559,463,407,362,405,417,391,419,461,472,535,622,606,508,461,390,432],"passengers_upper":[152,158,172,169,161,175,188,188,176,159,144,158,155,166,181,175,165,189,210,210,198,173,154,180,185,190,218,203,212,218,239,239,224,202,186,206,211,220,233,221,223,258,270,282,249,231,212,234,236,236,276,275,269,283,304,312,277,251,220,241,244,228,275,267,274,304,342,333,299,269,243,269,282,273,307,309,310,355,404,387,352,314,277,318,324,317,357,353,358,414,453,445,395,346,311,346,355,341,396,388,395,462,505,507,444,387,345,376,380,358,402,388,403,475,531,545,444,399,350,377,400,382,446,436,460,512,588,599,503,447,402,445,457,431,459,501,512,575,662,646,548,501,430,472],"date":["1949-01-01","1949-02-01","1949-03-01","1949-04-01","1949-05-01","1949-06-01","1949-07-01","1949-08-01","1949-09-01","1949-10-01","1949-11-01","1949-12-01","1950-01-01","1950-02-01","1950-03-01","1950-04-01","1950-05-01","1950-06-01","1950-07-01","1950-08-01","1950-09-01","1950-10-01","1950-11-01","1950-12-01","1951-01-01","1951-02-01","1951-03-01","1951-04-01","1951-05-01","1951-06-01","1951-07-01","1951-08-01","1951-09-01","1951-10-01","1951-11-01","1951-12-01","1952-01-01","1952-02-01","1952-03-01","1952-04-01","1952-05-01","1952-06-01","1952-07-01","1952-08-01","1952-09-01","1952-10-01","1952-11-01","1952-12-01","1953-01-01","1953-02-01","1953-03-01","1953-04-01","1953-05-01","1953-06-01","1953-07-01","1953-08-01","1953-09-01","1953-10-01","1953-11-01","1953-12-01","1954-01-01","1954-02-01","1954-03-01","1954-04-01","1954-05-01","1954-06-01","1954-07-01","1954-08-01","1954-09-01","1954-10-01","1954-11-01","1954-12-01","1955-01-01","1955-02-01","1955-03-01","1955-04-01","1955-05-01","1955-06-01","1955-07-01","1955-08-01","1955-09-01","1955-10-01","1955-11-01","1955-12-01","1956-01-01","1956-02-01","1956-03-01","1956-04-01","1956-05-01","1956-06-01","1956-07-01","1956-08-01","1956-09-01","1956-10-01","1956-11-01","1956-12-01","1957-01-01","1957-02-01","1957-03-01","1957-04-01","1957-05-01","1957-06-01","1957-07-01","1957-08-01","1957-09-01","1957-10-01","1957-11-01","1957-12-01","1958-01-01","1958-02-01","1958-03-01","1958-04-01","1958-05-01","1958-06-01","1958-07-01","1958-08-01","1958-09-01","1958-10-01","1958-11-01","1958-12-01","1959-01-01","1959-02-01","1959-03-01","1959-04-01","1959-05-01","1959-06-01","1959-07-01","1959-08-01","1959-09-01","1959-10-01","1959-11-01","1959-12-01","1960-01-01","1960-02-01","1960-03-01","1960-04-01","1960-05-01","1960-06-01","1960-07-01","1960-08-01","1960-09-01","1960-10-01","1960-11-01","1960-12-01"]},"type":"data.frame","container":"svg","options":{"x":"date","yLower":"passengers_lower","yUpper":"passengers_upper","fill":"yellow","xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","stroke":"black","strokeWidth":null,"width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black"},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/areaband.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 30,\n  bottom: 40,\n};\n\n// Setting the min and max of the y variable\nlet ymax = d3.max(data, (d) => d[options.yUpper]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\nlet y = d3\n  .scaleLinear()\n  .domain([0, ymax])\n  .range([height - margin.top, margin.bottom])\n  .nice();\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 0 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the scatter plot\n\nlet areaBand = d3\n  .area()\n  .x((d) => x(new Date(d[options.x])))\n  .y0((d) => y(d[options.yLower]))\n  .y1((d) => y(d[options.yUpper]));\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\n  svg\n    .append(\"clipPath\")\n    .attr(\"id\", clipPathId)\n    .append(\"rect\")\n    .attr(\"x\", margin.left + 1)\n    .attr(\"y\", margin.top)\n    .attr(\"width\", width - margin.left)\n    .attr(\"height\", height - margin.bottom);\n  \nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"path\")\n  .datum(data)\n  .attr(\"fill\", options.fill)\n  .attr(\"stroke\", options.stroke)\n  .attr(\"stroke-width\", options.strokeWidth)\n  .attr(\"stroke-linejoin\", \"round\")\n  .attr(\"stroke-linecap\", \"round\")\n  .attr(\"d\", areaBand);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="stackedareachart">
<code>stackedAreaChart()</code><a class="anchor" aria-label="anchor" href="#stackedareachart"></a>
</h2>
<p>This function allows you to create a stacked area chart. You need two
components:</p>
<ul>
<li>A data frame in wide format (see an example below). If it’s in wide
format, you can still use <code>pivot_wider()</code> from the
<code>tidyr</code> package to make wider.</li>
<li>A date variable in <code>yyyy-mm-dd</code> format that will plotted
in the x-axis.</li>
</ul>
<p>Let’s work with the following data frame (shortened) provided by <a href="https://observablehq.com/@d3/stacked-area-chart" class="external-link">Mike Bostock in
his stacked area chart example</a>:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"2000-01-01"</span>, <span class="st">"2000-02-01"</span>, <span class="st">"2000-03-01"</span>, <span class="st">"2000-04-01"</span>,</span>
<span>    <span class="st">"2000-05-01"</span>, <span class="st">"2000-06-01"</span>, <span class="st">"2000-07-01"</span>,</span>
<span>    <span class="st">"2000-08-01"</span>, <span class="st">"2000-09-01"</span>, <span class="st">"2000-10-01"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  Trade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">2000</span>,<span class="fl">1023</span>, <span class="fl">983</span>, <span class="fl">2793</span>, <span class="fl">1821</span>, <span class="fl">1837</span>, <span class="fl">1792</span>, <span class="fl">1853</span>, <span class="fl">791</span>, <span class="fl">739</span></span>
<span>  <span class="op">)</span>,</span>
<span>  Manufacturing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">734</span>, <span class="fl">694</span>, <span class="fl">739</span>, <span class="fl">736</span>, <span class="fl">685</span>, <span class="fl">621</span>, <span class="fl">708</span>, <span class="fl">685</span>, <span class="fl">667</span>, <span class="fl">693</span></span>
<span>  <span class="op">)</span>,</span>
<span>  Leisure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">1782</span>, <span class="fl">1779</span>, <span class="fl">1789</span>, <span class="fl">658</span>, <span class="fl">675</span>, <span class="fl">833</span>, <span class="fl">786</span>, <span class="fl">675</span>, <span class="fl">636</span>, <span class="fl">691</span></span>
<span>  <span class="op">)</span>,</span>
<span>  Agriculture <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fl">655</span>, <span class="fl">587</span>,<span class="fl">623</span>, <span class="fl">517</span>, <span class="fl">561</span>, <span class="fl">2545</span>, <span class="fl">636</span>, <span class="fl">584</span>, <span class="fl">559</span>, <span class="fl">2504</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span></span>
<span><span class="co">#&gt;          date Trade Manufacturing Leisure Agriculture</span></span>
<span><span class="co">#&gt; 1  2000-01-01  2000           734    1782         655</span></span>
<span><span class="co">#&gt; 2  2000-02-01  1023           694    1779         587</span></span>
<span><span class="co">#&gt; 3  2000-03-01   983           739    1789         623</span></span>
<span><span class="co">#&gt; 4  2000-04-01  2793           736     658         517</span></span>
<span><span class="co">#&gt; 5  2000-05-01  1821           685     675         561</span></span>
<span><span class="co">#&gt; 6  2000-06-01  1837           621     833        2545</span></span>
<span><span class="co">#&gt; 7  2000-07-01  1792           708     786         636</span></span>
<span><span class="co">#&gt; 8  2000-08-01  1853           685     675         584</span></span>
<span><span class="co">#&gt; 9  2000-09-01   791           667     636         559</span></span>
<span><span class="co">#&gt; 10 2000-10-01   739           693     691        2504</span></span></code></pre></div>
<p>Note that when running <code><a href="../reference/stackedAreaChart.html">stackedAreaChart()</a></code> all the
variables available within the considered data frame will be plotted. If
you want to restrict the plotting to only specific variables, just drop
the unneeded columns:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/stackedAreaChart.html">stackedAreaChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  legendTextSize <span class="op">=</span> <span class="fl">14</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-4211ee8e5b9f7bea17a6" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-4211ee8e5b9f7bea17a6">{"x":{"data":{"date":["2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01"],"Trade":[2000,1023,983,2793,1821,1837,1792,1853,791,739],"Manufacturing":[734,694,739,736,685,621,708,685,667,693],"Leisure":[1782,1779,1789,658,675,833,786,675,636,691],"Agriculture":[655,587,623,517,561,2545,636,584,559,2504]},"type":"data.frame","container":"svg","options":{"x":"date","colorCategory":"Category10","curve":"curveLinear","stroke":null,"strokeWidth":1.5,"xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"#CAD0D3","opacity":1,"axisCol":"black","columnNames":["Trade","Manufacturing","Leisure","Agriculture"],"legendBoxSize":18,"legendTextSize":14},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/stackedareachart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 120,\n  bottom: 40,\n};\n\nlet dataColumns = options.columnNames;\n\nlet color = d3\n  .scaleOrdinal()\n  .domain(dataColumns)\n  .range(d3[\"scheme\" + options.colorCategory]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nlet series = d3.stack().keys(dataColumns)(data);\n\nlet y = d3\n  .scaleLinear()\n  .domain([0, d3.max(series, (d) => d3.max(d, (d) => d[1]))])\n  .range([height - margin.top, margin.bottom]);\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the area chart\n\n// first we need a clipPath\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nlet area = d3\n  .area()\n  .x((d) => x(new Date(d.data[options.x])))\n  .y0((d) => y(d[0]))\n  .y1((d) => y(d[1]))\n  .curve(d3[options.curve]);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"g\")\n  .selectAll(\"path\")\n  .data(series)\n  .enter()\n  .append(\"path\")\n  .attr(\"fill\", ({ key }) => color(key))\n  .attr(\"d\", area)\n  .style(\"stroke\", options.stroke)\n  .style(\"stroke-width\", options.strokeWidth)\n  .append(\"title\")\n  .text(({ key }) => key);\n\n// Adding legends\n\nlet size = options.legendBoxSize;\nsvg\n  .selectAll(\"myrectangles\")\n  .data(dataColumns.reverse())\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", width - margin.right + 5)\n  .attr(\"y\", (d, i) => margin.top + i * (size + 5))\n  .attr(\"width\", size)\n  .attr(\"height\", size)\n  .style(\"fill\", (d) => color(d));\n\nsvg\n  .selectAll(\"mylabels\")\n  .data(dataColumns)\n  .enter()\n  .append(\"text\")\n  .attr(\"x\", width - margin.right + size * 1.5)\n  .attr(\"y\", (d, i) => margin.top + i * (size + 5) + size / 2 + 1)\n  .style(\"fill\", (d) => color(d))\n  .text((d) => d)\n  .attr(\"text-anchor\", \"left\")\n  .style(\"alignment-baseline\", \"middle\")\n  .style(\"fill\", options.axisCol)\n  .style(\"font-size\", `${options.legendTextSize}px`);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>You can modify the color scheme using the <code>colorCategory</code>
parameter:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/stackedAreaChart.html">stackedAreaChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  legendTextSize <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  curve <span class="op">=</span> <span class="st">"curveCardinal"</span>,</span>
<span>  colorCategory <span class="op">=</span> <span class="st">"Accent"</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  stroke <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  strokeWidth <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-59344719eea48f3263a0" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-59344719eea48f3263a0">{"x":{"data":{"date":["2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01"],"Trade":[2000,1023,983,2793,1821,1837,1792,1853,791,739],"Manufacturing":[734,694,739,736,685,621,708,685,667,693],"Leisure":[1782,1779,1789,658,675,833,786,675,636,691],"Agriculture":[655,587,623,517,561,2545,636,584,559,2504]},"type":"data.frame","container":"svg","options":{"x":"date","colorCategory":"Accent","curve":"curveCardinal","stroke":"black","strokeWidth":1,"xticks":null,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"white","opacity":1,"axisCol":"black","columnNames":["Trade","Manufacturing","Leisure","Agriculture"],"legendBoxSize":18,"legendTextSize":14},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/stackedareachart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 120,\n  bottom: 40,\n};\n\nlet dataColumns = options.columnNames;\n\nlet color = d3\n  .scaleOrdinal()\n  .domain(dataColumns)\n  .range(d3[\"scheme\" + options.colorCategory]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nlet series = d3.stack().keys(dataColumns)(data);\n\nlet y = d3\n  .scaleLinear()\n  .domain([0, d3.max(series, (d) => d3.max(d, (d) => d[1]))])\n  .range([height - margin.top, margin.bottom]);\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the area chart\n\n// first we need a clipPath\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nlet area = d3\n  .area()\n  .x((d) => x(new Date(d.data[options.x])))\n  .y0((d) => y(d[0]))\n  .y1((d) => y(d[1]))\n  .curve(d3[options.curve]);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"g\")\n  .selectAll(\"path\")\n  .data(series)\n  .enter()\n  .append(\"path\")\n  .attr(\"fill\", ({ key }) => color(key))\n  .attr(\"d\", area)\n  .style(\"stroke\", options.stroke)\n  .style(\"stroke-width\", options.strokeWidth)\n  .append(\"title\")\n  .text(({ key }) => key);\n\n// Adding legends\n\nlet size = options.legendBoxSize;\nsvg\n  .selectAll(\"myrectangles\")\n  .data(dataColumns.reverse())\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", width - margin.right + 5)\n  .attr(\"y\", (d, i) => margin.top + i * (size + 5))\n  .attr(\"width\", size)\n  .attr(\"height\", size)\n  .style(\"fill\", (d) => color(d));\n\nsvg\n  .selectAll(\"mylabels\")\n  .data(dataColumns)\n  .enter()\n  .append(\"text\")\n  .attr(\"x\", width - margin.right + size * 1.5)\n  .attr(\"y\", (d, i) => margin.top + i * (size + 5) + size / 2 + 1)\n  .style(\"fill\", (d) => color(d))\n  .text((d) => d)\n  .attr(\"text-anchor\", \"left\")\n  .style(\"alignment-baseline\", \"middle\")\n  .style(\"fill\", options.axisCol)\n  .style(\"font-size\", `${options.legendTextSize}px`);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/stackedAreaChart.html">stackedAreaChart</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">data</span>,</span>
<span>  x <span class="op">=</span> <span class="st">"date"</span>,</span>
<span>  legendTextSize <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  curve <span class="op">=</span> <span class="st">"curveBasis"</span>,</span>
<span>  colorCategory <span class="op">=</span> <span class="st">"Set3"</span>,</span>
<span>  bgcol <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  axisCol <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  xticks <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  stroke <span class="op">=</span> <span class="st">"black"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-1c18eca156cc321e99f7" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-1c18eca156cc321e99f7">{"x":{"data":{"date":["2000-01-01","2000-02-01","2000-03-01","2000-04-01","2000-05-01","2000-06-01","2000-07-01","2000-08-01","2000-09-01","2000-10-01"],"Trade":[2000,1023,983,2793,1821,1837,1792,1853,791,739],"Manufacturing":[734,694,739,736,685,621,708,685,667,693],"Leisure":[1782,1779,1789,658,675,833,786,675,636,691],"Agriculture":[655,587,623,517,561,2545,636,584,559,2504]},"type":"data.frame","container":"svg","options":{"x":"date","colorCategory":"Set3","curve":"curveBasis","stroke":"black","strokeWidth":1.5,"xticks":4,"yticks":null,"xtitle":null,"ytitle":null,"title":null,"font":"Verdana, Geneva, Tahoma, sans-serif","width":null,"height":null,"xtitleFontSize":16,"ytitleFontSize":16,"titleFontSize":22,"bgcol":"black","opacity":1,"axisCol":"white","columnNames":["Trade","Manufacturing","Leisure","Agriculture"],"legendBoxSize":18,"legendTextSize":14},"script":"var d3Script = function(d3, r2d3, data, svg, width, height, options, theme, console) {\nthis.d3 = d3;\n\nsvg = d3.select(svg.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/stackedareachart.js */\n// Setting the margin object\nmargin = {\n  top: 40,\n  left: 50,\n  right: 120,\n  bottom: 40,\n};\n\nlet dataColumns = options.columnNames;\n\nlet color = d3\n  .scaleOrdinal()\n  .domain(dataColumns)\n  .range(d3[\"scheme\" + options.colorCategory]);\n\n// Setting the scale of the x variable\n\nlet x = d3\n  .scaleUtc()\n  .domain(d3.extent(data, (d) => new Date(d[options.x])))\n  .range([margin.left, width - margin.right]);\n\n// Setting the scale of the y variable\n\nlet series = d3.stack().keys(dataColumns)(data);\n\nlet y = d3\n  .scaleLinear()\n  .domain([0, d3.max(series, (d) => d3.max(d, (d) => d[1]))])\n  .range([height - margin.top, margin.bottom]);\n\n// Setting the x-axis\nxS = d3.axisBottom(x).ticks(options.xticks);\n\n// Setting the y-axis\nyS = d3.axisLeft(y).ticks(options.yticks);\n\n// Rendering the x-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\n  .call(xS);\n\n// Rendering the y-axis\nsvg\n  .append(\"g\")\n  .attr(\"transform\", \"translate(\" + margin.left + \", 0)\")\n  .call(yS);\n\n// Rendering the x-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + width / 2 + \" ,\" + (height - 5) + \")\")\n  .attr(\"dx\", \"0em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-family\", options.font)\n  .style(\"font-size\", options.xtitleFontSize)\n  .text(options.xtitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the y-axis title\nsvg\n  .append(\"text\")\n  .attr(\"transform\", \"translate(\" + 2 + \" ,\" + height / 2 + \") rotate(-90)\")\n  .attr(\"dy\", \"0.8em\")\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle)\n  .style(\"fill\", options.axisCol);\n\n// Rendering the chart title\n\nsvg\n  .append(\"text\")\n  .attr(\"x\", width / 2)\n  .attr(\"y\", margin.top / 2 + 5)\n  .attr(\"text-anchor\", \"middle\")\n  .attr(\"dx\", \"0em\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title)\n  .style(\"fill\", options.axisCol);\n\n// Modifying the color of the ticks and labels\nsvg.selectAll(\".tick line\").attr(\"stroke\", options.axisCol);\nsvg.selectAll(\".tick text\").style(\"fill\", options.axisCol);\nsvg.selectAll(\"path.domain\").attr(\"stroke\", options.axisCol);\n\n// Rendering the area chart\n\n// first we need a clipPath\n\nlet clipPathId = \"chart-area\" + Math.floor(Math.random() * 100);\n\nsvg\n  .append(\"clipPath\")\n  .attr(\"id\", clipPathId)\n  .append(\"rect\")\n  .attr(\"x\", margin.left + 1)\n  .attr(\"y\", margin.top)\n  .attr(\"width\", width - margin.left)\n  .attr(\"height\", height - margin.bottom);\n\nlet area = d3\n  .area()\n  .x((d) => x(new Date(d.data[options.x])))\n  .y0((d) => y(d[0]))\n  .y1((d) => y(d[1]))\n  .curve(d3[options.curve]);\n\nsvg\n  .attr(\"viewBox\", [0, 0, width, height])\n  .style(\"background-color\", options.bgcol)\n  .append(\"g\")\n  .attr(\"clip-path\", \"url(#\" + clipPathId + \")\")\n  .append(\"g\")\n  .selectAll(\"path\")\n  .data(series)\n  .enter()\n  .append(\"path\")\n  .attr(\"fill\", ({ key }) => color(key))\n  .attr(\"d\", area)\n  .style(\"stroke\", options.stroke)\n  .style(\"stroke-width\", options.strokeWidth)\n  .append(\"title\")\n  .text(({ key }) => key);\n\n// Adding legends\n\nlet size = options.legendBoxSize;\nsvg\n  .selectAll(\"myrectangles\")\n  .data(dataColumns.reverse())\n  .enter()\n  .append(\"rect\")\n  .attr(\"x\", width - margin.right + 5)\n  .attr(\"y\", (d, i) => margin.top + i * (size + 5))\n  .attr(\"width\", size)\n  .attr(\"height\", size)\n  .style(\"fill\", (d) => color(d));\n\nsvg\n  .selectAll(\"mylabels\")\n  .data(dataColumns)\n  .enter()\n  .append(\"text\")\n  .attr(\"x\", width - margin.right + size * 1.5)\n  .attr(\"y\", (d, i) => margin.top + i * (size + 5) + size / 2 + 1)\n  .style(\"fill\", (d) => color(d))\n  .text((d) => d)\n  .attr(\"text-anchor\", \"left\")\n  .style(\"alignment-baseline\", \"middle\")\n  .style(\"fill\", options.axisCol)\n  .style(\"font-size\", `${options.legendTextSize}px`);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>You can find list of D3 categorical color schemes <a href="https://github.com/d3/d3-scale-chromatic#categorical" class="external-link">here</a></p>
<p>Finally, if you hover over the chart you’ll notice a tooltip that
identified the different area categories.</p>
</div>
<div class="section level2">
<h2 id="barchartrace">
<code>barChartRace()</code><a class="anchor" aria-label="anchor" href="#barchartrace"></a>
</h2>
<p>This function allows you to create an animated bar chart race.
<code><a href="../reference/barChartRace.html">barChartRace()</a></code> is similar to <code><a href="../reference/barChart.html">barChart()</a></code> but
takes a third variable mapped to the time dimension, with options for
styling transitions.</p>
<p>Let’s make a bar chart race of population growth among various
countries using a subset of the <code>gapminder</code> dataset from the
<a href="https://github.com/jennybc/gapminder" class="external-link">{gapminder}
package</a>:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_subset</span> <span class="op">&lt;-</span> <span class="fu">gapminder</span><span class="fu">::</span><span class="va"><a href="https://jennybc.github.io/gapminder/reference/gapminder.html" class="external-link">gapminder</a></span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">country</span>, <span class="va">year</span>, <span class="va">pop</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">country</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Japan"</span>, <span class="st">"Mexico"</span>, <span class="st">"Germany"</span>, <span class="st">"Brazil"</span>, <span class="st">"Philippines"</span>, <span class="st">"Vietnam"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pop <span class="op">=</span> <span class="va">pop</span><span class="op">/</span><span class="fl">1e6</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">gapminder_subset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#&gt;    year       pop     country</span></span>
<span><span class="co">#&gt; 1  2007  91.07729 Philippines</span></span>
<span><span class="co">#&gt; 2  1997  76.04900     Vietnam</span></span>
<span><span class="co">#&gt; 3  1972 107.18827       Japan</span></span>
<span><span class="co">#&gt; 4  1967  39.46391     Vietnam</span></span>
<span><span class="co">#&gt; 5  1952  30.14432      Mexico</span></span>
<span><span class="co">#&gt; 6  1987 142.93808      Brazil</span></span>
<span><span class="co">#&gt; 7  1997 168.54672      Brazil</span></span>
<span><span class="co">#&gt; 8  1962  41.12148      Mexico</span></span>
<span><span class="co">#&gt; 9  1952  69.14595     Germany</span></span>
<span><span class="co">#&gt; 10 1957  91.56301       Japan</span></span></code></pre></div>
<p>In this example, we simply pass call <code><a href="../reference/barChartRace.html">barChartRace()</a></code> like
<code><a href="../reference/barChart.html">barChart()</a></code>, but with an additional variable mapped to the
time dimension specified with <code>time = year</code>:</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_subset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/barChartRace.html">barChartRace</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"pop"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    time <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    ytitle <span class="op">=</span> <span class="st">"Country"</span>,</span>
<span>    xtitle <span class="op">=</span> <span class="st">"Population (in millions)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Bar chart race of country populations"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-82903e20e82fe9e96ad4" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-82903e20e82fe9e96ad4">{"x":{"data":{"year":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"pop":[56.60256,65.551171,76.03939,88.049823,100.840058,114.313951,128.962939,142.938076,155.975974,168.546719,179.914212,190.010647,69.14595199999999,71.019069,73.73911699999999,76.368453,78.717088,78.16077300000001,78.335266,77.718298,80.597764,82.011073,82.35067100000001,82.40099600000001,86.459025,91.56300899999999,95.831757,100.825279,107.188273,113.872473,118.454974,122.091325,124.329269,125.956499,127.065841,127.467972,30.144317,35.015548,41.121485,47.995559,55.984294,63.759976,71.64090400000001,80.12249199999999,88.11103,95.895146,102.479927,108.700891,22.438691,26.072194,30.325264,35.3566,40.850141,46.850962,53.456774,60.017788,67.185766,75.01298800000001,82.995088,91.077287,26.246839,28.998543,33.79614,39.46391,44.655014,50.533506,56.142181,62.826491,69.94072799999999,76.048996,80.908147,85.262356],"country":["Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam"]},"type":"data.frame","container":"div","options":{"x":"pop","y":"country","time":"year","ease":"Linear","frameDur":500,"transitionDur":500,"colorCategory":"Accent","sort":"descending","paddingWidth":0.1,"xFontSize":10,"yFontSize":10,"xticks":10,"xtitle":"Population (in millions)","ytitle":"Country","xtitleFontSize":16,"ytitleFontSize":14,"title":"Bar chart race of country populations","titleFontSize":22,"stroke":"black","strokeWidth":null,"font":"Verdana, Geneva, Tahoma, sans-serif","bgcol":"#CAD0D3","panelcol":"#EBEBEBFF","xgridlinecol":"white","opacity":1,"timeLabel":true,"timeLabelOpts":{"size":32,"prefix":"","suffix":"","xOffset":0.5,"yOffset":1}},"script":"var d3Script = function(d3, r2d3, data, div, width, height, options, theme, console) {\nthis.d3 = d3;\n\ndiv = d3.select(div.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/barchartrace.js */\n// set plot dimensions\nconst dims = {\n  width: width,\n  height: height,\n  margin: { t: 40, r: 30, b: 50, l: 0 },\n};\n\n// draw svg canvas\nconst svg = div\n  .append(\"svg\")\n  .datum(data)\n  .attr(\"width\", dims.width)\n  .attr(\"height\", dims.height)\n  .call((svg) => {\n    svg\n      .append(\"rect\")\n      .attr(\"width\", dims.width)\n      .attr(\"height\", dims.height)\n      .attr(\"fill\", options.bgcol);\n  });\n\n// panel\n\n//// adjust left plot margin to fit y-axis text (TODO this doesnt work)\nconst longestLabel = data\n  .map((d) => d[options.y])\n  .sort((a, b) => b.length - a.length);\nconst longestText = svg.append(\"text\").text(longestLabel[0]);\ndims.margin.l = longestText.node().getComputedTextLength() * 1.1;\nlongestText.remove();\n\n//// compute panel dims\ndims.panel = {\n  width: width - dims.margin.r - dims.margin.l,\n  height: dims.height - dims.margin.t - dims.margin.b,\n};\n\n//// draw panel\nconst panel = svg\n  .append(\"g\")\n  .attr(\"transform\", `translate(${dims.margin.l}, ${dims.margin.t})`)\n  .call((g) => {\n    g.append(\"rect\")\n      .attr(\"width\", dims.panel.width)\n      .attr(\"height\", dims.panel.height)\n      .attr(\"fill\", options.panelcol);\n  });\n\n// init static elements\n\nconst title = svg\n  .append(\"text\")\n  .attr(\"x\", dims.width / 2)\n  .attr(\"y\", dims.margin.t / 1.5)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title);\n\nconst xGridLines = panel\n  .append(\"g\")\n  .attr(\"class\", \"x-gridlines\")\n  .attr(\"transform\", `translate(0, ${dims.panel.height})`);\n\nconst layerBar = panel.append(\"g\").attr(\"class\", \"layer-bar\");\n\nlet xAxis = panel\n  .append(\"g\")\n  .attr(\"class\", \"x-axis\")\n  .attr(\"transform\", `translate(0, ${dims.panel.height})`)\n  .style(\"font-size\", options.xFontSize)\n  .style(\"font-family\", options.font);\n\nlet yAxis = panel\n  .append(\"g\")\n  .attr(\"class\", \"y-axis\")\n  .style(\"font-size\", options.yFontSize)\n  .style(\"font-family\", options.font);\n\nconst xAxisTitle = xAxis\n  .append(\"text\")\n  .attr(\"x\", dims.panel.width * 0.5)\n  .attr(\"y\", dims.margin.b * 0.8)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"fill\", \"black\")\n  .style(\"font-size\", options.xtitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.xtitle);\n\nconst yAxisTitle = yAxis\n  .append(\"text\")\n  .attr(\"y\", -dims.margin.t * 0.3)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"fill\", \"black\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle);\n\nconst timeLabel = panel.append(\"g\").attr(\"class\", \"layer-timelabel\");\nconst timeLabelText = timeLabel\n  .append(\"text\")\n  .style(\"text-anchor\", \"end\")\n  .style(\"font-size\", options.timeLabelOpts.size)\n  .style(\"font-family\", options.font);\n\n// initialize scales\n\nconst xScale = d3.scaleLinear().range([0, dims.panel.width]);\n\nconst yScale = d3.scaleBand().range([dims.panel.height, 0]);\n\nconst colorScale = d3.scaleOrdinal();\n\n// animating function\nfunction update(frame, init = false) {\n  const t = svg\n    .transition()\n    .ease(d3[\"ease\" + options.ease])\n    .duration(options.transitionDur);\n\n  // setup data\n  const frameData = data.filter((d) => d[options.time] == frame);\n\n  frameData.sort(function (a, b) {\n    return d3[options.sort](a[options.x], b[options.x]);\n  });\n\n  // update scales\n  xScale.domain([0, d3.max(data, (d) => d[options.x]) * 1.05]).nice();\n  //// y and color scale updated here for now for the\n  //// future possibility of bars entering from out-of-frame\n  const yLabels = [...new Set(frameData.map((d) => d[options.y]))];\n  yScale\n    .domain(d3.reverse(yLabels))\n    .paddingInner(options.paddingWidth)\n    .paddingOuter(options.paddingWidth);\n  colorScale\n    .domain(yLabels)\n    .range(d3[\"scheme\" + options.colorCategory].slice(0, yLabels.length));\n\n  // draw bars\n\n  layerBar\n    .selectAll(\".bar\")\n    .data(frameData, (d) => d[options.y])\n    .join(\n      (enter) => {\n        enter\n          .append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"width\", (d) => xScale(d[options.x]))\n          .attr(\"height\", yScale.bandwidth())\n          .attr(\"y\", (d) => yScale(d[options.y]))\n          .attr(\"fill\", (d) => colorScale(d[options.y]))\n          .style(\"opacity\", options.opacity)\n          .style(\"stroke\", options.stroke)\n          .style(\"stroke-width\", options.strokeWidth);\n      },\n      (update) => {\n        update.call((update) =>\n          update\n            .transition(t)\n            .attr(\"width\", (d) => xScale(d[options.x]))\n            .attr(\"y\", (d) => yScale(d[options.y]))\n        );\n      }\n    );\n\n  // draw axes\n  xGridLines\n    .call(\n      d3.axisBottom(xScale).ticks(options.xticks).tickSize(-dims.panel.height)\n    )\n    .call((g) =>\n      g\n        .selectAll(\"line\")\n        .style(\"stroke\", options.xgridlinecol)\n        .style(\"stroke-width\", 2)\n    )\n    .call((g) => {\n      g.selectAll(\"path\").remove();\n      g.selectAll(\"text\").remove();\n    });\n  xAxis.call(d3.axisBottom(xScale).ticks(options.xticks));\n\n  if (init) {\n    yAxis.call(d3.axisLeft(yScale));\n  } else {\n    yAxis.call((g) => g.transition(t).call(d3.axisLeft(yScale)));\n  }\n\n  // label the frame\n  if (options.timeLabel) {\n    timeLabelText.text(\n      options.timeLabelOpts.prefix + frame + options.timeLabelOpts.suffix\n    );\n\n    const timeLabelDims = timeLabelText.node().getBBox();\n\n    timeLabel.attr(\n      \"transform\",\n      `translate(\n        ${\n          dims.panel.width - timeLabelDims.width * options.timeLabelOpts.xOffset\n        },\n        ${\n          dims.panel.height -\n          timeLabelDims.height * options.timeLabelOpts.yOffset\n        }\n      )`\n    );\n  }\n}\n\n// TODO format time and sort + expose method as parameter\nconst timeSet = [...new Set(data.map((d) => d[options.time]))];\n\nupdate(timeSet[0], (init = true));\nvar counter = 1;\nsetInterval(() => {\n  update(timeSet[counter % timeSet.length]);\n  counter++;\n}, options.frameDur + options.transitionDur);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>You can also stylize transitions with the <code>frameDur</code>,
<code>transitionDur</code>, and <code>ease</code> arguments. For
example, setting the time spent pausing on each frame to zero with
<code>frameDur = 0</code> will create a smooth animation:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_subset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/barChartRace.html">barChartRace</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"pop"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    time <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    transitionDur <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>    frameDur <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    ytitle <span class="op">=</span> <span class="st">"Country"</span>,</span>
<span>    xtitle <span class="op">=</span> <span class="st">"Population (in millions)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Bar chart race of country populations"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-91e95a97e1d3447d8bab" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-91e95a97e1d3447d8bab">{"x":{"data":{"year":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"pop":[56.60256,65.551171,76.03939,88.049823,100.840058,114.313951,128.962939,142.938076,155.975974,168.546719,179.914212,190.010647,69.14595199999999,71.019069,73.73911699999999,76.368453,78.717088,78.16077300000001,78.335266,77.718298,80.597764,82.011073,82.35067100000001,82.40099600000001,86.459025,91.56300899999999,95.831757,100.825279,107.188273,113.872473,118.454974,122.091325,124.329269,125.956499,127.065841,127.467972,30.144317,35.015548,41.121485,47.995559,55.984294,63.759976,71.64090400000001,80.12249199999999,88.11103,95.895146,102.479927,108.700891,22.438691,26.072194,30.325264,35.3566,40.850141,46.850962,53.456774,60.017788,67.185766,75.01298800000001,82.995088,91.077287,26.246839,28.998543,33.79614,39.46391,44.655014,50.533506,56.142181,62.826491,69.94072799999999,76.048996,80.908147,85.262356],"country":["Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam"]},"type":"data.frame","container":"div","options":{"x":"pop","y":"country","time":"year","ease":"Linear","frameDur":0,"transitionDur":1000,"colorCategory":"Accent","sort":"descending","paddingWidth":0.1,"xFontSize":10,"yFontSize":10,"xticks":10,"xtitle":"Population (in millions)","ytitle":"Country","xtitleFontSize":16,"ytitleFontSize":14,"title":"Bar chart race of country populations","titleFontSize":22,"stroke":"black","strokeWidth":null,"font":"Verdana, Geneva, Tahoma, sans-serif","bgcol":"#CAD0D3","panelcol":"#EBEBEBFF","xgridlinecol":"white","opacity":1,"timeLabel":true,"timeLabelOpts":{"size":32,"prefix":"","suffix":"","xOffset":0.5,"yOffset":1}},"script":"var d3Script = function(d3, r2d3, data, div, width, height, options, theme, console) {\nthis.d3 = d3;\n\ndiv = d3.select(div.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/barchartrace.js */\n// set plot dimensions\nconst dims = {\n  width: width,\n  height: height,\n  margin: { t: 40, r: 30, b: 50, l: 0 },\n};\n\n// draw svg canvas\nconst svg = div\n  .append(\"svg\")\n  .datum(data)\n  .attr(\"width\", dims.width)\n  .attr(\"height\", dims.height)\n  .call((svg) => {\n    svg\n      .append(\"rect\")\n      .attr(\"width\", dims.width)\n      .attr(\"height\", dims.height)\n      .attr(\"fill\", options.bgcol);\n  });\n\n// panel\n\n//// adjust left plot margin to fit y-axis text (TODO this doesnt work)\nconst longestLabel = data\n  .map((d) => d[options.y])\n  .sort((a, b) => b.length - a.length);\nconst longestText = svg.append(\"text\").text(longestLabel[0]);\ndims.margin.l = longestText.node().getComputedTextLength() * 1.1;\nlongestText.remove();\n\n//// compute panel dims\ndims.panel = {\n  width: width - dims.margin.r - dims.margin.l,\n  height: dims.height - dims.margin.t - dims.margin.b,\n};\n\n//// draw panel\nconst panel = svg\n  .append(\"g\")\n  .attr(\"transform\", `translate(${dims.margin.l}, ${dims.margin.t})`)\n  .call((g) => {\n    g.append(\"rect\")\n      .attr(\"width\", dims.panel.width)\n      .attr(\"height\", dims.panel.height)\n      .attr(\"fill\", options.panelcol);\n  });\n\n// init static elements\n\nconst title = svg\n  .append(\"text\")\n  .attr(\"x\", dims.width / 2)\n  .attr(\"y\", dims.margin.t / 1.5)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title);\n\nconst xGridLines = panel\n  .append(\"g\")\n  .attr(\"class\", \"x-gridlines\")\n  .attr(\"transform\", `translate(0, ${dims.panel.height})`);\n\nconst layerBar = panel.append(\"g\").attr(\"class\", \"layer-bar\");\n\nlet xAxis = panel\n  .append(\"g\")\n  .attr(\"class\", \"x-axis\")\n  .attr(\"transform\", `translate(0, ${dims.panel.height})`)\n  .style(\"font-size\", options.xFontSize)\n  .style(\"font-family\", options.font);\n\nlet yAxis = panel\n  .append(\"g\")\n  .attr(\"class\", \"y-axis\")\n  .style(\"font-size\", options.yFontSize)\n  .style(\"font-family\", options.font);\n\nconst xAxisTitle = xAxis\n  .append(\"text\")\n  .attr(\"x\", dims.panel.width * 0.5)\n  .attr(\"y\", dims.margin.b * 0.8)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"fill\", \"black\")\n  .style(\"font-size\", options.xtitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.xtitle);\n\nconst yAxisTitle = yAxis\n  .append(\"text\")\n  .attr(\"y\", -dims.margin.t * 0.3)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"fill\", \"black\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle);\n\nconst timeLabel = panel.append(\"g\").attr(\"class\", \"layer-timelabel\");\nconst timeLabelText = timeLabel\n  .append(\"text\")\n  .style(\"text-anchor\", \"end\")\n  .style(\"font-size\", options.timeLabelOpts.size)\n  .style(\"font-family\", options.font);\n\n// initialize scales\n\nconst xScale = d3.scaleLinear().range([0, dims.panel.width]);\n\nconst yScale = d3.scaleBand().range([dims.panel.height, 0]);\n\nconst colorScale = d3.scaleOrdinal();\n\n// animating function\nfunction update(frame, init = false) {\n  const t = svg\n    .transition()\n    .ease(d3[\"ease\" + options.ease])\n    .duration(options.transitionDur);\n\n  // setup data\n  const frameData = data.filter((d) => d[options.time] == frame);\n\n  frameData.sort(function (a, b) {\n    return d3[options.sort](a[options.x], b[options.x]);\n  });\n\n  // update scales\n  xScale.domain([0, d3.max(data, (d) => d[options.x]) * 1.05]).nice();\n  //// y and color scale updated here for now for the\n  //// future possibility of bars entering from out-of-frame\n  const yLabels = [...new Set(frameData.map((d) => d[options.y]))];\n  yScale\n    .domain(d3.reverse(yLabels))\n    .paddingInner(options.paddingWidth)\n    .paddingOuter(options.paddingWidth);\n  colorScale\n    .domain(yLabels)\n    .range(d3[\"scheme\" + options.colorCategory].slice(0, yLabels.length));\n\n  // draw bars\n\n  layerBar\n    .selectAll(\".bar\")\n    .data(frameData, (d) => d[options.y])\n    .join(\n      (enter) => {\n        enter\n          .append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"width\", (d) => xScale(d[options.x]))\n          .attr(\"height\", yScale.bandwidth())\n          .attr(\"y\", (d) => yScale(d[options.y]))\n          .attr(\"fill\", (d) => colorScale(d[options.y]))\n          .style(\"opacity\", options.opacity)\n          .style(\"stroke\", options.stroke)\n          .style(\"stroke-width\", options.strokeWidth);\n      },\n      (update) => {\n        update.call((update) =>\n          update\n            .transition(t)\n            .attr(\"width\", (d) => xScale(d[options.x]))\n            .attr(\"y\", (d) => yScale(d[options.y]))\n        );\n      }\n    );\n\n  // draw axes\n  xGridLines\n    .call(\n      d3.axisBottom(xScale).ticks(options.xticks).tickSize(-dims.panel.height)\n    )\n    .call((g) =>\n      g\n        .selectAll(\"line\")\n        .style(\"stroke\", options.xgridlinecol)\n        .style(\"stroke-width\", 2)\n    )\n    .call((g) => {\n      g.selectAll(\"path\").remove();\n      g.selectAll(\"text\").remove();\n    });\n  xAxis.call(d3.axisBottom(xScale).ticks(options.xticks));\n\n  if (init) {\n    yAxis.call(d3.axisLeft(yScale));\n  } else {\n    yAxis.call((g) => g.transition(t).call(d3.axisLeft(yScale)));\n  }\n\n  // label the frame\n  if (options.timeLabel) {\n    timeLabelText.text(\n      options.timeLabelOpts.prefix + frame + options.timeLabelOpts.suffix\n    );\n\n    const timeLabelDims = timeLabelText.node().getBBox();\n\n    timeLabel.attr(\n      \"transform\",\n      `translate(\n        ${\n          dims.panel.width - timeLabelDims.width * options.timeLabelOpts.xOffset\n        },\n        ${\n          dims.panel.height -\n          timeLabelDims.height * options.timeLabelOpts.yOffset\n        }\n      )`\n    );\n  }\n}\n\n// TODO format time and sort + expose method as parameter\nconst timeSet = [...new Set(data.map((d) => d[options.time]))];\n\nupdate(timeSet[0], (init = true));\nvar counter = 1;\nsetInterval(() => {\n  update(timeSet[counter % timeSet.length]);\n  counter++;\n}, options.frameDur + options.transitionDur);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script><p>As you might have noticed, the value of the column passed to the
<code>time</code> argument is automatically labelled at the bottom-right
corner of the plot panel. We can stylize this with a list of options
passed to the <code>timeLabelOpts</code> argument (or turn it off with
<code>timeLabel = FALSE</code>). We also give the bars a little bounce
here with <code>ease = "BackInOut"</code> for fun.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gapminder_subset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/barChartRace.html">barChartRace</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"pop"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"country"</span>,</span>
<span>    time <span class="op">=</span> <span class="st">"year"</span>,</span>
<span>    ease <span class="op">=</span> <span class="st">"BackInOut"</span>,</span>
<span>    ytitle <span class="op">=</span> <span class="st">"Country"</span>,</span>
<span>    xtitle <span class="op">=</span> <span class="st">"Population (in millions)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Bar chart race of country populations"</span>,</span>
<span>    timeLabelOpts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      size <span class="op">=</span> <span class="fl">40</span>,</span>
<span>      prefix <span class="op">=</span> <span class="st">"Year: "</span>,</span>
<span>      xOffset <span class="op">=</span> <span class="fl">0.2</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="r2d3 html-widget html-fill-item" id="htmlwidget-16ec33930352bd7ed495" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-16ec33930352bd7ed495">{"x":{"data":{"year":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007,1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"pop":[56.60256,65.551171,76.03939,88.049823,100.840058,114.313951,128.962939,142.938076,155.975974,168.546719,179.914212,190.010647,69.14595199999999,71.019069,73.73911699999999,76.368453,78.717088,78.16077300000001,78.335266,77.718298,80.597764,82.011073,82.35067100000001,82.40099600000001,86.459025,91.56300899999999,95.831757,100.825279,107.188273,113.872473,118.454974,122.091325,124.329269,125.956499,127.065841,127.467972,30.144317,35.015548,41.121485,47.995559,55.984294,63.759976,71.64090400000001,80.12249199999999,88.11103,95.895146,102.479927,108.700891,22.438691,26.072194,30.325264,35.3566,40.850141,46.850962,53.456774,60.017788,67.185766,75.01298800000001,82.995088,91.077287,26.246839,28.998543,33.79614,39.46391,44.655014,50.533506,56.142181,62.826491,69.94072799999999,76.048996,80.908147,85.262356],"country":["Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Brazil","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Mexico","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Philippines","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam","Vietnam"]},"type":"data.frame","container":"div","options":{"x":"pop","y":"country","time":"year","ease":"BackInOut","frameDur":500,"transitionDur":500,"colorCategory":"Accent","sort":"descending","paddingWidth":0.1,"xFontSize":10,"yFontSize":10,"xticks":10,"xtitle":"Population (in millions)","ytitle":"Country","xtitleFontSize":16,"ytitleFontSize":14,"title":"Bar chart race of country populations","titleFontSize":22,"stroke":"black","strokeWidth":null,"font":"Verdana, Geneva, Tahoma, sans-serif","bgcol":"#CAD0D3","panelcol":"#EBEBEBFF","xgridlinecol":"white","opacity":1,"timeLabel":true,"timeLabelOpts":{"size":40,"prefix":"Year: ","suffix":"","xOffset":0.2,"yOffset":1}},"script":"var d3Script = function(d3, r2d3, data, div, width, height, options, theme, console) {\nthis.d3 = d3;\n\ndiv = d3.select(div.node());\n/* R2D3 Source File:  /private/var/folders/j0/00mb0qsn01v_q9tx3_bck5bc0000gn/T/RtmpXn2Lyc/temp_libpath8cf03a9b7366/ddplot/d3/scatterplot/barchartrace.js */\n// set plot dimensions\nconst dims = {\n  width: width,\n  height: height,\n  margin: { t: 40, r: 30, b: 50, l: 0 },\n};\n\n// draw svg canvas\nconst svg = div\n  .append(\"svg\")\n  .datum(data)\n  .attr(\"width\", dims.width)\n  .attr(\"height\", dims.height)\n  .call((svg) => {\n    svg\n      .append(\"rect\")\n      .attr(\"width\", dims.width)\n      .attr(\"height\", dims.height)\n      .attr(\"fill\", options.bgcol);\n  });\n\n// panel\n\n//// adjust left plot margin to fit y-axis text (TODO this doesnt work)\nconst longestLabel = data\n  .map((d) => d[options.y])\n  .sort((a, b) => b.length - a.length);\nconst longestText = svg.append(\"text\").text(longestLabel[0]);\ndims.margin.l = longestText.node().getComputedTextLength() * 1.1;\nlongestText.remove();\n\n//// compute panel dims\ndims.panel = {\n  width: width - dims.margin.r - dims.margin.l,\n  height: dims.height - dims.margin.t - dims.margin.b,\n};\n\n//// draw panel\nconst panel = svg\n  .append(\"g\")\n  .attr(\"transform\", `translate(${dims.margin.l}, ${dims.margin.t})`)\n  .call((g) => {\n    g.append(\"rect\")\n      .attr(\"width\", dims.panel.width)\n      .attr(\"height\", dims.panel.height)\n      .attr(\"fill\", options.panelcol);\n  });\n\n// init static elements\n\nconst title = svg\n  .append(\"text\")\n  .attr(\"x\", dims.width / 2)\n  .attr(\"y\", dims.margin.t / 1.5)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"font-size\", options.titleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.title);\n\nconst xGridLines = panel\n  .append(\"g\")\n  .attr(\"class\", \"x-gridlines\")\n  .attr(\"transform\", `translate(0, ${dims.panel.height})`);\n\nconst layerBar = panel.append(\"g\").attr(\"class\", \"layer-bar\");\n\nlet xAxis = panel\n  .append(\"g\")\n  .attr(\"class\", \"x-axis\")\n  .attr(\"transform\", `translate(0, ${dims.panel.height})`)\n  .style(\"font-size\", options.xFontSize)\n  .style(\"font-family\", options.font);\n\nlet yAxis = panel\n  .append(\"g\")\n  .attr(\"class\", \"y-axis\")\n  .style(\"font-size\", options.yFontSize)\n  .style(\"font-family\", options.font);\n\nconst xAxisTitle = xAxis\n  .append(\"text\")\n  .attr(\"x\", dims.panel.width * 0.5)\n  .attr(\"y\", dims.margin.b * 0.8)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"fill\", \"black\")\n  .style(\"font-size\", options.xtitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.xtitle);\n\nconst yAxisTitle = yAxis\n  .append(\"text\")\n  .attr(\"y\", -dims.margin.t * 0.3)\n  .style(\"text-anchor\", \"middle\")\n  .style(\"fill\", \"black\")\n  .style(\"font-size\", options.ytitleFontSize)\n  .style(\"font-family\", options.font)\n  .text(options.ytitle);\n\nconst timeLabel = panel.append(\"g\").attr(\"class\", \"layer-timelabel\");\nconst timeLabelText = timeLabel\n  .append(\"text\")\n  .style(\"text-anchor\", \"end\")\n  .style(\"font-size\", options.timeLabelOpts.size)\n  .style(\"font-family\", options.font);\n\n// initialize scales\n\nconst xScale = d3.scaleLinear().range([0, dims.panel.width]);\n\nconst yScale = d3.scaleBand().range([dims.panel.height, 0]);\n\nconst colorScale = d3.scaleOrdinal();\n\n// animating function\nfunction update(frame, init = false) {\n  const t = svg\n    .transition()\n    .ease(d3[\"ease\" + options.ease])\n    .duration(options.transitionDur);\n\n  // setup data\n  const frameData = data.filter((d) => d[options.time] == frame);\n\n  frameData.sort(function (a, b) {\n    return d3[options.sort](a[options.x], b[options.x]);\n  });\n\n  // update scales\n  xScale.domain([0, d3.max(data, (d) => d[options.x]) * 1.05]).nice();\n  //// y and color scale updated here for now for the\n  //// future possibility of bars entering from out-of-frame\n  const yLabels = [...new Set(frameData.map((d) => d[options.y]))];\n  yScale\n    .domain(d3.reverse(yLabels))\n    .paddingInner(options.paddingWidth)\n    .paddingOuter(options.paddingWidth);\n  colorScale\n    .domain(yLabels)\n    .range(d3[\"scheme\" + options.colorCategory].slice(0, yLabels.length));\n\n  // draw bars\n\n  layerBar\n    .selectAll(\".bar\")\n    .data(frameData, (d) => d[options.y])\n    .join(\n      (enter) => {\n        enter\n          .append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"width\", (d) => xScale(d[options.x]))\n          .attr(\"height\", yScale.bandwidth())\n          .attr(\"y\", (d) => yScale(d[options.y]))\n          .attr(\"fill\", (d) => colorScale(d[options.y]))\n          .style(\"opacity\", options.opacity)\n          .style(\"stroke\", options.stroke)\n          .style(\"stroke-width\", options.strokeWidth);\n      },\n      (update) => {\n        update.call((update) =>\n          update\n            .transition(t)\n            .attr(\"width\", (d) => xScale(d[options.x]))\n            .attr(\"y\", (d) => yScale(d[options.y]))\n        );\n      }\n    );\n\n  // draw axes\n  xGridLines\n    .call(\n      d3.axisBottom(xScale).ticks(options.xticks).tickSize(-dims.panel.height)\n    )\n    .call((g) =>\n      g\n        .selectAll(\"line\")\n        .style(\"stroke\", options.xgridlinecol)\n        .style(\"stroke-width\", 2)\n    )\n    .call((g) => {\n      g.selectAll(\"path\").remove();\n      g.selectAll(\"text\").remove();\n    });\n  xAxis.call(d3.axisBottom(xScale).ticks(options.xticks));\n\n  if (init) {\n    yAxis.call(d3.axisLeft(yScale));\n  } else {\n    yAxis.call((g) => g.transition(t).call(d3.axisLeft(yScale)));\n  }\n\n  // label the frame\n  if (options.timeLabel) {\n    timeLabelText.text(\n      options.timeLabelOpts.prefix + frame + options.timeLabelOpts.suffix\n    );\n\n    const timeLabelDims = timeLabelText.node().getBBox();\n\n    timeLabel.attr(\n      \"transform\",\n      `translate(\n        ${\n          dims.panel.width - timeLabelDims.width * options.timeLabelOpts.xOffset\n        },\n        ${\n          dims.panel.height -\n          timeLabelDims.height * options.timeLabelOpts.yOffset\n        }\n      )`\n    );\n  }\n}\n\n// TODO format time and sort + expose method as parameter\nconst timeSet = [...new Set(data.map((d) => d[options.time]))];\n\nupdate(timeSet[0], (init = true));\nvar counter = 1;\nsetInterval(() => {\n  update(timeSet[counter % timeSet.length]);\n  counter++;\n}, options.frameDur + options.transitionDur);\n};","style":null,"version":6,"theme":{"default":{"background":"#FFFFFF","foreground":"#000000"},"runtime":null},"useShadow":true},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="using-ddplot-in-shiny">Using <code>ddplot</code> in <code>Shiny</code><a class="anchor" aria-label="anchor" href="#using-ddplot-in-shiny"></a>
</h2>
<p>If you want to add reactivity to your <code>ddplot</code> plots, use
the <code>uiOutput</code> and <code>renderUI</code> in order to render a
frame, note that you’ll need to have a <code>www</code> folder, below an
example:</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/feddelegrand7/ddplot" class="external-link">ddplot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/r2d3/" class="external-link">r2d3</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"Example ddplot application"</span><span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectInput</a></span><span class="op">(</span></span>
<span>    inputId <span class="op">=</span> <span class="st">"colors"</span>,</span>
<span>    label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/colors.html" class="external-link">colors</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    selected <span class="op">=</span> <span class="st">"springgreen3"</span></span>
<span>  <span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html" class="external-link">sliderInput</a></span><span class="op">(</span></span>
<span>    inputId <span class="op">=</span> <span class="st">"slider"</span>,</span>
<span>    label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    min <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    max <span class="op">=</span> <span class="fl">10</span>,</span>
<span>    value <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/builder.html" class="external-link">br</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">mainPanel</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/htmlOutput.html" class="external-link">uiOutput</a></span><span class="op">(</span><span class="st">"ddplot_ui"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">ddplot_ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderUI.html" class="external-link">renderUI</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="va">widget</span> <span class="op">&lt;-</span> <span class="fu">ddplot</span><span class="fu">::</span><span class="fu"><a href="../reference/scatterPlot.html">scatterPlot</a></span><span class="op">(</span></span>
<span>      data <span class="op">=</span> <span class="va">iris</span>,</span>
<span>      x <span class="op">=</span> <span class="st">"Sepal.Length"</span>,</span>
<span>      y <span class="op">=</span> <span class="st">"Sepal.Width"</span>,</span>
<span>      size <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">slider</span>,</span>
<span>      col <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">colors</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="fu">htmlwidgets</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/htmlwidgets/man/saveWidget.html" class="external-link">saveWidget</a></span><span class="op">(</span><span class="va">widget</span>, <span class="st">"www/temp_ddplot.html"</span>, selfcontained <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">iframe</span><span class="op">(</span>src <span class="op">=</span> <span class="st">"temp_ddplot.html"</span>, width <span class="op">=</span> <span class="st">"100%"</span>, height <span class="op">=</span> <span class="st">"400px"</span>, frameborder <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mohamed El Fodil Ihaddaden.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
